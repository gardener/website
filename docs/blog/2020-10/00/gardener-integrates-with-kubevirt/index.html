<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><title>Gardener Integrates with KubeVirt | Gardener</title><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta property="og:title" content="Gardener Integrates with KubeVirt"><meta property="og:description" content="The Gardener team is happy to announce that Gardener now offers support for an additional, often requested, infrastructure/virtualization technology, namely KubeVirt! Gardener can now provide Kubernetes-conformant clusters using KubeVirt managed Virtual Machines in the environment of your choice. This integration has been tested and works with any qualified Kubernetes (provider) cluster that is compatibly configured to host the required KubeVirt components, in particular for example Red Hat OpenShift Virtualization.
Gardener enables Kubernetes consumers to centralize and operate efficiently homogenous Kubernetes clusters across different IaaS providers and even private environments."><meta property="og:type" content="article"><meta property="og:url" content="https://gardener.cloud/blog/2020-10/00/gardener-integrates-with-kubevirt/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-10-19T00:00:00+00:00"><meta property="article:modified_time" content="2020-10-19T00:00:00+00:00"><meta itemprop=name content="Gardener Integrates with KubeVirt"><meta itemprop=description content="The Gardener team is happy to announce that Gardener now offers support for an additional, often requested, infrastructure/virtualization technology, namely KubeVirt! Gardener can now provide Kubernetes-conformant clusters using KubeVirt managed Virtual Machines in the environment of your choice. This integration has been tested and works with any qualified Kubernetes (provider) cluster that is compatibly configured to host the required KubeVirt components, in particular for example Red Hat OpenShift Virtualization.
Gardener enables Kubernetes consumers to centralize and operate efficiently homogenous Kubernetes clusters across different IaaS providers and even private environments."><meta itemprop=datePublished content="2020-10-19T00:00:00+00:00"><meta itemprop=dateModified content="2020-10-19T00:00:00+00:00"><meta itemprop=wordCount content="1392"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Gardener Integrates with KubeVirt"><meta name=twitter:description content="The Gardener team is happy to announce that Gardener now offers support for an additional, often requested, infrastructure/virtualization technology, namely KubeVirt! Gardener can now provide Kubernetes-conformant clusters using KubeVirt managed Virtual Machines in the environment of your choice. This integration has been tested and works with any qualified Kubernetes (provider) cluster that is compatibly configured to host the required KubeVirt components, in particular for example Red Hat OpenShift Virtualization.
Gardener enables Kubernetes consumers to centralize and operate efficiently homogenous Kubernetes clusters across different IaaS providers and even private environments."><link rel=preload href=/scss/main.min.ca2e9ddee7809848b536632b41e4e4df665800778ffe11b75edde5bdd6c78963.css as=style><link href=/scss/main.min.ca2e9ddee7809848b536632b41e4e4df665800778ffe11b75edde5bdd6c78963.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg width="90" height="90" viewBox="0 0 90 90" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>logo</title><desc>Created with Sketch.</desc><defs><path d="M41.8864954.994901575c.996545099999999-.479910833 2.6164002-.477918931 3.6088091.0L76.8159138 16.0781121C77.8124589 16.5580229 78.8208647 17.8257185 79.0659694 18.8995926l7.7355517 33.8916663C87.0476474 53.8696088 86.6852538 55.4484075 85.9984855 56.3095876L64.3239514 83.4885938C63.6343208 84.3533632 62.1740175 85.0543973 61.0725268 85.0543973H26.3092731c-1.1060816.0-2.5646564-.704623400000003-3.2514246-1.5658035L1.38331434 56.3095876C.693683723 55.4448182.335174016 53.865133.580278769 52.7912589L8.31583044 18.8995926C8.56195675 17.8212428 9.57347722 16.556031 10.5658861 16.0781121L41.8864954.994901575z" id="path-1"/><linearGradient x1="12.7542673%" y1="-18.6617048%" x2="88.2666158%" y2="84.6075483%" id="linearGradient-3"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="50%" y1="4.93673768%" x2="148.756007%" y2="175.514523%" id="linearGradient-4"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="19.1574381%" y1="-9.04800713%" x2="82.2203149%" y2="77.9084293%" id="linearGradient-5"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="57.4403751%" y1="26.3148481%" x2="137.966711%" y2="158.080556%" id="linearGradient-6"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="logo"><g id="Rectangle-2" transform="translate(1.000000, 0.000000)"><mask id="mask-2" fill="#fff"><use xlink:href="#path-1"/></mask><use id="Mask" fill="#009f76" xlink:href="#path-1"/><polygon fill="#000" opacity=".289628623" mask="url(#mask-2)" points="-17.6484375 54.5224609 30.8242188 25.0791016 63.4726562 58.5 24.7324219 92.6689453"/></g><path d="M56.8508631 39.260019C56.4193519 40.443987 55.6088085 41.581593 54.6736295 42.1938694l-8.0738997 5.2861089c-1.3854671.907087099999998-3.6247515.9116711-5.0172201.0L33.50861 42.1938694C32.123143 41.2867823 31 39.206345 31 37.545932V26.4150304c0-.725313.2131118-1.5301454.569268099999999-2.2825772L56.8508631 39.260019z" id="Combined-Shape" fill="url(#linearGradient-3)" transform="translate(43.925432, 36.147233) scale(-1, 1) translate(-43.925432, -36.147233)"/><path d="M56.0774672 25.1412464C56.4306829 25.8903325 56.6425556 26.6907345 56.6425556 27.4119019V38.5428034c0 1.6598979-1.1161415 3.73626640000001-2.50861 4.6479374l-8.0738997 5.286109c-1.3854671.907087000000004-3.6247516.911671000000005-5.0172201.0L32.9689261 43.1907408C32.2918101 42.7474223 31.6773514 42.0238435 31.2260376 41.206007L56.0774672 25.1412464z" id="Combined-Shape" fill="url(#linearGradient-4)" transform="translate(43.821278, 37.246598) scale(-1, 1) translate(-43.821278, -37.246598)"/><path d="M65.0702134 57.1846889C64.5985426 58.2007851 63.8367404 59.1236871 62.9788591 59.6189851L47.37497 68.6278947c-1.4306165.825966800000003-3.75236779999999.8246599-5.1807206.0L26.5903603 59.6189851C25.1597438 58.7930183 24 56.7816693 24 55.1323495V37.1145303C24 36.3487436 24.249712 35.5060005 24.6599102 34.7400631L65.0702134 57.1846889z" id="Combined-Shape" fill="url(#linearGradient-5)"/><path d="M65.0189476 34.954538C65.3636909 35.6617313 65.5692194 36.42021 65.5692194 37.1145303V55.1323495C65.5692194 56.7842831 64.4072119 58.7943252 62.9788591 59.6189851L47.37497 68.6278947c-1.4306165.825966800000003-3.75236779999999.8246599-5.1807206.0L26.5903603 59.6189851C25.9237304 59.2341061 25.3159155 58.5918431 24.8568495 57.8487596L65.0189476 34.954538z" id="Combined-Shape" fill="url(#linearGradient-6)"/></g></g></svg></span><span class=text-capitalize>Gardener</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/adopter><span>Adopters</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog><span>Blogs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs><span>Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.2035d9813dafac83fe2a48b18d50f237.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.2035d9813dafac83fe2a48b18d50f237.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blog-li><a href=/blog/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section tree-root" id=m-blog><span>Blogs</span></a><ul class="pr-md-3 ul-1"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021-0101happy-anniversary-gardener-li><a href=/blog/2021-01/01/happy-anniversary-gardener/ title="Happy anniversary Gardener! Three years of open source Kubernetes management" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2021-0101happy-anniversary-gardener><span>Happy anniversary Gardener!</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2021-0100machine-controller-manager-li><a href=/blog/2021-01/00/machine-controller-manager/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2021-0100machine-controller-manager><span>Machine Controller Manager</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020-1200stackit-kubernetes-engine-with-gardener-li><a href=/blog/2020-12/00/stackit-kubernetes-engine-with-gardener/ title="STACKIT Kubernetes Engine with Gardener" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020-1200stackit-kubernetes-engine-with-gardener><span>STACKIT SKE with Gardener</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020-1102gardener-v113-released-li><a href=/blog/2020-11/02/gardener-v1.13-released/ title="Gardener v1.13 Released" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020-1102gardener-v113-released><span>Gardener v1.13</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020-1101case-study-migrating-etcd-volumes-in-production-li><a href=/blog/2020-11/01/case-study-migrating-etcd-volumes-in-production/ title="Case Study: Migrating ETCD Volumes in Production" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020-1101case-study-migrating-etcd-volumes-in-production><span>Gardener ETCD Volumes Migration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020-1100gardener-v111-and-v112-released-li><a href=/blog/2020-11/00/gardener-v1.11-and-v1.12-released/ title="Gardener v1.11 and v1.12 Released" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020-1100gardener-v111-and-v112-released><span>Gardener v1.11 and v1.12</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-blog2020-1000gardener-integrates-with-kubevirt-li><a href=/blog/2020-10/00/gardener-integrates-with-kubevirt/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__page" id=m-blog2020-1000gardener-integrates-with-kubevirt><span class=td-sidebar-nav-active-item>Gardener Integrates with KubeVirt</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020-1001shoot-reconciliation-details-li><a href=/blog/2020-10/01/shoot-reconciliation-details/ title="Shoot Reconciliation Details" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020-1001shoot-reconciliation-details><span>Shoot Reconciliation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020-09gardener-v19-and-v110-released-li><a href=/blog/2020-09/gardener-v1.9-and-v1.10-released/ title="Gardener v1.9 and v1.10 Released" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020-09gardener-v19-and-v110-released><span>Gardener v1.9 and v1.10</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020-0800gardener-v180-released-li><a href=/blog/2020-08/00/gardener-v1.8.0-released/ title="Gardener v1.8.0 Released" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020-0800gardener-v180-released><span>Gardener v1.8.0</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020-0500pingcaps-experience-li><a href=/blog/2020-05/00/pingcaps-experience/ title="PingCAP’s Experience in Implementing their Managed TiDB Service with Gardener" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020-0500pingcaps-experience><span>PingCAP's TiDB Cloud</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2020_week_20new-website-same-green-flower-li><a href=/blog/2020_week_20/new-website-same-green-flower/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2020_week_20new-website-same-green-flower><span>New Website, Same Green Flower</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2019_week_21cluster-overprovisioning-li><a href=/blog/2019_week_21/cluster-overprovisioning/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2019_week_21cluster-overprovisioning><span>Cluster Overprovisioning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2019_week_21feature-flags-in-kubernetes-applications-li><a href=/blog/2019_week_21/feature-flags-in-kubernetes-applications/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2019_week_21feature-flags-in-kubernetes-applications><span>Feature Flags in Kubernetes Applications</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2019_week_06manually-adding-a-node-to-an-existing-cluster-li><a href=/blog/2019_week_06/manually-adding-a-node-to-an-existing-cluster/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2019_week_06manually-adding-a-node-to-an-existing-cluster><span>Manually adding a node to an existing cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2019_week_02organizing-access-using-kubeconfig-files-li><a href=/blog/2019_week_02/organizing-access-using-kubeconfig-files/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2019_week_02organizing-access-using-kubeconfig-files><span>Organizing Access Using kubeconfig Files</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_52gardener_cookies-li><a href=/blog/2018_week_52/gardener_cookies/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_52gardener_cookies><span>Gardener Cookies</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_40hibernate-a-cluster-to-save-money-li><a href=/blog/2018_week_40/hibernate-a-cluster-to-save-money/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_40hibernate-a-cluster-to-save-money><span>Hibernate a Cluster to save money</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_22anti-patterns-li><a href=/blog/2018_week_22/anti-patterns/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_22anti-patterns><span>Anti Patterns</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_46auditing-kubernetes-for-secure-setup-li><a href=/blog/2018_week_46/auditing-kubernetes-for-secure-setup/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_46auditing-kubernetes-for-secure-setup><span>Auditing Kubernetes for Secure Setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_07big-things-come-in-small-packages-li><a href=/blog/2018_week_07/big-things-come-in-small-packages/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_07big-things-come-in-small-packages><span>Big things come in small packages</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_51cookies-are-dangerous-li><a href=/blog/2018_week_51/cookies-are-dangerous/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_51cookies-are-dangerous><span>Cookies are dangerous...</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_17frontend-https-li><a href=/blog/2018_week_17/frontend-https/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_17frontend-https><span>Frontend HTTPS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_50hardening-the-gardener-community-setup-li><a href=/blog/2018_week_50/hardening-the-gardener-community-setup/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_50hardening-the-gardener-community-setup><span>Hardening the Gardener Community Setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_06kubernetes-is-available-in-docker-for-mac-17-12-ce-li><a href=/blog/2018_week_06/kubernetes-is-available-in-docker-for-mac-17-12-ce/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_06kubernetes-is-available-in-docker-for-mac-17-12-ce><span>Kubernetes is available in Docker for Mac 17.12 CE</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_09namespace-isolation-li><a href=/blog/2018_week_09/namespace-isolation/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_09namespace-isolation><span>Namespace Isolation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_08namespace-scope-li><a href=/blog/2018_week_08/namespace-scope/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_08namespace-scope><span>Namespace Scope</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_27readwritemany-dynamically-provisioned-persistent-volumes-using-amazon-efs-li><a href=/blog/2018_week_27/readwritemany-dynamically-provisioned-persistent-volumes-using-amazon-efs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_27readwritemany-dynamically-provisioned-persistent-volumes-using-amazon-efs><span>ReadWriteMany - Dynamically Provisioned Persistent Volumes Using Amazon EFS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_10shared-storage-with-s3-backend-li><a href=/blog/2018_week_10/shared-storage-with-s3-backend/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_10shared-storage-with-s3-backend><span>Shared storage with S3 backend</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog2018_week_08watching-logs-of-several-pods-li><a href=/blog/2018_week_08/watching-logs-of-several-pods/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-blog2018_week_08watching-logs-of-several-pods><span>Watching logs of several pods</span></a></li></ul></li></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><div class=git-wr><div class=page-contributors>Contributors to this page<div class=contributors-list><a href=mailto:k.zhelyazkov@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/58623197?v=4" title=Zhelyazkov><a href=mailto:n_boshnakov@abv.bg><img class=user-icon src="https://avatars.githubusercontent.com/u/25197046?v=4" title="Nikolay Boshnakov"></div></div></div><a href=https://github.com/gardener/documentation/edit/master/website/blog/2020-10/00/Gardener-Integrates-with-KubeVirt.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/gardener/documentation/issues/new?title=Gardener%20Integrates%20with%20KubeVirt" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/gardener/website-generator/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
<a id=print href=https://gardener.cloud/blog/_print/><i class="fa fa-print fa-fw"></i> Print entire section</a></div><p>Page Content</p><nav id=TableOfContents><ul><li><a href=#architecture-and-workflow>Architecture and Workflow</a><ul><li><a href=#gardener-integration-with-kubevirt-in-detail>Gardener Integration with KubeVirt in Detail</a></li><li><a href=#enabling-your-gardener-setup-to-leverage-a-kubevirt-compatible-environment>Enabling Your Gardener Setup to Leverage a KubeVirt Compatible Environment</a></li><li><a href=#kubevirt-machine-controller-manager-mcm-extension>KubeVirt Machine Controller Manager (MCM) Extension</a></li><li><a href=#supported-environments>Supported Environments</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><a class="btn btn-lg -bg-orange td-rss-button d-none d-lg-block" href=https://gardener.cloud/blog/index.xml target=_blank>RSS <i class="fa fa-rss ml-2"></i></a><div class=td-content><h1>Gardener Integrates with KubeVirt</h1><div class="td-byline mb-4"><time datetime=2020-10-19 class=text-muted>Monday, October 19, 2020</time></div><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i> 7 minute read</p><p>The Gardener team is happy to announce that <a href=https://gardener.cloud>Gardener</a> now offers support for an additional, often requested, infrastructure/virtualization technology, namely <a href=https://kubevirt.io/>KubeVirt</a>! Gardener can now provide <a href=https://github.com/cncf/k8s-conformance>Kubernetes-conformant</a> clusters using KubeVirt managed Virtual Machines in the environment of your choice. This integration has been tested and works with any qualified Kubernetes (provider) cluster that is compatibly configured to host the required KubeVirt components, in particular for example <a href=https://www.openshift.com/blog/openshift-virtualization-containers-kvm-and-your-vms>Red Hat OpenShift Virtualization</a>.</p><p>Gardener enables Kubernetes consumers to centralize and operate efficiently homogenous Kubernetes clusters across different IaaS providers and even private environments. This way the same cloud-based application version can be hosted and operated by its vendor or consumer on a variety of infrastructures. When a new customer or your development team demands for a new infrastructure provider, Gardener helps you to quickly and easily on-board your workload. Furthermore, on this new infrastructure, Gardener keeps the seamless Kubernetes management experience for your Kubernetes operators, while upholding the consistency of the CI/CD pipeline of your software development team.</p><h2 id=architecture-and-workflow>Architecture and Workflow</h2><p>Gardener is based on the idea of three types of clusters – <em>Garden cluster</em>, <em>Seed cluster</em> and <em>Shoot cluster</em> (see <strong>Figure 1</strong>). The Garden cluster is used to control the entire Kubernetes environment centrally in a highly scalable design. The highly available seed clusters are used to host the end users (shoot) clusters’ control planes. Finally, the shoot clusters consist only of worker nodes to host the cloud native applications.</p><img title="Gardener Architecture" src=/__resources/00-001_16cac8.png style=width:90%;height:auto><figcaption style=text-align:center;margin-top:-25px;margin-bottom:30px;font-size:90%>Figure 1: Gardener Architecture</figcaption><p>An integration of the Gardener open source project with a new cloud provider follows a standard <a href=/docs/gardener/extensions/overview/>Gardener extensibility</a> approach. The integration requires two new components: a <a href=/docs/gardener/extensions/overview/>provider extension</a> and a <a href=/docs/other-components/machine-controller-manager/docs/development/cp_support_new/>Machine Controller Manager (MCM) extension</a>. Both components together enable Gardener to instruct the new cloud provider. They run in the Gardener seed clusters that host the control planes of the shoots based on that cloud provider. The role of the provider extension is to manage the provider-specific aspects of the shoot clusters’ lifecycle, including infrastructure, control plane, worker nodes, and others. It works in cooperation with the MCM extension, which in particular is responsible to handle machines that are provisioned as worker nodes for the shoot clusters. To get this job done, the MCM extension leverages the VM management/API capabilities available with the respective cloud provider.</p><p>Setting up a Kubernetes cluster always involves a flow of interdependent steps (see <strong>Figure 2</strong>), beginning with the generation of certificates and preparation of the infrastructure, continuing with the provisioning of the control plane and the worker nodes, and ending with the deployment of system components. Gardener can be configured to utilize the KubeVirt extensions in its generic workflow at the right extension points, and deliver the desired outcome of a KubeVirt backed cluster.</p><img title="Gardener Architecture" src=/__resources/00-002_e4afa8.png style=width:90%;height:auto><figcaption style=text-align:center;margin-top:-25px;margin-bottom:30px;font-size:90%>Figure 2: Generic cluster reconciliation flow with extension points</figcaption><h3 id=gardener-integration-with-kubevirt-in-detail>Gardener Integration with KubeVirt in Detail</h3><p>Integration with KubeVirt follows the Gardener extensibility concept and introduces the two new components mentioned above: the <a href=https://github.com/gardener/gardener-extension-provider-kubevirt>KubeVirt Provider Extension</a> and the <a href=https://github.com/gardener/machine-controller-manager-provider-kubevirt>KubeVirt Machine Controller Manager (MCM) Extension</a>.</p><img title="Gardener integration with KubeVirt" src=/__resources/00-003_6d0936.png style=width:80%;height:auto><figcaption style=text-align:center;margin-top:-25px;margin-bottom:30px;font-size:90%>Figure 3: Gardener integration with KubeVirt</figcaption><p>The KubeVirt Provider Extension consists of three separate controllers that handle respectively the infrastructure, the control plane, and the worker nodes of the shoot cluster.</p><p>The <strong>Infrastructure Controller</strong> configures the network communication between the shoot worker nodes. By default, shoot worker nodes only use the provider cluster’s pod network. To achieve higher level of network isolation and better performance, it is possible to add more networks and replace the default pod network with a different network using container network interface (CNI) plugins available in the provider cluster. This is currently based on <a href=https://github.com/intel/multus-cni/blob/master/README.md>Multus CNI</a> and <a href=https://github.com/k8snetworkplumbingwg/multus-cni/blob/master/docs/quickstart.md>NetworkAttachmentDefinitions</a>.</p><p>Example infrastructure configuration in a shoot definition:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>provider:
  type: kubevirt
  infrastructureConfig:
    apiVersion: kubevirt.provider.extensions.gardener.cloud/v1alpha1
    kind: InfrastructureConfig
    networks:
      tenantNetworks:
      - name: network-1
        config: |<span style=color:#a31515>
</span><span style=color:#a31515>          {
</span><span style=color:#a31515>            &#34;cniVersion&#34;: &#34;0.4.0&#34;,
</span><span style=color:#a31515>            &#34;name&#34;: &#34;bridge-firewall&#34;,
</span><span style=color:#a31515>            &#34;plugins&#34;: [
</span><span style=color:#a31515>              {
</span><span style=color:#a31515>                &#34;type&#34;: &#34;bridge&#34;,
</span><span style=color:#a31515>                &#34;isGateway&#34;: true,
</span><span style=color:#a31515>                &#34;isDefaultGateway&#34;: true,
</span><span style=color:#a31515>                &#34;ipMasq&#34;: true,
</span><span style=color:#a31515>                &#34;ipam&#34;: {
</span><span style=color:#a31515>                  &#34;type&#34;: &#34;host-local&#34;,
</span><span style=color:#a31515>                  &#34;subnet&#34;: &#34;10.100.0.0/16&#34;
</span><span style=color:#a31515>                }
</span><span style=color:#a31515>              },
</span><span style=color:#a31515>              {
</span><span style=color:#a31515>                &#34;type&#34;: &#34;firewall&#34;
</span><span style=color:#a31515>              }
</span><span style=color:#a31515>            ]
</span><span style=color:#a31515>          }</span>          
        default: <span style=color:#00f>true</span>
</code></pre></div><p>The <strong>Control Plane Controller</strong> deploys a <em>Cloud Controller Manager (CCM)</em>. This is a Kubernetes control plane component that embeds cloud-specific control logic. As any other CCM, it runs the Node controller that is responsible for initializing Node objects, annotating and labeling them with cloud-specific information, obtaining the node’s hostname and IP addresses, and verifying the node’s health. It also runs the Service controller that is responsible for setting up load balancers and other infrastructure components for Service resources that require them.</p><p>Finally, the <strong>Worker Controller</strong> is responsible for managing the worker nodes of the Gardener shoot clusters.</p><p>Example worker configuration in a shoot definition:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>provider:
  type: kubevirt
  workers:
  - name: cpu-worker
    minimum: 1
    maximum: 2
    machine:
      type: standard-1
      image:
        name: ubuntu
        version: <span style=color:#a31515>&#34;18.04&#34;</span>
    volume:
      type: default
      size: 20Gi
    zones:
    - europe-west1-c
</code></pre></div><p>For more information about configuring the KubeVirt Provider Extension as an end-user, see <a href=/docs/extensions/infrastructure-extensions/gardener-extension-provider-kubevirt/docs/usage-as-end-user/>Using the KubeVirt provider extension with Gardener as end-user</a>.</p><h3 id=enabling-your-gardener-setup-to-leverage-a-kubevirt-compatible-environment>Enabling Your Gardener Setup to Leverage a KubeVirt Compatible Environment</h3><p>The very first step required is to define the machine types (VM types) for VMs that will be available. This is achieved via the <code>CloudProfile</code> custom resource. The machine types configuration includes details such as CPU, GPU, memory, OS image, and more.</p><p>Example <code>CloudProfile</code> custom resource:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>apiVersion: core.gardener.cloud/v1beta1
kind: CloudProfile
metadata:
  name: kubevirt
spec:
  type: kubevirt
  providerConfig:
    apiVersion: kubevirt.provider.extensions.gardener.cloud/v1alpha1
    kind: CloudProfileConfig
    machineImages:
    - name: ubuntu
      versions:
      - version: <span style=color:#a31515>&#34;18.04&#34;</span>
        sourceURL: <span style=color:#a31515>&#34;https://cloud-images.ubuntu.com/bionic/current/bionic-server-cloudimg-amd64.img&#34;</span>
  kubernetes:
    versions:
    - version: <span style=color:#a31515>&#34;1.18.5&#34;</span>
  machineImages:
  - name: ubuntu
    versions:
    - version: <span style=color:#a31515>&#34;18.04&#34;</span>
  machineTypes:
  - name: standard-1
    cpu: <span style=color:#a31515>&#34;1&#34;</span>
    gpu: <span style=color:#a31515>&#34;0&#34;</span>
    memory: 4Gi
  volumeTypes:
  - name: default
    class: default
  regions:
  - name: europe-west1
    zones:
    - name: europe-west1-b
    - name: europe-west1-c
    - name: europe-west1-d
</code></pre></div><p>Once a machine type is defined, it can be referenced in shoot definitions. This information is used by the KubeVirt Provider Extension to generate <code>MachineDeployment</code> and <code>MachineClass</code> custom resources required by the KubeVirt MCM extension for managing the worker nodes of the shoot clusters during the reconciliation process.</p><p>For more information about configuring the KubeVirt Provider Extension as an operator, see <a href=/docs/extensions/infrastructure-extensions/gardener-extension-provider-kubevirt/docs/usage-as-operator/>Using the KubeVirt provider extension with Gardener as operator</a>.</p><h3 id=kubevirt-machine-controller-manager-mcm-extension>KubeVirt Machine Controller Manager (MCM) Extension</h3><p>The <a href=https://github.com/gardener/machine-controller-manager-provider-kubevirt>KubeVirt MCM Extension</a> is responsible for managing the VMs that are used as worker nodes of the Gardener shoot clusters using the virtualization capabilities of KubeVirt. This extension handles all necessary lifecycle management activities, such as machines creation, fetching, updating, listing, and deletion.</p><p>The KubeVirt MCM Extension implements the Gardener’s common <a href=https://github.com/gardener/machine-controller-manager/blob/master/pkg/util/provider/driver/driver.go>driver interface</a> for managing VMs in different cloud providers. As already mentioned, the KubeVirt MCM Extension is using the <code>MachineDeployments</code> and <code>MachineClasses</code> – an abstraction layer that follows the Kubernetes native declarative approach - to get instructions from the KubeVirt Provider Extension about the required machines for the shoot worker nodes. Also, the cluster austoscaler integrates with the <code>scale</code> subresource of the <code>MachineDeployment</code> resource. This way, Gardener offers a homogeneous autoscaling experience across all supported providers.</p><p>When a new shoot cluster is created or when a new worker node is needed for an existing shoot cluster, a new <a href=https://github.com/gardener/machine-controller-manager-provider-kubevirt/blob/master/kubernetes/machine.yaml>Machine</a> will be created, and at that time, the KubeVirt MCM extension will create a new KubeVirt <code>VirtualMachine</code> in the provider cluster. This <code>VirtualMachine</code> will be created based on a set of configurations in the <a href=https://github.com/gardener/machine-controller-manager-provider-kubevirt/blob/master/kubernetes/machine-class.yaml>MachineClass</a> that follows the <a href=https://github.com/gardener/machine-controller-manager-provider-kubevirt/blob/master/pkg/kubevirt/apis/provider_spec.go>specification</a> of the KubeVirt provider.</p><p>The KubeVirt MCM Extension has two main components. The <strong>MachinePlugin</strong> is responsible for handling the machine objects, and the <strong>PluginSPI</strong> is in charge of making calls to the cloud provider interface, to manage its resources.</p><img title="KubeVirt MCM extension workflow and architecture" src=/__resources/00-004_f2f641.png style=width:60%;height:auto><figcaption style=text-align:center;margin-top:-25px;margin-bottom:30px;font-size:90%>Figure 4: KubeVirt MCM extension workflow and architecture</figcaption><p>As shown in <strong>Figure 4</strong>, the MachinePlugin receives a machine request from the MCM and starts its processing by decoding the request, doing partial validation, extracting the relevant information, and sending it to the PluginSPI.</p><p>The PluginSPI then creates, gets, or deletes <code>VirtualMachines</code> depending on the method called by the MachinePlugin. It extracts the kubeconfig of the provider cluster and handles all other required KubeVirt resources such as the secret that holds the <code>cloud-init</code> configurations, and <code>DataVolumes</code> that are mounted as disks to the VMs.</p><h3 id=supported-environments>Supported Environments</h3><p>The Gardener KubeVirt support is currently qualified on:</p><ul><li><a href=https://kubevirt.io/2020/changelog-v0.32.0.html>KubeVirt v0.32.0</a> (and later)</li><li><a href=https://docs.openshift.com/container-platform/4.4/welcome/index.html>Red Hat OpenShift Container Platform 4.4</a> (and later)</li></ul><p>There are also plans for further improvements and new features, for example integration with CSI drivers for storage management. Details about the implementation progress can be found in the <a href=https://github.com/gardener/gardener-extension-provider-kubevirt/issues>Gardener project on GitHub</a>.</p><p>You can find further resources about the open source project Gardener at <a href=https://gardener.cloud>https://gardener.cloud</a>.</p><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/blog/2020-10/01/shoot-reconciliation-details/ aria-label="Previous - Shoot Reconciliation Details" class="btn btn-primary"><span class=mr-1>←</span> Previous</a></li><a href=/blog/2020-11/00/gardener-v1.11-and-v1.12-released/ aria-label="Next - Gardener v1.11 and v1.12 Released" class="btn btn-primary">Next <span class=ml-1>→</span></a></li></ul></div></main></div></div><footer class="footer row d-print-none"><div class="container-fluid footer-wrapper"><ul class=nav><li><a href=https://gardener.cloud/blog/>Blogs</a></li><li><a href=https://gardener.cloud/community/>Community</a></li><li><a href=https://gardener.cloud/adopter/>Adopters</a></li><li><a href=/docs/>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2019-2022 Gardener project authors. <a href=https://www.sap.com/corporate/en/legal/privacy.html>Privacy policy
<i class="fa fa-external-link" aria-hidden=true></i></a></span></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js integrity=sha384-uQikAXnCAqsMb3ygtdqBYvcwvHUkzGIpjdGyy9owhURXHUxLC5LgTcSxJQH/RzjK crossorigin=anonymous></script><script src=/js/main.min.ef8e0714aff556fd5a9768ed6ecabd2964dd962cd9f89762a373947bb53bc742.js integrity="sha256-744HFK/1Vv1al2jtbsq9KWTdlizZ+Jdio3OUe7U7x0I=" crossorigin=anonymous></script></body></html>