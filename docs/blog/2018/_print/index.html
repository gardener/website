<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://gardener.cloud/blog/2018/><link rel=alternate type=application/rss+xml href=https://gardener.cloud/blog/2018/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>2018 | Gardener</title>
<meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta property="og:url" content="https://gardener.cloud/blog/2018/"><meta property="og:site_name" content="Gardener"><meta property="og:title" content="2018"><meta property="og:description" content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta property="og:locale" content="en_US"><meta property="og:type" content="website"><meta property="og:image" content="https://gardener.cloud/images/lp/gardener-logo.svg"><meta itemprop=name content="2018"><meta itemprop=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta itemprop=datePublished content="2018-12-25T00:00:00+00:00"><meta itemprop=dateModified content="2018-12-25T00:00:00+00:00"><meta itemprop=image content="https://gardener.cloud/images/lp/gardener-logo.svg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://gardener.cloud/images/lp/gardener-logo.svg"><meta name=twitter:title content="2018"><meta name=twitter:description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><link rel=preload href=/scss/main.min.9be7e3558835315265c1fbaf504c28f9b719c045b5bed7bcc6a4c53d2d69d2fb.css as=style integrity="sha256-m+fjVYg1MVJlwfuvUEwo+bcZwEW1vte8xqTFPS1p0vs=" crossorigin=anonymous><link href=/scss/main.min.9be7e3558835315265c1fbaf504c28f9b719c045b5bed7bcc6a4c53d2d69d2fb.css rel=stylesheet integrity="sha256-m+fjVYg1MVJlwfuvUEwo+bcZwEW1vte8xqTFPS1p0vs=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class="td-section td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><style>.nav-link:hover{text-decoration:none}.ml-md-auto{margin-left:auto!important}.td-search__icon{color:#fff!important}.td-search__input.form-control::placeholder{color:#fff;border:1px;border-radius:20px}.td-search__input.form-control{border:1px;border-radius:20px}.td-search__input{max-width:90%}.td-search:not(:focus-within){color:#fff!important}</style><a class=navbar-brand href=/><span class=navbar-logo><svg width="90" height="90" viewBox="0 0 90 90" xmlns:xlink="http://www.w3.org/1999/xlink"><title>logo</title><desc>Created with Sketch.</desc><defs><path d="M41.8864954.994901575c.996545099999999-.479910833 2.6164002-.477918931 3.6088091.0L76.8159138 16.0781121C77.8124589 16.5580229 78.8208647 17.8257185 79.0659694 18.8995926l7.7355517 33.8916663C87.0476474 53.8696088 86.6852538 55.4484075 85.9984855 56.3095876L64.3239514 83.4885938C63.6343208 84.3533632 62.1740175 85.0543973 61.0725268 85.0543973H26.3092731c-1.1060816.0-2.5646564-.704623400000003-3.2514246-1.5658035L1.38331434 56.3095876C.693683723 55.4448182.335174016 53.865133.580278769 52.7912589L8.31583044 18.8995926C8.56195675 17.8212428 9.57347722 16.556031 10.5658861 16.0781121L41.8864954.994901575z" id="path-1"/><linearGradient x1="12.7542673%" y1="-18.6617048%" x2="88.2666158%" y2="84.6075483%" id="linearGradient-3"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="50%" y1="4.93673768%" x2="148.756007%" y2="175.514523%" id="linearGradient-4"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="19.1574381%" y1="-9.04800713%" x2="82.2203149%" y2="77.9084293%" id="linearGradient-5"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="57.4403751%" y1="26.3148481%" x2="137.966711%" y2="158.080556%" id="linearGradient-6"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="logo"><g id="Rectangle-2" transform="translate(1.000000, 0.000000)"><mask id="mask-2" fill="#fff"><use xlink:href="#path-1"/></mask><use id="Mask" fill="#009f76" xlink:href="#path-1"/><polygon fill="#000" opacity=".289628623" mask="url(#mask-2)" points="-17.6484375 54.5224609 30.8242188 25.0791016 63.4726562 58.5 24.7324219 92.6689453"/></g><path d="M56.8508631 39.260019C56.4193519 40.443987 55.6088085 41.581593 54.6736295 42.1938694l-8.0738997 5.2861089c-1.3854671.907087099999998-3.6247515.9116711-5.0172201.0L33.50861 42.1938694C32.123143 41.2867823 31 39.206345 31 37.545932V26.4150304c0-.725313.2131118-1.5301454.569268099999999-2.2825772L56.8508631 39.260019z" id="Combined-Shape" fill="url(#linearGradient-3)" transform="translate(43.925432, 36.147233) scale(-1, 1) translate(-43.925432, -36.147233)"/><path d="M56.0774672 25.1412464C56.4306829 25.8903325 56.6425556 26.6907345 56.6425556 27.4119019V38.5428034c0 1.6598979-1.1161415 3.73626640000001-2.50861 4.6479374l-8.0738997 5.286109c-1.3854671.907087000000004-3.6247516.911671000000005-5.0172201.0L32.9689261 43.1907408C32.2918101 42.7474223 31.6773514 42.0238435 31.2260376 41.206007L56.0774672 25.1412464z" id="Combined-Shape" fill="url(#linearGradient-4)" transform="translate(43.821278, 37.246598) scale(-1, 1) translate(-43.821278, -37.246598)"/><path d="M65.0702134 57.1846889C64.5985426 58.2007851 63.8367404 59.1236871 62.9788591 59.6189851L47.37497 68.6278947c-1.4306165.825966800000003-3.75236779999999.8246599-5.1807206.0L26.5903603 59.6189851C25.1597438 58.7930183 24 56.7816693 24 55.1323495V37.1145303C24 36.3487436 24.249712 35.5060005 24.6599102 34.7400631L65.0702134 57.1846889z" id="Combined-Shape" fill="url(#linearGradient-5)"/><path d="M65.0189476 34.954538C65.3636909 35.6617313 65.5692194 36.42021 65.5692194 37.1145303V55.1323495C65.5692194 56.7842831 64.4072119 58.7943252 62.9788591 59.6189851L47.37497 68.6278947c-1.4306165.825966800000003-3.75236779999999.8246599-5.1807206.0L26.5903603 59.6189851C25.9237304 59.2341061 25.3159155 58.5918431 24.8568495 57.8487596L65.0189476 34.954538z" id="Combined-Shape" fill="url(#linearGradient-6)"/></g></g></svg></span><span class=text-capitalize>Gardener</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://demo.gardener.cloud target=_blank><span>Demo</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/adopter><span>Adopters</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><div class=dropdown><a href=/docs class=nav-link>Documentation</a><div class=dropdown-content><a class=taxonomy-term href=/docs>Users</a>
<a class=taxonomy-term href=/docs>Operators</a>
<a class=taxonomy-term href=/docs>Developers</a>
<a class=taxonomy-term href=/docs>All</a></div></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog><span>Blogs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site‚Ä¶" aria-label="Search this site‚Ä¶" autocomplete=off data-offline-search-index-json-src=/offline-search-index.b56e8c5db5fa287d514e53ef07d199f5.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/blog/2018/>Return to the regular view of this page</a>.</p></div><h1 class=title>2018</h1><div class=content></div></div><div class=td-content><h1 id=pg-486244ec0498277b1c88be549bfbc5f4>Gardener Cookies</h1><div class="td-byline mb-4"><time datetime=2018-12-25 class=text-body-secondary>Tuesday, December 25, 2018</time></div><h1 id=green-tea-matcha-cookies>Green Tea Matcha Cookies<a class=td-heading-self-link href=#green-tea-matcha-cookies aria-label="Heading self-link"></a></h1><p>For a team event during the Christmas season we decided to completely reinterpret the topic <code>cookies</code>. :-)</p><img style=width:50%;height:auto;margin:0,auto src=/__resources/cookie-00_d79655.jpg><p>Matcha cookies have the delicate flavor and color of green tea. These soft, pillowy and chewy green tea cookies
are perfect with tea. And of course they fit perfectly to our logo.</p><h2 id=ingredients>Ingredients<a class=td-heading-self-link href=#ingredients aria-label="Heading self-link"></a></h2><ul><li>1 stick butter, softened</li><li>‚Öû cup of granulated sugar</li><li>1 cup + 2 tablespoons all-purpose flour</li><li>2 eggs</li><li>1¬º tablespoons culinary grade matcha powder</li><li>1 teaspoon baking powder</li><li>pinch of salt</li></ul><h2 id=instructions>Instructions<a class=td-heading-self-link href=#instructions aria-label="Heading self-link"></a></h2><ol><li>Cream together the butter and sugar in a large mixing bowl - it should be creamy colored and airy. A hand blender or stand mixer works well for this. This helps the cookie become fluffy and chewy.</li><li>Gently incorporate the eggs to the butter mixture one at a time.</li><li>In a separate bowl, sift together all the dry ingredients.</li><li>Add the dry ingredients to the wet by adding a little at a time and folding or gently mixing the batter together. Keep going until you&rsquo;ve incorporated all the remaining flour mixture. The dough should be a beautiful green color.</li><li>Chill the dough for at least an hour - up to overnight. The longer the better!</li><li>Preheat your oven to 325 F.</li><li>Roll the dough into balls the size of ping pong balls and place them on a non-stick cookie sheet.</li><li>Bake them for 12-15 minutes until the bottoms just start to become golden brown and the cookie no longer looks wet in the middle. Note: you can always bake them at 350 F for a less moist, fluffy cookie. It will bake faster by about 2-4 minutes 350 F so watch them closely.</li><li>Remove and let cool on a rack and enjoy!</li></ol><h2 id=note>Note<a class=td-heading-self-link href=#note aria-label="Heading self-link"></a></h2><p>Make sure you get culinary grade matcha powder. You should be able to find this in Asian or natural grocers.</p><img style=width:50%;height:auto src=/__resources/cookie-01_65961f.jpg>
<img style=width:50%;height:auto src=/__resources/cookie-02_67389a.jpg>
<img style=width:50%;height:auto src=/__resources/cookie-03_4240a1.jpg>
<img style=width:50%;height:auto src=/__resources/cookie-05_aca4e7.jpg></div><div class=td-content style=page-break-before:always><h1 id=pg-868bdce99d5eded6025c09d01e1976ea>Cookies Are Dangerous...</h1><div class="td-byline mb-4"><time datetime=2018-12-22 class=text-body-secondary>Saturday, December 22, 2018</time></div><p><strong>&mldr;they mess up the figure.</strong></p><p><img src=/__resources/cookie_8fffdf.jpg alt=cookie></p><p>For a team event during the Christmas season we decided to completely reinterpret the topic <code>cookies</code>&mldr; since the vegetables have gone on a well-deserved vacation. :-)</p><p>Get the recipe at <a href=/blog/2018/12.25-gardener_cookies/>Gardener Cookies</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ae91555f579ea09dbf712ea3545addec>Hibernate a Cluster to Save Money</h1><div class="td-byline mb-4"><time datetime=2018-07-11 class=text-body-secondary>Wednesday, July 11, 2018</time></div><p>You want to experiment with Kubernetes or set up a customer scenario, but don&rsquo;t want to run the cluster 24 / 7 due to cost reasons?</p><p><img src=/__resources/teaser-patched-1_a1e9aa.svg alt=teaser-patched-1></p><p>Gardener gives you the possibility to scale your cluster down to <strong>zero nodes</strong>.</p><p>Learn more on <a href=/docs/gardener/shoot/shoot_hibernate/>Hibernate a Cluster</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-eb76fdb04e7110115998d40f563102e2>Anti Patterns</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p><img src=/__resources/blog-antipattern_a45c50.png alt></p><h2 id=running-as-root-user>Running as Root User<a class=td-heading-self-link href=#running-as-root-user aria-label="Heading self-link"></a></h2><p>Whenever possible, do not run containers as root users. One could be tempted to say that in Kubernetes, the node and pods are well separated, however, the host and the container share the same kernel. If the container is compromised, a root user can damage the underlying node.</p><p>Instead of running a root user, use <code>RUN groupadd -r anygroup && useradd -r -g anygroup myuser</code> to create a group and a user in it. Use the <code>USER</code> command to switch to this user.</p><h2 id=storing-data-or-logs-in-containers>Storing Data or Logs in Containers<a class=td-heading-self-link href=#storing-data-or-logs-in-containers aria-label="Heading self-link"></a></h2><p>Containers are ideal for stateless applications and should be transient. This means that no data or logs should be stored in the container, as they are lost when the container is closed. If absolutely necessary, you can use persistence volumes instead to persist them outside the containers.</p><p>However, an ELK stack is preferred for storing and processing log files.</p><p>Learn more on <a href=/docs/guides/applications/antipattern/>Common Kubernetes Antipattern</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-2cac7ad5c0a3f96aba02964baaa01ed3>Auditing Kubernetes for Secure Setup</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p>In summer 2018, the <a href=https://github.com/gardener/gardener>Gardener project team</a> asked <a href=https://kinvolk.io/>Kinvolk</a> to execute several penetration tests in its role as a third-party contractor. The goal of this ongoing work is to increase the security of all Gardener stakeholders in the open source community. Following the Gardener architecture, the control plane of a Gardener managed shoot cluster resides in the corresponding seed cluster. This is a <a href=https://kubernetes.io/blog/2018/05/17/gardener/#kubernetes-control-plane>Control-Plane-as-a-Service</a> with a <a href=https://kubernetes.io/blog/2018/05/17/gardener/#network-air-gap>network air gap</a>.</p><p><img src=/__resources/teaser_593154.svg alt=teaser></p><p>Along the way we found various kinds of security issues, for example, due to misconfiguration or missing isolation, as well as two special problems with upstream Kubernetes and its Control-Plane-as-a-Service architecture.</p><p>Learn more on <a href=/docs/guides/applications/insecure-configuration/>Auditing Kubernetes for Secure Setup</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9522eefd9bdd411630f132be1f15c22a>Big Things Come in Small Packages</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p>Microservices tend to use smaller runtimes but you can <strong>use what you have</strong> today - and this can be a <strong>problem in Kubernetes</strong>.</p><p>Switching your architecture from a monolith to microservices has many advantages, both in the way you write software and the way it is used throughout its lifecycle. In this post, my attempt is to cover one problem which does not get as much attention and discussion - <strong>size of the technology stack</strong>.</p><h2 id=general-purpose-technology-stack>General Purpose Technology Stack<a class=td-heading-self-link href=#general-purpose-technology-stack aria-label="Heading self-link"></a></h2><p><img src=/__resources/blog-service-common-stack_086bad.png alt=service-common-stack></p><p>There is a tendency to be more generalized in development and to apply this pattern to all services. One feels that a homogeneous image of the technology stack is good if it is the same for all services.</p><p>One forgets, however, that a large percentage of the integrated infrastructure is not used by all services in the same way, and is therefore only a burden. Thus, resources are wasted and the entire application becomes expensive in operation and scales very badly.</p><h2 id=light-technology-stack>Light Technology Stack<a class=td-heading-self-link href=#light-technology-stack aria-label="Heading self-link"></a></h2><p>Due to the lightweight nature of your service, you can run more containers on a physical server and virtual machines. The result is higher resource utilization.</p><p><img src=/__resources/blog-service-service-stack_c81cdc.png alt=service-service-stack></p><p>Additionally, microservices are developed and deployed as containers independently of each another. This means that a development team can develop, optimize, and deploy a microservice without impacting other subsystems.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f242013ec2c69b611a1180f65727653b>Hardening the Gardener Community Setup</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p>The <a href=https://github.com/gardener/gardener>Gardener project team</a> has analyzed the impact of the Gardener <a href=https://groups.google.com/forum/#!topic/gardener/Pom2Y70cDpw>CVE-2018-2475</a> and the <a href=https://groups.google.com/forum/#!topic/kubernetes-announce/GVllWCg6L88>Kubernetes CVE-2018-1002105</a> on the Gardener Community Setup. Following some recommendations it is possible to mitigate both vulnerabilities.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f0e497d5686cd6f2172880cef2025356>Kubernetes is Available in Docker for Mac 17.12 CE</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><table style=border:0><tr><td><img alt="Enabling Kubernetes in Docker image" src=/__resources/blog-kubernetes-enable_09769e.png title="Enabling Kubernetes in Docker image"></td><td valign=top><div><b>Kubernetes is only available in Docker for Mac 17.12 CE and higher</b> on the Edge channel. Kubernetes
support is not included in Docker for Mac Stable releases. To find out more about Stable and Edge channels
and how to switch between them, see
<a href=https://docs.docker.com/docker-for-mac/#general>general configuration</a>.</div></td></tr></table>Docker for Mac 17.12 CE (and higher) Edge includes a standalone Kubernetes server that runs on Mac, so that you can test deploying your Docker workloads on Kubernetes.<p>The Kubernetes client command, kubectl, is included and configured to connect to the local Kubernetes server. If you have kubectl already installed and pointing to some other environment, such as minikube or a GKE cluster, be sure to change the context so that kubectl is pointing to docker-for-desktop. Read more on <a href=https://docs.docker.com/docker-for-mac/#kubernetes>Docker.com</a>.</p><p>I recommend to <a href=/docs/guides/administer-shoots/oidc-login/>setup your shell</a> to see which KUBECONFIG is active.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-96ff114e6aa0e61b36f5f840dfe68647>Namespace Isolation</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p>&mldr;or <strong>DENY all traffic from other namespaces</strong></p><p>You can configure a <strong>NetworkPolicy</strong> to deny all traffic from other namespaces while allowing all traffic coming from the same namespace the pod is deployed to. There are many reasons why you may choose to configure Kubernetes network policies:</p><ul><li>Isolate multi-tenant deployments</li><li>Regulatory compliance</li><li>Ensure containers assigned to different environments (e.g. dev/staging/prod) cannot interfere with each another</li></ul><p><img src=/__resources/blog-namespaceisolation_78050f.png alt=namespaceisolation></p><p>Learn more on <a href=/docs/guides/applications/network-isolation/>Namespace Isolation</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9e763e8598a206e9d2ca9ca012c81097>Namespace Scope</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p><strong>Should I use:</strong></p><ul style=list-style:none><li>‚ùå one namespace per user/developer?</li><li>‚ùå one namespace per team?</li><li>‚ùå one per service type?</li><li>‚ùå one namespace per application type?</li><li>üòÑ <b>one namespace per running instance of your application?</b></li></ul><p><strong>Apply the <a href=https://en.wikipedia.org/wiki/Principle_of_least_privilege>Principle of Least Privilege</a></strong></p><p>All user accounts should run <strong>as few privileges as possible</strong> at all times, and also launch applications with as few privileges as possible. If you share a cluster for a different user separated by a <code>namespace</code>, <strong>the user has access to all <code>namespaces</code></strong> and services per default. It can happen that a user <strong>accidentally uses and destroys</strong> the <code>namespace</code> of a productive application or the <code>namespace</code> of another developer.</p><p><strong>Keep in mind - By default namespaces don&rsquo;t provide:</strong></p><ul><li>Network Isolation</li><li>Access Control</li><li>Audit Logging on user level</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-6b0437ab0c60198e4b4ef4546de93d06>ReadWriteMany - Dynamically Provisioned Persistent Volumes Using Amazon EFS</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p>The efs-provisioner allows you to mount EFS storage as PersistentVolumes in Kubernetes. It consists of a container that has access to an AWS EFS resource. The container reads a configmap containing the EFS filesystem ID, the AWS region and the name identifying the efs-provisioner. This name will be used later when you create a storage class.</p><p><img src=/__resources/blog-aws-efs_1785a2.png alt></p><h2 id=why-efs>Why EFS<a class=td-heading-self-link href=#why-efs aria-label="Heading self-link"></a></h2><ol><li>When you have an application running on multiple nodes which require shared access to a file system.</li><li>When you have an application that requires multiple virtual machines to access the same file system at the same time, AWS EFS is a tool that you can use.</li><li>EFS supports encryption.</li><li>EFS is SSD based storage and its storage capacity and pricing will scale in or out as needed, so there is no need for the system administrator to do additional operations. It can grow to a petabyte scale.</li><li>EFS now supports NFSv4 lock upgrading and downgrading, so yes, you can use sqlite with EFS‚Ä¶ even if it was possible before.</li><li>EFS is easy to setup.</li></ol><h2 id=why-not-efs>Why Not EFS<a class=td-heading-self-link href=#why-not-efs aria-label="Heading self-link"></a></h2><ol><li>Sometimes when you think about using a service like EFS, you may also think about <strong>vendor lock-in</strong> and its negative sides.</li><li>Making an EFS backup may decrease your production FS performance; the throughput used by backups counts towards your total file system throughput.</li><li>EFS is expensive when compared to EBS (roughly twice the price of EBS storage).</li><li>EFS is not the magical solution for all your distributed FS problems, it can be slow in many cases. Test, benchmark, and measure to ensure that EFS is a good solution for your use case.</li><li>EFS distributed architecture results in a latency overhead for each file read/write operation.</li><li>If you have the possibility to use a CDN, don‚Äôt use EFS, use it for the files which can&rsquo;t be stored in a CDN.</li><li>Don‚Äôt use EFS as a caching system, sometimes you could be doing this unintentionally.</li><li>Last but not least, even if EFS is a fully managed NFS, you will face performance problems in many cases, resolving them takes time and needs effort.</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-c3da5fb402e9b425c8ab19987f15fd55>Shared Storage with S3 Backend</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p>The storage is definitely the most complex and important part of an application setup. Once this part is completed, one of the most problematic parts could be solved.</p><p>Mounting an S3 bucket into a pod using <a href=https://github.com/libfuse/libfuse>FUSE</a> allows you to access data stored in S3 via the filesystem. The mount is a pointer to an S3 location, so the data is never synced locally. Once mounted, any pod can read or even write from that directory without the need for explicit keys.</p><p><img src=/__resources/blog-s3-shared-storage_861109.png alt=s3-shared-storage></p><p>However, it can be used to import and parse large amounts of data into a database.</p><p>Learn more on <a href=https://github.com/freegroup/kube-s3/blob/master/README.md>Shared S3 Storage</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-0b684b2e48a9e075f7112413186179eb>Watching Logs of Several Pods</h1><div class="td-byline mb-4"><time datetime=2018-06-11 class=text-body-secondary>Monday, June 11, 2018</time></div><p>One thing that always bothered me was that I couldn&rsquo;t get the logs of several pods at once with <code>kubectl</code>. A simple <code>tail -f &lt;path-to-logfile></code> isn&rsquo;t possible. Certainly, you can use <code>kubectl logs -f &lt;pod-id></code>, but it doesn&rsquo;t help if you want to monitor more than one pod at a time.</p><p>This is something you really need a lot, at least if you run several instances of a pod behind a <code>deployment</code>and you don&rsquo;t have a log viewer service like Kibana set up.</p><p><img src=/__resources/blog-kubetail_5b346b.png alt=kubetail></p><p>In that case, kubetail comes to the rescue. It is a small bash script that allows you to aggregate the log files of several pods at the same time in a simple way. The script is called <code>kubetail</code> and is available at <a href=https://github.com/johanhaleby/kubetail>GitHub</a>.</p></div></main></div></div><footer class="footer row d-print-none"><div class="container-fluid footer-wrapper"><ul class=nav><li><a href=https://gardener.cloud/blog/>Blogs</a></li><li><a href=https://gardener.cloud/community/>Community</a></li><li><a href=https://gardener.cloud/adopter/>Adopters</a></li><li><a href=/docs/>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2019-2025 Gardener project authors. <a href=https://www.sap.com/corporate/en/legal/privacy.html>Privacy policy
<i class="fa fa-external-link" aria-hidden=true></i></a></span></div></footer></div><script src=/js/main.min.69e2c1ae9320465ab10236d9ef752c6a4442c54b48b883b17c497b7c7d96a796.js integrity="sha256-aeLBrpMgRlqxAjbZ73UsakRCxUtIuIOxfEl7fH2Wp5Y=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>