<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta name=copyright content="Copyright 2019-2021 Gardener project authors."><meta name=google-site-verification content="9EoGiMwk2aq0E_tVh16iJgJbp7fbyqkfWH9b5sGybl0"><title>Shoot Cluster Maintenance :: Gardener</title><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W2FGNSX');</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-165447164-1');</script><link href=/css/font-awesome.min.css?1615914469 rel=stylesheet><link href=/css/skeleton.css?1615914469 rel=stylesheet><link rel=preload href=/fonts/sap-icofonts/sap-icofonts.woff as=font type=font/woff crossorigin=anonymous><link rel=preload href=/fonts/sapcom-icons/sapcom-icons.woff as=font type=font/woff crossorigin=anonymous><link rel=stylesheet href=/css/sapcom-icons.css><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=/css/gardener.b459b7f22c26be8e2f608a181d5372c6e44f06cf007c350346ccf5fadbe04a74.css><script src=/js/moment.js?1615914469></script><script src=/js/inlineSVG.js?1615914469></script><script src=/js/jquery.min.js?1615914469></script><script src=/jquery-ui-1.12.1/jquery-ui.min.js?1615914469></script><script src=/js/fixed.js?1615914469></script><script src=/js/clipboard.min.js?1615914469></script><script src=https://platform.linkedin.com/in.js type=text/javascript>lang:en_US</script></head><body data-url=/v1.15.5/guides/administer_shoots/maintain-shoot/ class=has-sticky-navigation><script>$(document).ready(function(){function initStickyNav(){var stickyPoint;var tln=document.querySelector(".tln");if(!tln){return;}
var stickyPointEl=document.querySelector(".sticky-nav-point");if(stickyPointEl==null){stickyPointEl=document.querySelector("body");stickyPoint=0;}else{stickyPoint=stickyPointEl.clientHeight+stickyPointEl.offsetTop;}
var bodySelector=document.getElementsByTagName("body")[0];var tlnHeight=tln.clientHeight;var stickyNavigation=function(){if(window.pageYOffset+tlnHeight>=stickyPoint){bodySelector.classList.add("has-sticky-navigation");tln.classList.add("sticky-top");}else{bodySelector.classList.remove("has-sticky-navigation");tln.classList.remove("sticky-top");}}
window.onscroll=function(){stickyNavigation();};}
initStickyNav();function closeAllSelect(){document.getElementById("docOptions").classList.remove("show");}
function show(e){e.stopPropagation();document.getElementById("docOptions").classList.add("show");}
document.addEventListener("click",closeAllSelect);document.getElementById("docSelector").addEventListener("click",show);});</script><div class="tln fixedsticky sticky-top"><header class=navigation><div class=container><div class=navigation-wrapper><a href=/ class=logo><img src=/images/gardener-logo.svg>
<span class=title>Gardener</span></a>
<a class="nav-button navbar-toggler" href=#><i class="fa fa-bars"></i></a><div class=navbar-collapse><ul class=links><li class=link><a href=/blog/>Blogs</a></li><li class=link><a href=/community/>Community</a></li><li class=link><a href=/adopter/>Adopters</a></li><li class="link has-child active"><a id=docSelector>Documentation v1.15.5</a><div id=docOptions class=doc-options><ul><li><a href=/documentation/guides/administer_shoots/maintain-shoot/>Documentation
v1.17.1</a></li><li><a href=/v1.16.3/guides/administer_shoots/maintain-shoot/>Documentation
v1.16.3</a></li><li><a href=/v1.15.5/home class=activeVersion>Documentation
v1.15.5</a></li></ul></div></li></ul></div></div></div></header></div><script>$(".navigation .navbar-toggler").click(function(evt){$(".navigation .navbar-collapse").toggle();$(".navigation").toggleClass("collapsed");$(".navigation .search-box").toggle();})</script><style>#docSelector{cursor:pointer}.doc-options{position:fixed;background-color:#0b8062;text-align:left;display:none}.doc-options ul li{margin-bottom:0}.doc-options ul li a:hover{background-color:#0c694f}.doc-options ul{list-style:none;padding:0;margin:0;text-align:left}.doc-options ul li a{padding:10px;margin:0}.doc-options .activeVersion{background-color:#ec682a}.show{display:block}</style><div class=sln><div class=overlay-band><ul class="nav-list container"><li title=Home><a class=navbar-link href=/v1.15.5/home/>Home</a></li><li title=Concepts><a class=navbar-link href=/v1.15.5/concepts/>Concepts</a></li><li title="How-To Guides"><a class="navbar-link is-active" href=/v1.15.5/guides/>How-To Guides</a></li><li title=Tutorials><a class=navbar-link href=/v1.15.5/tutorials/>Tutorials</a></li><li title="API Reference"><a class=navbar-link href=/v1.15.5/references/>API Reference</a></li><li title=Contribute><a class=navbar-link href=/v1.15.5/contribute/>Contribute</a></li></ul></div></div><div class="main container"><nav id=sidebar class="collapsed container menu"><div class=highlightable><ul class=topics><li data-nav-id=/v1.15.5/guides/ title="How-To Guides" class="dd-item parent root collapsible" data-depth=0><a href=/v1.15.5/guides/><span class=menu-item-text>How-To Guides</span></a><ul><li data-nav-id=/v1.15.5/guides/client_tools/ title="Set Up Client Tools" class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.15.5/guides/client_tools/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Set Up Client Tools</span></a><ul><li data-nav-id=/v1.15.5/guides/client_tools/kubectl-apiserver/ title="Automated deployment" class=dd-item data-depth=2><a href=/v1.15.5/guides/client_tools/kubectl-apiserver/><span class=toggle></span><span class=menu-item-text>Automated deployment</span></a></li><li data-nav-id=/v1.15.5/guides/client_tools/bash_kubeconfig/ title="Kubeconfig context as bash prompt" class=dd-item data-depth=2><a href=/v1.15.5/guides/client_tools/bash_kubeconfig/><span class=toggle></span><span class=menu-item-text>Kubeconfig context as bash prompt</span></a></li><li data-nav-id=/v1.15.5/guides/client_tools/working-with-kubeconfig/ title="Organizing Access Using kubeconfig Files" class=dd-item data-depth=2><a href=/v1.15.5/guides/client_tools/working-with-kubeconfig/><span class=toggle></span><span class=menu-item-text>Organizing Access Using kubeconfig Files</span></a></li><li data-nav-id=/v1.15.5/guides/client_tools/helm/ title="Use a Helm chart to deploy some application or service" class=dd-item data-depth=2><a href=/v1.15.5/guides/client_tools/helm/><span class=toggle></span><span class=menu-item-text>Use a Helm chart to deploy some application or service</span></a></li></ul></li><li data-nav-id=/v1.15.5/guides/install_gardener/ title="Install Gardener" class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.15.5/guides/install_gardener/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Install Gardener</span></a><ul><li data-nav-id=/v1.15.5/guides/install_gardener/setup/ title="Gardener DNS Management for Shoots" class=dd-item data-depth=2><a href=/v1.15.5/guides/install_gardener/setup/><span class=toggle></span><span class=menu-item-text></span>Gardener DNS Management for Shoots</span></a></a></li><li data-nav-id=/v1.15.5/guides/install_gardener/secure-setup/ title="Hardening the Gardener Community Setup" class=dd-item data-depth=2><a href=/v1.15.5/guides/install_gardener/secure-setup/><span class=toggle></span><span class=menu-item-text>Hardening the Gardener Community Setup</span></a></li><li data-nav-id=/v1.15.5/guides/install_gardener/landscape-setup/ title="Landscape Setup" class=dd-item data-depth=2><a href=/v1.15.5/guides/install_gardener/landscape-setup/><span class=toggle></span><span class=menu-item-text>Landscape Setup</span></a></li><li data-nav-id=/v1.15.5/guides/install_gardener/add-node-to-cluster/ title="Manually adding a node to an existing cluster" class=dd-item data-depth=2><a href=/v1.15.5/guides/install_gardener/add-node-to-cluster/><span class=toggle></span><span class=menu-item-text>Manually adding a node to an existing cluster</span></a></li><li data-nav-id=/v1.15.5/guides/install_gardener/setup-seed/ title="Setting up a Seed Cluster" class=dd-item data-depth=2><a href=/v1.15.5/guides/install_gardener/setup-seed/><span class=toggle></span><span class=menu-item-text>Setting up a Seed Cluster</span></a></li></ul></li><li data-nav-id=/v1.15.5/guides/administer_shoots/ title="Administer Client (Shoot) Clusters" class="dd-item parent top-level collapsible" data-depth=1><a href=/v1.15.5/guides/administer_shoots/><span class="toggle fa fa-angle-down"></span><span class=menu-item-text>Administer Client (Shoot) Clusters</span></a><ul><li data-nav-id=/v1.15.5/guides/administer_shoots/hibernate-cluster/ title="Hibernate a Cluster" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/hibernate-cluster/><span class=toggle></span><span class=menu-item-text>Hibernate a Cluster</span></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/create-delete-shoot/ title="Create / Delete a Shoot cluster" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/create-delete-shoot/><span class=toggle></span><span class=menu-item-text>Create / Delete a Shoot cluster</span></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/gardener_aws/ title="Create a kubernetes cluster in AWS with Gardener" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/gardener_aws/><span class=toggle></span><span class=menu-item-text>Create a kubernetes cluster in AWS with Gardener</span></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/gardener_gcp/ title="Create a kubernetes cluster on GCP with Gardener" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/gardener_gcp/><span class=toggle></span><span class=menu-item-text>Create a kubernetes cluster on GCP with Gardener</span></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/create-shoot-into-existing-aws-vpc/ title="Create a Shoot cluster into existing AWS VPC" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/create-shoot-into-existing-aws-vpc/><span class=toggle></span><span class=menu-item-text>Create a Shoot cluster into existing AWS VPC</span></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/gardener-alibaba/ title="Create Shoot Clusters in Alibaba Cloud" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/gardener-alibaba/><span class=toggle></span><span class=menu-item-text>Create Shoot Clusters in Alibaba Cloud</span></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/gardener_azure/ title=Index class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/gardener_azure/><span class=toggle></span><span class=menu-item-text></span>Index</span></a></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/dns_providers/ title="Manage DNS Providers" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/dns_providers/><span class=toggle></span><span class=menu-item-text></span>Manage DNS Providers</span></a></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/dns_names/ title="Request DNS Names" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/dns_names/><span class=toggle></span><span class=menu-item-text></span>Request DNS Names</span></a></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/request_cert/ title="Request X.509 Certificates" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/request_cert/><span class=toggle></span><span class=menu-item-text></span>Request X.509 Certificates</span></a></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/maintain-shoot/ title="Shoot Cluster Maintenance" class="dd-item parent active" data-depth=2><a href=/v1.15.5/guides/administer_shoots/maintain-shoot/><span class=toggle></span><span class=menu-item-text>Shoot Cluster Maintenance</span></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/trigger-shoot-operations/ title="Trigger Shoot operations" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/trigger-shoot-operations/><span class=toggle></span><span class=menu-item-text></span>Trigger Shoot operations</span></a></a></li><li data-nav-id=/v1.15.5/guides/administer_shoots/trigger-shoot-operations/ title="Trigger Shoot operations" class=dd-item data-depth=2><a href=/v1.15.5/guides/administer_shoots/trigger-shoot-operations/><span class=toggle></span><span class=menu-item-text>Trigger Shoot operations</span></a></li></ul></li><li data-nav-id=/v1.15.5/guides/monitoring_and_troubleshooting/ title="Monitor and Troubleshoot" class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.15.5/guides/monitoring_and_troubleshooting/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Monitor and Troubleshoot</span></a><ul><li data-nav-id=/v1.15.5/guides/monitoring_and_troubleshooting/shell-to-node/ title="Get a Shell to a Gardener Shoot Worker Node" class=dd-item data-depth=2><a href=/v1.15.5/guides/monitoring_and_troubleshooting/shell-to-node/><span class=toggle></span><span class=menu-item-text>Get a Shell to a Gardener Shoot Worker Node</span></a></li><li data-nav-id=/v1.15.5/guides/monitoring_and_troubleshooting/debug-a-pod/ title="How to debug a pod" class=dd-item data-depth=2><a href=/v1.15.5/guides/monitoring_and_troubleshooting/debug-a-pod/><span class=toggle></span><span class=menu-item-text>How to debug a pod</span></a></li><li data-nav-id=/v1.15.5/guides/monitoring_and_troubleshooting/tail-logfile/ title="tail -f /var/log/my-application.log" class=dd-item data-depth=2><a href=/v1.15.5/guides/monitoring_and_troubleshooting/tail-logfile/><span class=toggle></span><span class=menu-item-text>tail -f /var/log/my-application.log</span></a></li></ul></li><li data-nav-id=/v1.15.5/guides/applications/ title=Applications class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.15.5/guides/applications/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Applications</span></a><ul><li data-nav-id=/v1.15.5/guides/applications/access_pod_from_local/ title="Access a port of a pod locally" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/access_pod_from_local/><span class=toggle></span><span class=menu-item-text>Access a port of a pod locally</span></a></li><li data-nav-id=/v1.15.5/guides/applications/service-access/ title="Access service from outside Kubernetes cluster" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/service-access/><span class=toggle></span><span class=menu-item-text>Access service from outside Kubernetes cluster</span></a></li><li data-nav-id=/v1.15.5/guides/applications/insecure-configuration/ title="Auditing Kubernetes for Secure Setup" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/insecure-configuration/><span class=toggle></span><span class=menu-item-text>Auditing Kubernetes for Secure Setup</span></a></li><li data-nav-id=/v1.15.5/guides/applications/missing-registry-permission/ title="Container image not pulled" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/missing-registry-permission/><span class=toggle></span><span class=menu-item-text>Container image not pulled</span></a></li><li data-nav-id=/v1.15.5/guides/applications/image-pull-policy/ title="Container image not updating" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/image-pull-policy/><span class=toggle></span><span class=menu-item-text>Container image not updating</span></a></li><li data-nav-id=/v1.15.5/guides/applications/secure-seccomp/ title="Custom Seccomp profile" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/secure-seccomp/><span class=toggle></span><span class=menu-item-text>Custom Seccomp profile</span></a></li><li data-nav-id=/v1.15.5/guides/applications/dockerfile_pitfall/ title="Dockerfile pitfalls" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/dockerfile_pitfall/><span class=toggle></span><span class=menu-item-text>Dockerfile pitfalls</span></a></li><li data-nav-id=/v1.15.5/guides/applications/https/ title="HTTPS with self Signed Certificate" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/https/><span class=toggle></span><span class=menu-item-text></span>HTTPS with self Signed Certificate</span></a></a></li><li data-nav-id=/v1.15.5/guides/applications/https/ title="HTTPS with self Signed Certificate" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/https/><span class=toggle></span><span class=menu-item-text>HTTPS with self Signed Certificate</span></a></li><li data-nav-id=/v1.15.5/guides/applications/content_trust/ title="Integrity and Immutability" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/content_trust/><span class=toggle></span><span class=menu-item-text>Integrity and Immutability</span></a></li><li data-nav-id=/v1.15.5/guides/applications/antipattern/ title="Kubernetes Antipatterns" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/antipattern/><span class=toggle></span><span class=menu-item-text>Kubernetes Antipatterns</span></a></li><li data-nav-id=/v1.15.5/guides/applications/network-isolation/ title="Namespace Isolation" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/network-isolation/><span class=toggle></span><span class=menu-item-text>Namespace Isolation</span></a></li><li data-nav-id=/v1.15.5/guides/applications/container-startup/ title="Orchestration of container startup" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/container-startup/><span class=toggle></span><span class=menu-item-text>Orchestration of container startup</span></a></li><li data-nav-id=/v1.15.5/guides/applications/service-cache-control/ title="Out-Dated HTML and JS files delivered" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/service-cache-control/><span class=toggle></span><span class=menu-item-text>Out-Dated HTML and JS files delivered</span></a></li><li data-nav-id=/v1.15.5/guides/applications/commit_secret_fail/ title="Storing secrets in git 💀" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/commit_secret_fail/><span class=toggle></span><span class=menu-item-text>Storing secrets in git 💀</span></a></li><li data-nav-id=/v1.15.5/guides/applications/prometheus/ title="Using Prometheus and Grafana to monitor K8s" class=dd-item data-depth=2><a href=/v1.15.5/guides/applications/prometheus/><span class=toggle></span><span class=menu-item-text>Using Prometheus and Grafana to monitor K8s</span></a></li></ul></li><li data-nav-id=/v1.15.5/guides/gardener-cookies/ title="Gardener Cookies" class="dd-item top-level" data-depth=1><a href=/v1.15.5/guides/gardener-cookies/><span class=toggle></span><span class=menu-item-text>Gardener Cookies</span></a></li><li data-nav-id=/v1.15.5/guides/landscape-setup/ title="Landscape Setup" class="dd-item top-level" data-depth=1><a href=/v1.15.5/guides/landscape-setup/><span class=toggle></span><span class=menu-item-text></span>Landscape Setup</span></a></a></li></ul></li></ul></div></nav><a href=# class=menu-toggler><i class="fa fa-angle-double-left"></i></a><script>$(document).ready(function(){$("#sidebar .dd-item:not(.top-level):not(.parent)").hide();$("#sidebar .dd-item.parent").siblings(".dd-item").show();$('.dd-item',"#sidebar .dd-item.parent").show();$(".menu-toggler").click(function(evt){$("#sidebar").toggleClass("collapsed");$(".menu-toggler span").toggleClass("fa-angle-double-left");$(".menu-toggler span").toggleClass("fa-angle-double-right");});})</script><section><div class="highlightable body-inner-wrapper"><div id=body-inner><div class="docs page"><div class=git-wr><div class=page-contributors>Contributors to this page<div class=contributors-list><a href=https://github.com/gardener/documentation/s class=contributors-count>+ 1 more <i class="fa fa-external-link"></i></a></div></div><div class=origin-tools><div class=page-edit><span class=last-update>Last update:
<span data-publishdate="2020-06-17 19:34:37"></span></span><div id=top-github-link><a class=github-link title="Edit page" href=https://github.com/gardener/documentation/edit/master/website/documentation/guides/administer_shoots/maintain-shoot/_index.md target=blank><i class="fa fa-edit"></i><span id=top-github-link-text title="Edit page"></span></a></div></div></div></div><h1>Shoot Cluster Maintenance</h1><div class=properties><div class=expertise-level><span class=label title="Expertse level">Expertise</span><svg class="icon level" aria-hidden="true" focusable="false" title="advanced"><use xlink:href="/images/icons/icons.svg#level-3"/></svg></div></div><h1 id=shoot-cluster-maintenance>Shoot Cluster Maintenance</h1><p>Day two operations for shoot clusters are related to:</p><ul><li>The Kubernetes version of the control plane and the worker nodes</li><li>the operating system version of the worker nodes</li></ul><div class="notices note"><p>When referring to an update of the "operating system version" in this document, the update of the machine image of the shoot cluster's worker nodes is meant. For example, Amazon Machine Images (AMI) for AWS.</p></div><p>The following table summarizes what options Gardener offers to maintain these versions:</p><table><thead><tr><th style=text-align:left></th><th style=text-align:left>Auto-Update</th><th style=text-align:left>Forceful Updates</th><th style=text-align:left>Manual updates</th></tr></thead><tbody><tr><td style=text-align:left>Kubernetes version</td><td style=text-align:left>Patches only</td><td style=text-align:left>Patches and consecutive minor updates only</td><td style=text-align:left>yes</td></tr><tr><td style=text-align:left>Operating system version</td><td style=text-align:left>yes</td><td style=text-align:left>yes</td><td style=text-align:left>yes</td></tr></tbody></table><h2 id=allowed-target-versions-in-the-cloudprofile>Allowed Target Versions in the <code>CloudProfile</code></h2><p>Administrators maintain the allowed target versions that you can update to in the <code>CloudProfile</code> for each IaaS-Provider. Users with access to a Gardener project can check supported target versions with:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>kubectl get cloudprofile [IAAS-SPECIFIC-PROFILE] -o yaml
</code></pre></div><table><thead><tr><th style=text-align:left>Path</th><th style=text-align:left>Description</th><th style=text-align:left>More information</th></tr></thead><tbody><tr><td style=text-align:left><code>spec.kubernetes.versions</code></td><td style=text-align:left>The supported Kubernetes version <code>major.minor.patch</code>.</td><td style=text-align:left><a href=https://github.com/kubernetes/community/blob/master/contributors/design-proposals/release/versioning.md#patch-releases>Patch releases</a></td></tr><tr><td style=text-align:left><code>spec.machineImages</code></td><td style=text-align:left>The supported operating system versions for worker nodes.</td><td></td></tr></tbody></table><p>Both the Kubernetes version, and the operating system version follow semantic versioning that allows Gardener to handle updates automatically.</p><p>More information: <a href=http://semver.org/>Semantic Versioning</a>.</p><h3 id=impact-of-version-classifications-on-updates>Impact of Version Classifications on Updates</h3><p>Gardener allows to classify versions in the <code>CloudProfile</code> as <code>preview</code>, <code>supported</code>, <code>deprecated</code>, or <code>expired</code>. During maintenance operations, <code>preview</code> versions are excluded from updates, because they’re often recently released versions that haven’t yet undergone thorough testing and may contain bugs or security issues.</p><p>More information: <a href=https://github.com/gardener/gardener/blob/master/docs/usage/shoot_versions.md#version-classifications>Version Classifications</a>.</p><h2 id=let-gardener-manage-your-updates>Let Gardener manage your updates</h2><h3 id=the-maintenance-window>The Maintenance Window</h3><p>Gardener can manage updates for you automatically. It offers users to specify a <em>maintenance window</em> during which updates are scheduled:</p><ul><li>The time interval of the maintenance window can’t be less than 30 minutes or more than 6 hours.</li><li>If there’s no maintenance window specified during the creation of a shoot cluster, Gardener chooses a maintenance window randomly to spread the load.</li></ul><p>You can either specify the maintenance window in the shoot cluster specification (<code>.spec.maintenance.timeWindow</code>) or the start time of the maintenance window using the Gardener dashboard (<strong>CLUSTERS</strong> > <strong>[YOUR-CLUSTER]</strong> > <strong>OVERVIEW</strong> > <strong>Lifecycle</strong> > <strong>Maintenance</strong>).</p><h3 id=auto-update-and-forceful-updates>Auto-Update and Forceful Updates</h3><p>To trigger updates during the maintenance window automatically, Gardener offers the following methods:</p><ul><li><p><em>Auto-update</em>:<br>Gardener starts an update during the next maintenance window whenever there’s a version available in the <code>CloudProfile</code> that is higher than the one of your shoot cluster specification, and that isn’t classified as <code>preview</code> version. For Kubernetes versions, auto-update only updates to higher patch levels.</p><p>You can either activate auto-update on the Gardener dashboard (<strong>CLUSTERS</strong> > <strong>[YOUR-CLUSTER]</strong> > <strong>OVERVIEW</strong> > <strong>Lifecycle</strong> > <strong>Maintenance</strong>) or in the shoot cluster specification:</p><ul><li><code>.spec.maintenance.autoUpdate.kubernetesVersion: true</code></li><li><code>.spec.maintenance.autoUpdate.machineImageVersion: true</code></li></ul></li><li><p><em>Forceful updates</em>:<br>In the maintenance window, Gardener compares the current version given in the shoot cluster specification with the version list in the <code>CloudProfile</code>. If the version has an expiration date and if the date is before the start of the maintenance window, Gardener starts an update to the highest version available in the <code>CloudProfile</code> that isn’t classified as <code>preview</code> version. The highest version in <code>CloudProfile</code> can’t have an expiration date. For Kubernetes versions, Gardener only updates to higher patch levels or consecutive minor versions.</p></li></ul><p>If you don’t want to wait for the next maintenance window, you can annotate the shoot cluster specification with <code>shoot.gardener.cloud/operation: maintain</code>. Gardener then checks immediately if there’s an auto-update or a forceful update needed.</p><div class="notices info"><p>Forceful version updates are even executed if the auto-update for the Kubernetes version, or the auto-update for the machine image version is deactivated (set to `false`).</p></div><p>With expiration dates, administrators can give shoot cluster owners more time for testing before the actual version update happens, which allows smoother transitions to new versions.</p><h3 id=kubernetes-update-paths>Kubernetes Update Paths</h3><p>The bigger the delta of the Kubernetes source version and the Kubernetes target version, the better it must be planned and executed by operators. Gardener only provides automatic support for updates that can be applied safely to the cluster workload:</p><table><thead><tr><th style=text-align:left>Update Type</th><th style=text-align:left>Example</th><th style=text-align:left>Update method</th></tr></thead><tbody><tr><td style=text-align:left>Patches</td><td style=text-align:left><code>1.10.12</code> to <code>1.10.13</code></td><td style=text-align:left>auto-update or Forceful update</td></tr><tr><td style=text-align:left>Update to consecutive minor version</td><td style=text-align:left><code>1.10.12</code> to <code>1.11.10</code></td><td style=text-align:left>Forceful update</td></tr><tr><td style=text-align:left>Other</td><td style=text-align:left><code>1.10.12</code> to <code>1.12.0</code></td><td style=text-align:left>manual update</td></tr></tbody></table><p>Gardener doesn’t support automatic updates of nonconsecutive minor versions, because Kubernetes doesn’t guarantee updateability in this case. However, multiple minor version updates are possible if not only the minor source version is expired, but also the minor target version is expired. Gardener then updates the Kubernetes version first to the expired target version, and waits for the next maintenance window to update this version to the next minor target version.</p><div class="notices warning"><p>The administrator who maintains the `CloudProfile` has to ensure that the list of Kubernetes versions consists of consecutive minor versions, for example, from `1.10.x` to `1.11.y`. If the minor version increases in bigger steps, for example, from `1.10.x` to `1.12.y`, shoot cluster updates fail during the maintenance window.</p></div><h2 id=manual-updates>Manual Updates</h2><p>To update the Kubernetes version or the node operating system manually, change the <code>.spec.kubernetes.version</code> field or the <code>.spec.provider.workers.machine.image.version</code> field correspondingly.</p><p>Manual updates are required if you would like to do a minor update of the Kubernetes version. Gardener doesn’t do such updates automatically as they can have breaking changes that could impact the cluster workload.</p><p>Manual updates are either executed immediately (default) or can be confined to the maintenance time window.<br>Choosing the latter option, causes changes to the cluster (for example, node pool rolling-updates) and the subsequent reconciliation, to only predictably happen during a defined time window (available since <a href=https://github.com/gardener/gardener/releases/tag/v1.4.0>Gardener version 1.4</a>).</p><p>More information: <a href=https://github.com/gardener/gardener/blob/master/docs/usage/shoot_maintenance.md#confine-specification-changesupdates-roll-out>Confine Specification Changes/Update Roll Out</a>.</p><div class="notices warning"><p>Before applying such update on minor or major releases, operators should check for all the breaking changes introduced in the target Kubernetes release changelog.</p></div><h2 id=examples>Examples</h2><p>In the examples for the <code>CloudProfile</code> and the shoot cluster specification, only the fields relevant for the example are shown.</p><h3 id=auto-update-of-kubernetes-version>Auto-Update of Kubernetes Version</h3><p>Let&rsquo;s assume Kubernetes version <code>1.10.5</code> and <code>1.11.0</code> were added in the following <code>CloudProfile</code>:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>kubernetes</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>versions</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.11.0</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.5</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.0</span><span class=w>
</span></code></pre></div><p>Before this change, the shoot cluster specification looked like this:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>kubernetes</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.0</span><span class=w>
</span><span class=w>  </span><span class=nt>maintenance</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>timeWindow</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>begin</span><span class=p>:</span><span class=w> </span><span class=m>220000+0000</span><span class=w>
</span><span class=w>      </span><span class=nt>end</span><span class=p>:</span><span class=w> </span><span class=m>230000+0000</span><span class=w>
</span><span class=w>    </span><span class=nt>autoUpdate</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>kubernetesVersion</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></code></pre></div><p>As a consequence, the shoot cluster is updated to Kubernetes version <code>1.10.5</code> between 22:00-23:00 UTC. Your shoot cluster isn&rsquo;t updated automatically to <code>1.11.0</code> even though it&rsquo;s the highest Kubernetes version in the <code>CloudProfile</code>, because Gardener does only do automatic updates of the Kubernetes patch level.</p><h3 id=forceful-update-due-to-expired-kubernetes-version>Forceful Update Due to Expired Kubernetes Version</h3><p>Let&rsquo;s assume the following <code>CloudProfile</code>:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>kubernetes</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>versions</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.12.8</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.11.10</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.13</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.12</span><span class=w>
</span><span class=w>      </span><span class=nt>expirationDate</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2019-04-13T08:00:00Z&#34;</span><span class=w>
</span></code></pre></div><p>Let&rsquo;s assume the shoot cluster has the following specification:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>kubernetes</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.12</span><span class=w>
</span><span class=w>  </span><span class=nt>maintenance</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>timeWindow</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>begin</span><span class=p>:</span><span class=w> </span><span class=m>220000+0100</span><span class=w>
</span><span class=w>      </span><span class=nt>end</span><span class=p>:</span><span class=w> </span><span class=m>230000+0100</span><span class=w>
</span><span class=w>    </span><span class=nt>autoUpdate</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>kubernetesVersion</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></code></pre></div><p>The shoot cluster specification refers a Kubernetes version that has an <code>expirationDate</code>. In the maintenance window on <code>2019-04-12</code>, the Kubernetes version stays the same as it’s still not expired. But in the maintenance window on <code>2019-04-14</code> the Kubernetes version of the shoot cluster is updated to <code>1.10.13</code> (independently of the value of <code>.spec.maintenance.autoUpdate.kubernetesVersion</code>).</p><h3 id=forceful-update-to-new-minor-kubernetes-version>Forceful Update to New Minor Kubernetes Version</h3><p>Let&rsquo;s assume the following <code>CloudProfile</code>:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>kubernetes</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>versions</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.12.8</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.11.10</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.11.09</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.12</span><span class=w>
</span><span class=w>      </span><span class=nt>expirationDate</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2019-04-13T08:00:00Z&#34;</span><span class=w>
</span></code></pre></div><p>Let&rsquo;s assume the shoot cluster has the following specification:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>kubernetes</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.12</span><span class=w>
</span><span class=w>  </span><span class=nt>maintenance</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>timeWindow</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>begin</span><span class=p>:</span><span class=w> </span><span class=m>220000+0100</span><span class=w>
</span><span class=w>      </span><span class=nt>end</span><span class=p>:</span><span class=w> </span><span class=m>230000+0100</span><span class=w>
</span><span class=w>    </span><span class=nt>autoUpdate</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>kubernetesVersion</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></code></pre></div><p>The shoot cluster specification refers a Kubernetes version that has an <code>expirationDate</code>. In the maintenance window on <code>2019-04-14</code>, the Kubernetes version of the shoot cluster is updated to <code>1.11.10</code>, which is the highest patch version of minor target version <code>1.11</code> that follows source version <code>1.10</code>.</p><h3 id=automatic-update-from-expired-machine-image-version>Automatic Update from Expired Machine Image Version</h3><p>Let&rsquo;s assume the following <code>CloudProfile</code>:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>machineImages</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coreos</span><span class=w>
</span><span class=w>    </span><span class=nt>versions</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>2191.5.0</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>2191.4.1</span><span class=w>
</span><span class=w>    </span>- <span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>2135.6.0</span><span class=w>
</span><span class=w>      </span><span class=nt>expirationDate</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2019-04-13T08:00:00Z&#34;</span><span class=w>
</span></code></pre></div><p>Let&rsquo;s assume the shoot cluster has the following specification:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>provider</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>aws</span><span class=w>
</span><span class=w>    </span><span class=nt>workers</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>name</span><span class=w>
</span><span class=w>      </span><span class=nt>maximum</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span><span class=w>      </span><span class=nt>minimum</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span><span class=w>      </span><span class=nt>maxSurge</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span><span class=w>      </span><span class=nt>maxUnavailable</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coreos</span><span class=w>
</span><span class=w>        </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>2135.6.0</span><span class=w>
</span><span class=w>        </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>m5.large</span><span class=w>
</span><span class=w>      </span><span class=nt>volume</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>gp2</span><span class=w>
</span><span class=w>        </span><span class=nt>size</span><span class=p>:</span><span class=w> </span><span class=l>20Gi</span><span class=w>
</span><span class=w>  </span><span class=nt>maintenance</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>timeWindow</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>begin</span><span class=p>:</span><span class=w> </span><span class=m>220000+0100</span><span class=w>
</span><span class=w>      </span><span class=nt>end</span><span class=p>:</span><span class=w> </span><span class=m>230000+0100</span><span class=w>
</span><span class=w>    </span><span class=nt>autoUpdate</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>machineImageVersion</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></code></pre></div><p>The shoot cluster specification refers a machine image version that has an <code>expirationDate</code>. In the maintenance window on <code>2019-04-12</code>, the machine image version stays the same as it’s still not expired. But in the maintenance window on <code>2019-04-14</code> the machine image version of the shoot cluster is updated to <code>2191.5.0</code> (independently of the value of <code>.spec.maintenance.autoUpdate.machineImageVersion</code>) as version <code>2135.6.0</code> is expired.</p></div></div></div><div class=howto_tickets><a href=https://github.com/gardener/documentation/issues/new/choose target=_blank><span>Let us know how can we improve.</span>
<span>Open<img src=https://gardener.cloud/images/branding/github-mark-logo-green.svg title=GitHub>issue <i class="fa fa-external-link" aria-hidden=true></i></span></a></div></section></div><style></style><footer class=footer><div class="container footer-wrapper"><ul class=nav><li><a href=/blog/>Blogs</a></li><li><a href=/community/>Community</a></li><li><a href=/adopter/>Adopters</a></li><li><a href=/documentation/home>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2019-2021 Gardener project authors. <a href=https://www.sap.com/corporate/en/legal/privacy.html>Privacy policy
<i class="fa fa-external-link" aria-hidden=true></i></a></span></div></footer><script src=/js/jquery.sticky.js?1615914469></script><script src=/js/modernizr.custom.min.js?1615914469></script><script src=/js/code-snippets.js?1615914469></script><script>$(document).ready(function(){inlineSVG.init();$("[data-publishdate]").each(function(){$(this).text(moment($(this,"YYYY-MM-DD","YYYY-MM-DD hh:mm:ss").attr("data-publishdate")).fromNow());});new ClipboardJS('.clipboard-copy');$("body").codeSnippets();});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2FGNSX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>