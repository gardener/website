<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta name=copyright content="Copyright 2019-2021 Gardener project authors."><meta name=google-site-verification content="9EoGiMwk2aq0E_tVh16iJgJbp7fbyqkfWH9b5sGybl0"><title>Setting up a Seed Cluster :: Gardener</title><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W2FGNSX');</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-165447164-1');</script><link href=/css/font-awesome.min.css?1619630914 rel=stylesheet><link href=/css/skeleton.css?1619630914 rel=stylesheet><link rel=preload href=/fonts/sap-icofonts/sap-icofonts.woff as=font type=font/woff crossorigin=anonymous><link rel=preload href=/fonts/sapcom-icons/sapcom-icons.woff as=font type=font/woff crossorigin=anonymous><link rel=stylesheet href=/css/sapcom-icons.css><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=/css/gardener.b459b7f22c26be8e2f608a181d5372c6e44f06cf007c350346ccf5fadbe04a74.css><script src=/js/moment.js?1619630914></script><script src=/js/inlineSVG.js?1619630914></script><script src=/js/jquery.min.js?1619630914></script><script src=/jquery-ui-1.12.1/jquery-ui.min.js?1619630914></script><script src=/js/fixed.js?1619630914></script><script src=/js/clipboard.min.js?1619630914></script><script src=https://platform.linkedin.com/in.js type=text/javascript>lang:en_US</script></head><body data-url=/documentation/guides/install_gardener/setup-seed/ class=has-sticky-navigation><script>$(document).ready(function(){function initStickyNav(){var stickyPoint;var tln=document.querySelector(".tln");if(!tln){return;}
var stickyPointEl=document.querySelector(".sticky-nav-point");if(stickyPointEl==null){stickyPointEl=document.querySelector("body");stickyPoint=0;}else{stickyPoint=stickyPointEl.clientHeight+stickyPointEl.offsetTop;}
var bodySelector=document.getElementsByTagName("body")[0];var tlnHeight=tln.clientHeight;var stickyNavigation=function(){if(window.pageYOffset+tlnHeight>=stickyPoint){bodySelector.classList.add("has-sticky-navigation");tln.classList.add("sticky-top");}else{bodySelector.classList.remove("has-sticky-navigation");tln.classList.remove("sticky-top");}}
window.onscroll=function(){stickyNavigation();};}
initStickyNav();function closeAllSelect(){document.getElementById("docOptions").classList.remove("show");}
function show(e){e.stopPropagation();document.getElementById("docOptions").classList.add("show");}
document.addEventListener("click",closeAllSelect);document.getElementById("docSelector").addEventListener("click",show);});</script><div class="tln fixedsticky sticky-top"><header class=navigation><div class=container><div class=navigation-wrapper><a href=/ class=logo><img src=/images/gardener-logo.svg>
<span class=title>Gardener</span></a>
<a class="nav-button navbar-toggler" href=#><i class="fa fa-bars"></i></a><div class=navbar-collapse><ul class=links><li class=link><a href=/blog/>Blogs</a></li><li class=link><a href=/community/>Community</a></li><li class=link><a href=/adopter/>Adopters</a></li><li class="link has-child active"><a id=docSelector>Documentation v1.17.1</a><div id=docOptions class=doc-options><ul><li><a href=/documentation/home class=activeVersion>Documentation
v1.17.1</a></li><li><a href=/v1.16.3/guides/install_gardener/setup-seed/>Documentation
v1.16.3</a></li><li><a href=/v1.15.5/guides/install_gardener/setup-seed/>Documentation
v1.15.5</a></li></ul></div></li></ul></div></div></div></header></div><script>$(".navigation .navbar-toggler").click(function(evt){$(".navigation .navbar-collapse").toggle();$(".navigation").toggleClass("collapsed");$(".navigation .search-box").toggle();})</script><style>#docSelector{cursor:pointer}.doc-options{position:fixed;background-color:#0b8062;text-align:left;display:none}.doc-options ul li{margin-bottom:0}.doc-options ul li a:hover{background-color:#0c694f}.doc-options ul{list-style:none;padding:0;margin:0;text-align:left}.doc-options ul li a{padding:10px;margin:0}.doc-options .activeVersion{background-color:#ec682a}.show{display:block}</style><div class=sln><div class=overlay-band><ul class="nav-list container"><li title=Home><a class=navbar-link href=/documentation/home/>Home</a></li><li title=Concepts><a class=navbar-link href=/documentation/concepts/>Concepts</a></li><li title="How-To Guides"><a class="navbar-link is-active" href=/documentation/guides/>How-To Guides</a></li><li title=Tutorials><a class=navbar-link href=/documentation/tutorials/>Tutorials</a></li><li title="API Reference"><a class=navbar-link href=/documentation/references/>API Reference</a></li><li title=Contribute><a class=navbar-link href=/documentation/contribute/>Contribute</a></li></ul></div></div><div class="main container"><nav id=sidebar class="collapsed container menu"><div class=highlightable><ul class=topics><li data-nav-id=/documentation/guides/ title="How-To Guides" class="dd-item parent root collapsible" data-depth=0><a href=/documentation/guides/><span class=menu-item-text>How-To Guides</span></a><ul><li data-nav-id=/documentation/guides/client_tools/ title="Set Up Client Tools" class="dd-item top-level collapsible collapsed" data-depth=1><a href=/documentation/guides/client_tools/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Set Up Client Tools</span></a><ul><li data-nav-id=/documentation/guides/client_tools/kubectl-apiserver/ title="Automated deployment" class=dd-item data-depth=2><a href=/documentation/guides/client_tools/kubectl-apiserver/><span class=toggle></span><span class=menu-item-text>Automated deployment</span></a></li><li data-nav-id=/documentation/guides/client_tools/bash_kubeconfig/ title="Kubeconfig context as bash prompt" class=dd-item data-depth=2><a href=/documentation/guides/client_tools/bash_kubeconfig/><span class=toggle></span><span class=menu-item-text>Kubeconfig context as bash prompt</span></a></li><li data-nav-id=/documentation/guides/client_tools/working-with-kubeconfig/ title="Organizing Access Using kubeconfig Files" class=dd-item data-depth=2><a href=/documentation/guides/client_tools/working-with-kubeconfig/><span class=toggle></span><span class=menu-item-text>Organizing Access Using kubeconfig Files</span></a></li><li data-nav-id=/documentation/guides/client_tools/helm/ title="Use a Helm chart to deploy some application or service" class=dd-item data-depth=2><a href=/documentation/guides/client_tools/helm/><span class=toggle></span><span class=menu-item-text>Use a Helm chart to deploy some application or service</span></a></li></ul></li><li data-nav-id=/documentation/guides/install_gardener/ title="Install Gardener" class="dd-item parent top-level collapsible" data-depth=1><a href=/documentation/guides/install_gardener/><span class="toggle fa fa-angle-down"></span><span class=menu-item-text>Install Gardener</span></a><ul><li data-nav-id=/documentation/guides/install_gardener/setup/ title="Gardener DNS Management for Shoots" class=dd-item data-depth=2><a href=/documentation/guides/install_gardener/setup/><span class=toggle></span><span class=menu-item-text></span>Gardener DNS Management for Shoots</span></a></a></li><li data-nav-id=/documentation/guides/install_gardener/secure-setup/ title="Hardening the Gardener Community Setup" class=dd-item data-depth=2><a href=/documentation/guides/install_gardener/secure-setup/><span class=toggle></span><span class=menu-item-text>Hardening the Gardener Community Setup</span></a></li><li data-nav-id=/documentation/guides/install_gardener/landscape-setup/ title="Landscape Setup" class=dd-item data-depth=2><a href=/documentation/guides/install_gardener/landscape-setup/><span class=toggle></span><span class=menu-item-text>Landscape Setup</span></a></li><li data-nav-id=/documentation/guides/install_gardener/add-node-to-cluster/ title="Manually adding a node to an existing cluster" class=dd-item data-depth=2><a href=/documentation/guides/install_gardener/add-node-to-cluster/><span class=toggle></span><span class=menu-item-text>Manually adding a node to an existing cluster</span></a></li><li data-nav-id=/documentation/guides/install_gardener/setup-seed/ title="Setting up a Seed Cluster" class="dd-item parent active" data-depth=2><a href=/documentation/guides/install_gardener/setup-seed/><span class=toggle></span><span class=menu-item-text>Setting up a Seed Cluster</span></a></li></ul></li><li data-nav-id=/documentation/guides/administer_shoots/ title="Administer Client (Shoot) Clusters" class="dd-item top-level collapsible collapsed" data-depth=1><a href=/documentation/guides/administer_shoots/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Administer Client (Shoot) Clusters</span></a><ul><li data-nav-id=/documentation/guides/administer_shoots/hibernate-cluster/ title="Hibernate a Cluster" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/hibernate-cluster/><span class=toggle></span><span class=menu-item-text>Hibernate a Cluster</span></a></li><li data-nav-id=/documentation/guides/administer_shoots/create-delete-shoot/ title="Create / Delete a Shoot cluster" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/create-delete-shoot/><span class=toggle></span><span class=menu-item-text>Create / Delete a Shoot cluster</span></a></li><li data-nav-id=/documentation/guides/administer_shoots/gardener_aws/ title="Create a kubernetes cluster in AWS with Gardener" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/gardener_aws/><span class=toggle></span><span class=menu-item-text>Create a kubernetes cluster in AWS with Gardener</span></a></li><li data-nav-id=/documentation/guides/administer_shoots/gardener_gcp/ title="Create a kubernetes cluster on GCP with Gardener" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/gardener_gcp/><span class=toggle></span><span class=menu-item-text>Create a kubernetes cluster on GCP with Gardener</span></a></li><li data-nav-id=/documentation/guides/administer_shoots/create-shoot-into-existing-aws-vpc/ title="Create a Shoot cluster into existing AWS VPC" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/create-shoot-into-existing-aws-vpc/><span class=toggle></span><span class=menu-item-text>Create a Shoot cluster into existing AWS VPC</span></a></li><li data-nav-id=/documentation/guides/administer_shoots/gardener-alibaba/ title="Create Shoot Clusters in Alibaba Cloud" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/gardener-alibaba/><span class=toggle></span><span class=menu-item-text>Create Shoot Clusters in Alibaba Cloud</span></a></li><li data-nav-id=/documentation/guides/administer_shoots/gardener_azure/ title=Index class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/gardener_azure/><span class=toggle></span><span class=menu-item-text></span>Index</span></a></a></li><li data-nav-id=/documentation/guides/administer_shoots/dns_providers/ title="Manage DNS Providers" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/dns_providers/><span class=toggle></span><span class=menu-item-text></span>Manage DNS Providers</span></a></a></li><li data-nav-id=/documentation/guides/administer_shoots/dns_names/ title="Request DNS Names" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/dns_names/><span class=toggle></span><span class=menu-item-text></span>Request DNS Names</span></a></a></li><li data-nav-id=/documentation/guides/administer_shoots/request_cert/ title="Request X.509 Certificates" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/request_cert/><span class=toggle></span><span class=menu-item-text></span>Request X.509 Certificates</span></a></a></li><li data-nav-id=/documentation/guides/administer_shoots/maintain-shoot/ title="Shoot Cluster Maintenance" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/maintain-shoot/><span class=toggle></span><span class=menu-item-text>Shoot Cluster Maintenance</span></a></li><li data-nav-id=/documentation/guides/administer_shoots/trigger-shoot-operations/ title="Trigger Shoot operations" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/trigger-shoot-operations/><span class=toggle></span><span class=menu-item-text></span>Trigger Shoot operations</span></a></a></li><li data-nav-id=/documentation/guides/administer_shoots/trigger-shoot-operations/ title="Trigger Shoot operations" class=dd-item data-depth=2><a href=/documentation/guides/administer_shoots/trigger-shoot-operations/><span class=toggle></span><span class=menu-item-text>Trigger Shoot operations</span></a></li></ul></li><li data-nav-id=/documentation/guides/monitoring_and_troubleshooting/ title="Monitor and Troubleshoot" class="dd-item top-level collapsible collapsed" data-depth=1><a href=/documentation/guides/monitoring_and_troubleshooting/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Monitor and Troubleshoot</span></a><ul><li data-nav-id=/documentation/guides/monitoring_and_troubleshooting/shell-to-node/ title="Get a Shell to a Gardener Shoot Worker Node" class=dd-item data-depth=2><a href=/documentation/guides/monitoring_and_troubleshooting/shell-to-node/><span class=toggle></span><span class=menu-item-text>Get a Shell to a Gardener Shoot Worker Node</span></a></li><li data-nav-id=/documentation/guides/monitoring_and_troubleshooting/debug-a-pod/ title="How to debug a pod" class=dd-item data-depth=2><a href=/documentation/guides/monitoring_and_troubleshooting/debug-a-pod/><span class=toggle></span><span class=menu-item-text>How to debug a pod</span></a></li><li data-nav-id=/documentation/guides/monitoring_and_troubleshooting/tail-logfile/ title="tail -f /var/log/my-application.log" class=dd-item data-depth=2><a href=/documentation/guides/monitoring_and_troubleshooting/tail-logfile/><span class=toggle></span><span class=menu-item-text>tail -f /var/log/my-application.log</span></a></li></ul></li><li data-nav-id=/documentation/guides/applications/ title=Applications class="dd-item top-level collapsible collapsed" data-depth=1><a href=/documentation/guides/applications/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Applications</span></a><ul><li data-nav-id=/documentation/guides/applications/access_pod_from_local/ title="Access a port of a pod locally" class=dd-item data-depth=2><a href=/documentation/guides/applications/access_pod_from_local/><span class=toggle></span><span class=menu-item-text>Access a port of a pod locally</span></a></li><li data-nav-id=/documentation/guides/applications/service-access/ title="Access service from outside Kubernetes cluster" class=dd-item data-depth=2><a href=/documentation/guides/applications/service-access/><span class=toggle></span><span class=menu-item-text>Access service from outside Kubernetes cluster</span></a></li><li data-nav-id=/documentation/guides/applications/insecure-configuration/ title="Auditing Kubernetes for Secure Setup" class=dd-item data-depth=2><a href=/documentation/guides/applications/insecure-configuration/><span class=toggle></span><span class=menu-item-text>Auditing Kubernetes for Secure Setup</span></a></li><li data-nav-id=/documentation/guides/applications/missing-registry-permission/ title="Container image not pulled" class=dd-item data-depth=2><a href=/documentation/guides/applications/missing-registry-permission/><span class=toggle></span><span class=menu-item-text>Container image not pulled</span></a></li><li data-nav-id=/documentation/guides/applications/image-pull-policy/ title="Container image not updating" class=dd-item data-depth=2><a href=/documentation/guides/applications/image-pull-policy/><span class=toggle></span><span class=menu-item-text>Container image not updating</span></a></li><li data-nav-id=/documentation/guides/applications/secure-seccomp/ title="Custom Seccomp profile" class=dd-item data-depth=2><a href=/documentation/guides/applications/secure-seccomp/><span class=toggle></span><span class=menu-item-text>Custom Seccomp profile</span></a></li><li data-nav-id=/documentation/guides/applications/dockerfile_pitfall/ title="Dockerfile pitfalls" class=dd-item data-depth=2><a href=/documentation/guides/applications/dockerfile_pitfall/><span class=toggle></span><span class=menu-item-text>Dockerfile pitfalls</span></a></li><li data-nav-id=/documentation/guides/applications/https/ title="HTTPS with self Signed Certificate" class=dd-item data-depth=2><a href=/documentation/guides/applications/https/><span class=toggle></span><span class=menu-item-text></span>HTTPS with self Signed Certificate</span></a></a></li><li data-nav-id=/documentation/guides/applications/https/ title="HTTPS with self Signed Certificate" class=dd-item data-depth=2><a href=/documentation/guides/applications/https/><span class=toggle></span><span class=menu-item-text>HTTPS with self Signed Certificate</span></a></li><li data-nav-id=/documentation/guides/applications/content_trust/ title="Integrity and Immutability" class=dd-item data-depth=2><a href=/documentation/guides/applications/content_trust/><span class=toggle></span><span class=menu-item-text>Integrity and Immutability</span></a></li><li data-nav-id=/documentation/guides/applications/antipattern/ title="Kubernetes Antipatterns" class=dd-item data-depth=2><a href=/documentation/guides/applications/antipattern/><span class=toggle></span><span class=menu-item-text>Kubernetes Antipatterns</span></a></li><li data-nav-id=/documentation/guides/applications/network-isolation/ title="Namespace Isolation" class=dd-item data-depth=2><a href=/documentation/guides/applications/network-isolation/><span class=toggle></span><span class=menu-item-text>Namespace Isolation</span></a></li><li data-nav-id=/documentation/guides/applications/container-startup/ title="Orchestration of container startup" class=dd-item data-depth=2><a href=/documentation/guides/applications/container-startup/><span class=toggle></span><span class=menu-item-text>Orchestration of container startup</span></a></li><li data-nav-id=/documentation/guides/applications/service-cache-control/ title="Out-Dated HTML and JS files delivered" class=dd-item data-depth=2><a href=/documentation/guides/applications/service-cache-control/><span class=toggle></span><span class=menu-item-text>Out-Dated HTML and JS files delivered</span></a></li><li data-nav-id=/documentation/guides/applications/commit_secret_fail/ title="Storing secrets in git 💀" class=dd-item data-depth=2><a href=/documentation/guides/applications/commit_secret_fail/><span class=toggle></span><span class=menu-item-text>Storing secrets in git 💀</span></a></li><li data-nav-id=/documentation/guides/applications/prometheus/ title="Using Prometheus and Grafana to monitor K8s" class=dd-item data-depth=2><a href=/documentation/guides/applications/prometheus/><span class=toggle></span><span class=menu-item-text>Using Prometheus and Grafana to monitor K8s</span></a></li></ul></li><li data-nav-id=/documentation/guides/gardener-cookies/ title="Gardener Cookies" class="dd-item top-level" data-depth=1><a href=/documentation/guides/gardener-cookies/><span class=toggle></span><span class=menu-item-text>Gardener Cookies</span></a></li><li data-nav-id=/documentation/guides/landscape-setup/ title="Landscape Setup" class="dd-item top-level" data-depth=1><a href=/documentation/guides/landscape-setup/><span class=toggle></span><span class=menu-item-text></span>Landscape Setup</span></a></a></li></ul></li></ul></div></nav><a href=# class=menu-toggler><i class="fa fa-angle-double-left"></i></a><script>$(document).ready(function(){$("#sidebar .dd-item:not(.top-level):not(.parent)").hide();$("#sidebar .dd-item.parent").siblings(".dd-item").show();$('.dd-item',"#sidebar .dd-item.parent").show();$(".menu-toggler").click(function(evt){$("#sidebar").toggleClass("collapsed");$(".menu-toggler span").toggleClass("fa-angle-double-left");$(".menu-toggler span").toggleClass("fa-angle-double-right");});})</script><section><div class="highlightable body-inner-wrapper"><div id=body-inner><div class="docs page"><div class=git-wr><div class=origin-tools><div class=page-edit><span class=last-update>Last update:
<span data-publishdate="2020-06-17 19:34:37"></span></span><div id=top-github-link><a class=github-link title="Edit page" href=https://github.com/gardener/documentation/edit/master/website/documentation/guides/install_gardener/setup-seed/_index.md target=blank><i class="fa fa-edit"></i><span id=top-github-link-text title="Edit page"></span></a></div></div></div></div><h1>Setting up a Seed Cluster</h1><div class=properties><div class=expertise-level><span class=label title="Expertse level">Expertise</span><svg class="icon level" aria-hidden="true" focusable="false" title="advanced"><use xlink:href="/images/icons/icons.svg#level-3"/></svg></div></div><h1 id=the-seed-cluster>The Seed Cluster</h1><p>The <a href=https://github.com/gardener/landscape-setup-template>landscape-setup-template</a> is meant to provide an as-simple-as-possible Gardener installation. Therefore it just registers the cluster where the Gardener is deployed on as a seed cluster. While this is easy, it might be insecure. Clusters created with Kubify don&rsquo;t have network policies, for example. See <a href=https://github.com/gardener/documentation/website/documentation/guides/install_gardener/secure-setup/_index.md>Hardening the Gardener Community Setup</a> for more information.</p><p>To have network policies on the seed cluster and avoid having the seed on the same cluster as the Gardener, the easiest option is probably to simply create a shoot and then register that shoot as seed. This way you can also leverage other advantages of shooted clusters for your seed, e.g. autoscaling.</p><h2 id=setting-up-the-shoot>Setting up the Shoot</h2><p>The first step is to create a shoot cluster. Unfortunately, the Gardener dashboard currently does not allow to change the CIDRs for the created shoot clusters, and your shoots won&rsquo;t work if they have overlapping CIDR ranges with their corresponding seed cluster. So either your seed cluster is deployed with different CIDRs - not using the dashboard, but <code>kubectl apply</code> and a yaml file - or all of your shoots on that seed need to be created this way. In order to be able to use the dashboard for the shoots, it makes sense to create the seed with different CIDRs.</p><p>So, create yourself a shoot with modified CIDRs. You can find templates for the shoot manifest <a href=https://github.com/gardener/gardener/tree/master/example>here</a>. You could, for example, change the CIDRs to this:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=w>      </span><span class=l>...</span><span class=w>
</span><span class=w>      </span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>internal</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=m>10.254.112.0</span><span class=l>/22</span><span class=w>
</span><span class=w>        </span><span class=nt>nodes</span><span class=p>:</span><span class=w> </span><span class=m>10.254.0.0</span><span class=l>/19</span><span class=w>
</span><span class=w>        </span><span class=nt>pods</span><span class=p>:</span><span class=w> </span><span class=m>10.255.0.0</span><span class=l>/17</span><span class=w>
</span><span class=w>        </span><span class=nt>public</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=m>10.254.96.0</span><span class=l>/22</span><span class=w>
</span><span class=w>        </span><span class=nt>services</span><span class=p>:</span><span class=w> </span><span class=m>10.255.128.0</span><span class=l>/17</span><span class=w>
</span><span class=w>        </span><span class=nt>vpc</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=nt>cidr</span><span class=p>:</span><span class=w> </span><span class=m>10.254.0.0</span><span class=l>/16</span><span class=w>
</span><span class=w>        </span><span class=nt>workers</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=m>10.254.0.0</span><span class=l>/19</span><span class=w>
</span><span class=w>      </span><span class=l>...</span><span class=w>
</span></code></pre></div><p>Also make sure that your new seed cluster has enough resources for the expected number of shoots.</p><h2 id=registering-the-shoot-as-seed>Registering the Shoot as Seed</h2><p>The seed itself is a Kubernetes resource that can be deployed via a yaml file, but it has some dependencies. You can find templated versions of these files in the <a href=https://github.com/gardener/landscape-setup/tree/0.5.0/components/seed-config>seed-config component</a> of the landscape-setup-template project. If you have set up your Gardener using this project, there should also be rendered versions of these files in the <code>state/seed-config/</code> directory of your landscape folder (they are probably easier to work with). Examples for all these files can also be found in the aforementioned example folder in the Gardener repo.</p><h3 id=1-seed-namespace>1. Seed Namespace</h3><p>First, you should create a namespace for your new seed and everything that belongs to it. This is not necessary, but it will keep your cluster organized. For this example, the namespace will be called <code>seed-test</code>.</p><h3 id=2-cloud-provider-secret>2. Cloud Provider Secret</h3><p>The Gardener needs to create resources on the seed and thus needs a kubeconfig for it. It is provided with the cloud provider secret (below is an example for AWS).</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Secret</span><span class=w>
</span><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test-seed-secret</span><span class=w>
</span><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>seed-test</span><span class=w>
</span><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cloudprofile.garden.sapcloud.io/name</span><span class=p>:</span><span class=w> </span><span class=l>aws </span><span class=w>
</span><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Opaque</span><span class=w>
</span><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>accessKeyID</span><span class=p>:</span><span class=w> </span><span class=l>&lt;base64-encoded AWS access key&gt;</span><span class=w>
</span><span class=w>  </span><span class=nt>secretAccessKey</span><span class=p>:</span><span class=w> </span><span class=l>&lt;base64-encoded AWS secret key&gt;</span><span class=w>
</span><span class=w>  </span><span class=nt>kubeconfig</span><span class=p>:</span><span class=w> </span><span class=l>&lt;base64-encoded kubeconfig&gt;</span><span class=w>
</span></code></pre></div><p>Deploy the secret into your seed namespace. Apart from the kubeconfig, also infrastructure credentials are required. They will only be used for the etcd backup, so in case for AWS, S3 privileges should be sufficient.</p><h3 id=3-secretbinding-for-cloud-provider-secret>3. Secretbinding for Cloud Provider Secret</h3><p>Create a secretbinding for your cloud provider secret:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>core.gardener.cloud/v1beta1</span><span class=w>
</span><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>SecretBinding</span><span class=w>
</span><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test-seed-secret</span><span class=w>
</span><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>seed-test</span><span class=w>
</span><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>cloudprofile.garden.sapcloud.io/name</span><span class=p>:</span><span class=w> </span><span class=l>aws</span><span class=w>
</span><span class=w></span><span class=nt>secretRef</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test-seed-secret</span><span class=w>
</span><span class=w></span><span class=c># namespace: only required if in different namespace than referenced secret</span><span class=w>
</span><span class=w></span><span class=nt>quotas</span><span class=p>:</span><span class=w> </span><span class=p>[]</span><span class=w>
</span></code></pre></div><p>You can give it the same name as the referenced secret.</p><h3 id=4-cloudprofile>4. Cloudprofile</h3><p>The cloudprofile contains the information which shoots can be created with this seed. You could create a new cloudprofile, but you can also just reference the existing cloudprofile if you don&rsquo;t want to change anything.</p><h3 id=5-seed>5. Seed</h3><p>Now the seed resource can be created. Choose a name, reference cloudprofile and secretbinding, fill in your ingress domain, and set the CIDRs to the same values as in the underlying shoot cluster.</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>core.gardener.cloud/v1beta1</span><span class=w>
</span><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Seed</span><span class=w>
</span><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>aws-secure</span><span class=w>
</span><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>provider</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>aws</span><span class=w>
</span><span class=w>    </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class=l>eu-west-1</span><span class=w>
</span><span class=w>  </span><span class=nt>secretRef</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test-seed-secret</span><span class=w>
</span><span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>seed-test</span><span class=w>
</span><span class=w>  </span><span class=nt>dns</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>ingressDomain</span><span class=p>:</span><span class=w> </span><span class=l>ingress.&lt;your cluster domain&gt;</span><span class=w>
</span><span class=w>  </span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>nodes</span><span class=p>:</span><span class=w> </span><span class=m>10.254.0.0</span><span class=l>/19</span><span class=w>
</span><span class=w>    </span><span class=nt>pods</span><span class=p>:</span><span class=w> </span><span class=m>10.255.0.0</span><span class=l>/17</span><span class=w>
</span><span class=w>    </span><span class=nt>services</span><span class=p>:</span><span class=w> </span><span class=m>10.255.128.0</span><span class=l>/17</span><span class=w>
</span></code></pre></div><h3 id=6-hide-original-seed>6. Hide Original Seed</h3><p>In the dashboard, it is not possible to select the seed for a shoot (it is possible when deploying the shoot using a yaml file, however). Since both seeds probably reference the same cloudprofile, the Gardener will try to distribute the shoots equally among both seeds.</p><p>To solve this problem, edit the original seed and set its <code>spec.visible</code> field to <code>false</code>. This will prevent the Gardener from choosing this seed, so now all shoots created via the dashboard should have their control plane on the new, more secure seed.</p></div></div></div><div class=howto_tickets><a href=https://github.com/gardener/documentation/issues/new/choose target=_blank><span>Let us know how can we improve.</span>
<span>Open<img src=https://gardener.cloud/images/branding/github-mark-logo-green.svg title=GitHub>issue <i class="fa fa-external-link" aria-hidden=true></i></span></a></div></section></div><style></style><footer class=footer><div class="container footer-wrapper"><ul class=nav><li><a href=/blog/>Blogs</a></li><li><a href=/community/>Community</a></li><li><a href=/adopter/>Adopters</a></li><li><a href=/documentation/home>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2019-2021 Gardener project authors. <a href=https://www.sap.com/corporate/en/legal/privacy.html>Privacy policy
<i class="fa fa-external-link" aria-hidden=true></i></a></span></div></footer><script src=/js/jquery.sticky.js?1619630914></script><script src=/js/modernizr.custom.min.js?1619630914></script><script src=/js/code-snippets.js?1619630914></script><script>$(document).ready(function(){inlineSVG.init();$("[data-publishdate]").each(function(){$(this).text(moment($(this,"YYYY-MM-DD","YYYY-MM-DD hh:mm:ss").attr("data-publishdate")).fromNow());});new ClipboardJS('.clipboard-copy');$("body").codeSnippets();});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2FGNSX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>