<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta name=copyright content="Copyright 2019 Gardener project authors."><meta name=google-site-verification content="9EoGiMwk2aq0E_tVh16iJgJbp7fbyqkfWH9b5sGybl0"><title>Gardener Scheduler :: Gardener</title><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W2FGNSX');</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-165447164-1');</script><link href=/css/nucleus.css?1613634430 rel=stylesheet><link href=/css/font-awesome.min.css?1613634430 rel=stylesheet><link href=/css/hybrid.css?1613634430 rel=stylesheet><link href=/css/featherlight.min.css?1613634430 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1613634430 rel=stylesheet><link href=/css/auto-complete.css?1613634430 rel=stylesheet><link href=/css/skeleton.css?1613634430 rel=stylesheet><link href=/css/sheetslider.css?1613634430 rel=stylesheet><link rel=stylesheet href=/css/gardener.7593938070d708e7b1bec0e9172492ff8f780d7c20e680f994075d57795a3335.css><script src=/js/moment.js?1613634430></script><script src=/js/vivus.js?1613634430></script><script src=/js/scrollreveal.js?1613634430></script><script src=/js/inlineSVG.js?1613634430></script><script src=/js/jquery.min.js?1613634430></script><script src=/js/fixed.js?1613634430></script><script src=/js/clipboard.min.js?1613634430></script><script src=https://platform.linkedin.com/in.js type=text/javascript>lang:en_US</script></head><body data-url=/v1.15.5/concepts/core-components/scheduler/ class=has-sticky-navigation><script>$(document).ready(function(){function initStickyNav(){var stickyPoint;var tln=document.querySelector(".tln");if(!tln){return;}
var stickyPointEl=document.querySelector(".sticky-nav-point");if(stickyPointEl==null){stickyPointEl=document.querySelector("body");stickyPoint=0;}else{stickyPoint=stickyPointEl.clientHeight+stickyPointEl.offsetTop;}
var bodySelector=document.getElementsByTagName("body")[0];var tlnHeight=tln.clientHeight;var stickyNavigation=function(){if(window.pageYOffset+tlnHeight>=stickyPoint){bodySelector.classList.add("has-sticky-navigation");tln.classList.add("sticky-top");}else{bodySelector.classList.remove("has-sticky-navigation");tln.classList.remove("sticky-top");}}
window.onscroll=function(){stickyNavigation();};}
initStickyNav();function closeAllSelect(){document.getElementById("docOptions").classList.remove("show");}
function show(e){e.stopPropagation();document.getElementById("docOptions").classList.add("show");}
document.addEventListener("click",closeAllSelect);document.getElementById("docSelector").addEventListener("click",show);});</script><div class="tln fixedsticky sticky-top"><header class=navigation><div class=container><div class=navigation-wrapper><a href=/ class=logo><img src=/images/logo.svg>
<span class=title>Gardener</span></a>
<a class="nav-button navbar-toggler" href=#><i class="fa fa-bars"></i></a><div class=navbar-collapse><ul class=links><li class=link><a href=/blog/>Blogs</a></li><li class=link><a href=/community/>Community</a></li><li class=link><a href=/adopter/>Adopters</a></li><li class="link has-child active"><a id=docSelector>Documentation v1.15.5</a><div id=docOptions class=doc-options><ul><li><a href=/documentation/home>Documentation
v1.17.0</a></li><li><a href=/v1.16.3/home>Documentation
v1.16.3</a></li><li><a href=/v1.15.5/home class=activeVersion>Documentation
v1.15.5</a></li></ul></div></li></ul></div></div></div></header></div><script>$(".navigation .navbar-toggler").click(function(evt){$(".navigation .navbar-collapse").toggle();$(".navigation").toggleClass("collapsed");$(".navigation .search-box").toggle();})</script><style>#docSelector{cursor:pointer}.doc-options{position:fixed;background-color:#0b8062;text-align:left;display:none}.doc-options ul li{margin-bottom:0}.doc-options ul li a:hover{background-color:#0c694f}.doc-options ul{list-style:none;padding:0;margin:0;text-align:left}.doc-options ul li a{padding:10px;margin:0}.doc-options .activeVersion{background-color:#ec682a}.show{display:block}</style><div class=sln><div class=overlay-band><ul class="nav-list container"><li title=Home><a class=navbar-link href=/v1.15.5/home/>Home</a></li><li title=Concepts><a class="navbar-link is-active" href=/v1.15.5/concepts/>Concepts</a></li><li title="How-To Guides"><a class=navbar-link href=/v1.15.5/guides/>How-To Guides</a></li><li title=Tutorials><a class=navbar-link href=/v1.15.5/tutorials/>Tutorials</a></li><li title="API Reference"><a class=navbar-link href=/v1.15.5/references/>API Reference</a></li><li title=Contribute><a class=navbar-link href=/v1.15.5/contribute/>Contribute</a></li></ul></div></div><div class="main container"><nav id=sidebar class="collapsed container menu"><div class=highlightable><ul class=topics><li data-nav-id=/v1.15.5/concepts/ title=Concepts class="dd-item parent root collapsible" data-depth=0><a href=/v1.15.5/concepts/><span class=menu-item-text>Concepts</span></a><ul><li data-nav-id=/v1.15.5/concepts/architecture/ title=Architecture class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.15.5/concepts/architecture/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Architecture</span></a><ul><li data-nav-id=/components/bouquet/ title=Bouquet class=dd-item data-depth=2><a href=/components/bouquet/><span class=toggle></span><span class=menu-item-text></span>Bouquet</span></a></a></li><li data-nav-id=/components/dashboard/ title=Dashboard class=dd-item data-depth=2><a href=/components/dashboard/><span class=toggle></span><span class=menu-item-text></span>Dashboard</span></a></a></li><li data-nav-id=/components/gardenctl/ title=gardenctl class=dd-item data-depth=2><a href=/components/gardenctl/><span class=toggle></span><span class=menu-item-text></span>gardenctl</span></a></a></li><li data-nav-id=/components/gardener/ title=Gardener class=dd-item data-depth=2><a href=/components/gardener/><span class=toggle></span><span class=menu-item-text></span>Gardener</span></a></a></li><li data-nav-id=/components/kubify/ title=kubify class=dd-item data-depth=2><a href=/components/kubify/><span class=toggle></span><span class=menu-item-text></span>kubify</span></a></a></li></ul></li><li data-nav-id=/v1.15.5/concepts/core-components/ title="Core Components" class="dd-item parent top-level collapsible" data-depth=1><a href=/documentation/concepts/core-components/api-server><span class="toggle fa fa-angle-down"></span><span class=menu-item-text>Core Components</span></a><ul><li data-nav-id=/v1.15.5/concepts/core-components/api-server/ title="Gardener API Server" class="dd-item collapsible collapsed" data-depth=2><a href=/v1.15.5/concepts/core-components/api-server/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Gardener API Server</span></a><ul><li data-nav-id=/v1.15.5/concepts/core-components/api-server/apiserver_admission_plugins/ title="In-Tree Admission Plugins" class=dd-item data-depth=3><a href=/v1.15.5/concepts/core-components/api-server/apiserver_admission_plugins/><span class=toggle></span><span class=menu-item-text></span>In-Tree Admission Plugins</span></a></a></li></ul></li><li data-nav-id=/v1.15.5/concepts/core-components/scheduler/ title="Gardener Scheduler" class="dd-item active" data-depth=2><a href=/v1.15.5/concepts/core-components/scheduler/><span class=toggle></span><span class=menu-item-text></span>Gardener Scheduler</span></a></a></li><li data-nav-id=/v1.15.5/concepts/core-components/seed-admission-controller/ title="Gardener Seed Admission Controller" class=dd-item data-depth=2><a href=/v1.15.5/concepts/core-components/seed-admission-controller/><span class=toggle></span><span class=menu-item-text></span>Gardener Seed Admission Controller</span></a></a></li><li data-nav-id=/v1.15.5/concepts/core-components/gardenlet/ title=gardenlet class=dd-item data-depth=2><a href=/v1.15.5/concepts/core-components/gardenlet/><span class=toggle></span><span class=menu-item-text></span>gardenlet</span></a></a></li></ul></li><li data-nav-id=/v1.15.5/concepts/backup-restore/backup-restore/ title="Backup and Restore" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/backup-restore/backup-restore/><span class=toggle></span><span class=menu-item-text></span>Backup and Restore</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/ title=Extensions class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.15.5/concepts/extensions/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Extensions</span></a><ul><li data-nav-id=/v1.15.5/concepts/extensions/backupbucket/ title="BackupBucket resource" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/backupbucket/><span class=toggle></span><span class=menu-item-text></span>BackupBucket resource</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/backupentry/ title="BackupEntry resource" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/backupentry/><span class=toggle></span><span class=menu-item-text></span>BackupEntry resource</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/cluster/ title="Cluster resource" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/cluster/><span class=toggle></span><span class=menu-item-text></span>Cluster resource</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/shoot-health-status-conditions/ title="Contributing to shoot health status conditions" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/shoot-health-status-conditions/><span class=toggle></span><span class=menu-item-text></span>Contributing to shoot health status conditions</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/controlplane-webhooks/ title="Controlplane customization webhooks" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/controlplane-webhooks/><span class=toggle></span><span class=menu-item-text></span>Controlplane customization webhooks</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/controlplane/ title="ControlPlane resource" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/controlplane/><span class=toggle></span><span class=menu-item-text></span>ControlPlane resource</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/controlplane-exposure/ title="ControlPlane resource with purpose exposure" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/controlplane-exposure/><span class=toggle></span><span class=menu-item-text></span>ControlPlane resource with purpose exposure</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/dns/ title="DNSProvider and DNSEntry resources" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/dns/><span class=toggle></span><span class=menu-item-text></span>DNSProvider and DNSEntry resources</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/project-roles/ title="Extending project roles" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/project-roles/><span class=toggle></span><span class=menu-item-text></span>Extending project roles</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/overview/ title="Extensibility overview" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/overview/><span class=toggle></span><span class=menu-item-text></span>Extensibility overview</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/extension/ title="Extension resource" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/extension/><span class=toggle></span><span class=menu-item-text></span>Extension resource</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/containerruntime/ title="Gardener Container Runtime Extension" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/containerruntime/><span class=toggle></span><span class=menu-item-text></span>Gardener Container Runtime Extension</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/network/ title="Gardener Network Extension" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/network/><span class=toggle></span><span class=menu-item-text></span>Gardener Network Extension</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/conventions/ title="General conventions" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/conventions/><span class=toggle></span><span class=menu-item-text></span>General conventions</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/healthcheck-library/ title="Health Check Library" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/healthcheck-library/><span class=toggle></span><span class=menu-item-text></span>Health Check Library</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/infrastructure/ title="Infrastructure resource" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/infrastructure/><span class=toggle></span><span class=menu-item-text></span>Infrastructure resource</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/logging-and-monitoring/ title="Logging and Monitoring for Extensions" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/logging-and-monitoring/><span class=toggle></span><span class=menu-item-text></span>Logging and Monitoring for Extensions</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/operatingsystemconfig/ title="OperatingSystemConfig resource" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/operatingsystemconfig/><span class=toggle></span><span class=menu-item-text></span>OperatingSystemConfig resource</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/referenced-resources/ title="Referenced Resources" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/referenced-resources/><span class=toggle></span><span class=menu-item-text></span>Referenced Resources</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/controllerregistration/ title="Registering Extension Controllers" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/controllerregistration/><span class=toggle></span><span class=menu-item-text></span>Registering Extension Controllers</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/shoot-maintenance/ title="Shoot maintenance" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/shoot-maintenance/><span class=toggle></span><span class=menu-item-text></span>Shoot maintenance</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/shoot-webhooks/ title="Shoot resource customization webhooks" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/shoot-webhooks/><span class=toggle></span><span class=menu-item-text></span>Shoot resource customization webhooks</span></a></a></li><li data-nav-id=/v1.15.5/concepts/extensions/worker/ title="Worker resource" class=dd-item data-depth=2><a href=/v1.15.5/concepts/extensions/worker/><span class=toggle></span><span class=menu-item-text></span>Worker resource</span></a></a></li></ul></li><li data-nav-id=/v1.15.5/concepts/networking/ title=Networking class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.15.5/concepts/networking/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Networking</span></a><ul><li data-nav-id=/v1.15.5/concepts/networking/dns-managment/ title="DNS Management" class=dd-item data-depth=2><a href=/v1.15.5/concepts/networking/dns-managment/><span class=toggle></span><span class=menu-item-text></span>DNS Management</span></a></a></li><li data-nav-id=/v1.15.5/concepts/networking/cert-managment/ title="Certificates Management" class=dd-item data-depth=2><a href=/v1.15.5/concepts/networking/cert-managment/><span class=toggle></span><span class=menu-item-text></span>Certificates Management</span></a></a></li><li data-nav-id=/v1.15.5/concepts/networking/network_policies/ title="Network Policies" class=dd-item data-depth=2><a href=/v1.15.5/concepts/networking/network_policies/><span class=toggle></span><span class=menu-item-text></span>Network Policies</span></a></a></li></ul></li><li data-nav-id=/v1.15.5/concepts/monitoring/ title=Monitoring class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.15.5/concepts/monitoring/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Monitoring</span></a><ul><li data-nav-id=/v1.15.5/concepts/monitoring/alerting/ title=Alerting class=dd-item data-depth=2><a href=/v1.15.5/concepts/monitoring/alerting/><span class=toggle></span><span class=menu-item-text></span>Alerting</span></a></a></li><li data-nav-id=/v1.15.5/concepts/monitoring/extending/ title="Extending the Monitoring Stack" class=dd-item data-depth=2><a href=/v1.15.5/concepts/monitoring/extending/><span class=toggle></span><span class=menu-item-text></span>Extending the Monitoring Stack</span></a></a></li><li data-nav-id=/v1.15.5/concepts/monitoring/operator_alerts/ title="Operator Alerts" class=dd-item data-depth=2><a href=/v1.15.5/concepts/monitoring/operator_alerts/><span class=toggle></span><span class=menu-item-text></span>Operator Alerts</span></a></a></li><li data-nav-id=/v1.15.5/concepts/monitoring/user_alerts/ title="User Alerts" class=dd-item data-depth=2><a href=/v1.15.5/concepts/monitoring/user_alerts/><span class=toggle></span><span class=menu-item-text></span>User Alerts</span></a></a></li></ul></li><li data-nav-id=/v1.15.5/concepts/deployment/deploy_gardenlet_automatically/ title="Automatic Deployment of Gardenlets" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/deployment/deploy_gardenlet_automatically/><span class=toggle></span><span class=menu-item-text></span>Automatic Deployment of Gardenlets</span></a></a></li><li data-nav-id=/v1.15.5/concepts/deployment/deploy_gardenlet_manually/ title="Deploy a Gardenlet Manually" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/deployment/deploy_gardenlet_manually/><span class=toggle></span><span class=menu-item-text></span>Deploy a Gardenlet Manually</span></a></a></li><li data-nav-id=/v1.15.5/concepts/deployment/deploy_gardenlet/ title="Deploying Gardenlets" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/deployment/deploy_gardenlet/><span class=toggle></span><span class=menu-item-text></span>Deploying Gardenlets</span></a></a></li><li data-nav-id=/v1.15.5/concepts/deployment/setup_gardener/ title="Deploying the Gardener into a Kubernetes cluster" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/deployment/setup_gardener/><span class=toggle></span><span class=menu-item-text></span>Deploying the Gardener into a Kubernetes cluster</span></a></a></li><li data-nav-id=/v1.15.5/concepts/deployment/aks/ title="Deploying the previous Gardener versions and a Seed into an AKS cluster" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/deployment/aks/><span class=toggle></span><span class=menu-item-text></span>Deploying the previous Gardener versions and a Seed into an AKS cluster</span></a></a></li><li data-nav-id=/v1.15.5/concepts/deployment/feature_gates/ title="Feature Gates" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/deployment/feature_gates/><span class=toggle></span><span class=menu-item-text></span>Feature Gates</span></a></a></li><li data-nav-id=/v1.15.5/concepts/deployment/image_vector/ title="Image Vector" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/deployment/image_vector/><span class=toggle></span><span class=menu-item-text></span>Image Vector</span></a></a></li><li data-nav-id=/v1.15.5/concepts/mcm/ title="Machine Controller Manager" class="dd-item top-level" data-depth=1><a href=/v1.15.5/concepts/mcm/><span class=toggle></span><span class=menu-item-text></span>Machine Controller Manager</span></a></a></li></ul></li></ul></div></nav><a href=# class=menu-toggler><i class="fa fa-angle-double-left"></i></a><script>$(document).ready(function(){$("#sidebar .dd-item:not(.top-level):not(.parent)").hide();$("#sidebar .dd-item.parent").siblings(".dd-item").show();$('.dd-item',"#sidebar .dd-item.parent").show();$(".menu-toggler").click(function(evt){$("#sidebar").toggleClass("collapsed");$(".menu-toggler span").toggleClass("fa-angle-double-left");$(".menu-toggler span").toggleClass("fa-angle-double-right");});})</script><section><div class="highlightable body-inner-wrapper"><div id=body-inner class=external><div class="docs page"><div class=git-wr><div class=page-contributors>Contributors to this page<div class=contributors-list><a href=mailto:daniel.foehr@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/33809186?v=4" title=d060239></a>
<a href=mailto:tim.usner@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/40451181?v=4" title="Tim Usner"></a>
<a href=mailto:s.rachev@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/1867702?v=4" title="Stoyan Rachev"></a>
<a href=mailto:vladimir.nachev@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/6798531?v=4" title="Vladimir Nachev"></a>
<a href=mailto:uwe.krueger@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/553075?v=4" title="Uwe Krueger"></a>
<a href=mailto:rafael.franzke@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/19169361?v=4" title="Rafael Franzke"></a></div></div><div class=page-edit><span class=last-update>Last update:</span><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/gardener/gardener/blob/master/docs/concepts/scheduler.md target=blank><i class="fa fa-edit"></i><span id=top-github-link-text title="Edit this page"></span></a></div></div></div><h1 id=gardener-scheduler>Gardener Scheduler</h1><p>The Gardener Scheduler is in essence a controller that watches newly created shoots and assigns a seed cluster to them.
Conceptually, the task of the Gardener Scheduler is very similar to the task of the Kubernetes Scheduler: finding a seed for a shoot instead of a node for a pod.</p><p>Either the scheduling strategy or the shoot cluster purpose hereby determines how the scheduler is operating.
The following sections explain the configuration and flow in greater detail.</p><h2 id=why-is-the-gardener-scheduler-needed>Why is the Gardener Scheduler needed?</h2><h3 id=1-decoupling>1. Decoupling</h3><p>Previously, an admission plugin in the Gardener API server conducted the scheduling decisions.
This implies changes to the API server whenever adjustments of the scheduling are needed.
Decoupling the API server and the scheduler comes with greater flexibility to develop these components independently from each other.</p><h3 id=2-extensibility>2. Extensibility</h3><p>It should be possible to easily extend and tweak the scheduler in the future.
Possibly, similar to the Kubernetes scheduler, hooks could be provided which influence the scheduling decisions.
It should be also possible to completely replace the standard Gardener Scheduler with a custom implementation.</p><h2 id=algorithm-overview>Algorithm overview</h2><p>The following <strong>sequence</strong> describes the steps involved to determine a seed candidate:</p><ol><li>Determine usable seeds with &ldquo;usable&rdquo; defined as follows:<ul><li>no <code>.metadata.deletionTimestamp</code></li><li><code>.spec.settings.scheduling.visible</code> is <code>true</code></li><li>conditions <code>Bootstrapped</code>, <code>GardenletReady</code> are <code>true</code></li></ul></li><li>Filter seeds:<ul><li>matching <code>.spec.seedSelector</code> in <code>CloudProfile</code> used by the <code>Shoot</code></li><li>matching <code>.spec.seedSelector</code> in <code>Shoot</code></li><li>having no network intersection with the <code>Shoot</code>&rsquo;s networks (due to the VPN connectivity between seeds and shoots their networks must be disjoint)</li><li>having <code>.spec.settings.shootDNS.enabled=false</code> (only if the shoot specifies a DNS domain or does not use the <code>unmanaged</code> DNS provider)</li><li>whose taints (<code>.spec.taints</code>) are tolerated by the <code>Shoot</code> (<code>.spec.tolerations</code>)</li><li>whose capacity for shoots would not be exceeded if the shoot is scheduled onto the seed, see <a href=#ensuring-seeds-capacity-for-shoots-is-not-exceeded>Ensuring seeds capacity for shoots is not exceeded</a></li></ul></li><li>Apply active <a href=#strategies>strategy</a> e.g., <em>Minimal Distance strategy</em></li><li>Choose least utilized seed, i.e., the one with the least number of shoot control planes, will be the winner and written to the <code>.spec.seedName</code> field of the <code>Shoot</code>.</li></ol><h2 id=configuration>Configuration</h2><p>The Gardener Scheduler configuration has to be supplied on startup. It is a mandatory and also the only available flag.
<a href=https://github.com/gardener/gardener/blob/master/example/20-componentconfig-gardener-scheduler.yaml>Here</a> is an example scheduler configuration.</p><p>Most of the configuration options are the same as in the Gardener Controller Manager (leader election, client connection, &mldr;).
However, the Gardener Scheduler on the other hand does not need a TLS configuration, because there are currently no webhooks configurable.</p><h2 id=strategies>Strategies</h2><p>The scheduling strategy is defined in the <em><strong>candidateDeterminationStrategy</strong></em> of the scheduler&rsquo;s configuration and can have the possible values <code>SameRegion</code> and <code>MinimalDistance</code>.
The <code>SameRegion</code> strategy is the default strategy.</p><ol><li><p><em>Same Region strategy</em></p><p>The Gardener Scheduler reads the <code>spec.provider.type</code> and <code>.spec.region</code> fields from the <code>Shoot</code> resource.
It tries to find a seed that has the identical <code>.spec.provider.type</code> and <code>.spec.provider.region</code> fields set.
If it cannot find a suitable seed, it adds an event to the shoot stating, that it is unschedulable.</p></li><li><p><em>Minimal Distance strategy</em></p><p>The Gardener Scheduler tries to find a valid seed with minimal distance to the shoot&rsquo;s intended region.
The distance is calculated based on the Levenshtein distance of the region. Therefore the region name
is split into a base name and an orientation. Possible orientations are <code>north</code>, <code>south</code>, <code>east</code>, <code>west</code> and <code>central</code>.
The distance then is twice the Levenshtein distance of the region&rsquo;s base name plus a correction value based on the
orientation and the provider.</p><p>If the orientations of shoot and seed candidate match, the correction value is 0, if they differ it is 2 and if
either the seed&rsquo;s or the shoot&rsquo;s region does not have an orientation it is 1.
If the provider differs the correction value is additionally incremented by 2.</p><p>Because of this a matching region with a matching provider is always prefered.</p></li></ol><p>In order to put the scheduling decision into effect, the scheduler sends an update request for the <code>Shoot</code> resource to
the API server. After validation, the Gardener Aggregated API server updates the shoot to have the <code>spec.seedName</code> field set.
Subsequently, the Gardenlet picks up and starts to create the cluster on the specified seed.</p><ol start=3><li><em>Special handling based on shoot cluster purpose</em></li></ol><p>Every shoot cluster can have a purpose that describes what the cluster is used for, and also influences how the cluster is setup (see <a href=https://github.com/gardener/gardener/blob/master/docs/usage/shoot_purposes.md>this document</a> for more information).</p><p>In case the shoot has the <code>testing</code> purpose then the scheduler only reads the <code>.spec.provider.type</code> from the <code>Shoot</code> resource and tries to find a <code>Seed</code> that has the identical <code>.spec.provider.type</code>.
The region does not matter, i.e., <code>testing</code> shoots may also be scheduled on a seed in a complete different region if it is better for balancing the whole Gardener system.</p><h2 id=seedselector-field-in-the-shoot-specification><code>seedSelector</code> field in the <code>Shoot</code> specification</h2><p>Similar to the <code>.spec.nodeSelector</code> field in <code>Pod</code>s, the <code>Shoot</code> specification has an optional <code>.spec.seedSelector</code> field.
It allows the user to provide a label selector that must match the labels of <code>Seed</code>s in order to be scheduled to one of them.
The labels on <code>Seed</code>s are usually controlled by Gardener administrators/operators - end users cannot add arbitrary labels themselves.
If provided, the Gardener Scheduler will only consider those seeds as &ldquo;suitable&rdquo; whose labels match those provided in the <code>.spec.seedSelector</code> of the <code>Shoot</code>.</p><p>By default only seeds with the same provider than the shoot are selected. By adding a <code>providerTypes</code> field to the <code>seedSelector</code>
a dedicated set of possible providers (<code>*</code> means all provider types) can be selected.</p><h2 id=ensuring-seeds-capacity-for-shoots-is-not-exceeded>Ensuring seeds capacity for shoots is not exceeded</h2><p>Seeds have a practical limit of how many shoots they can accommodate. Exceeding this limit is undesirable as the system performance will be noticeably impacted. Therefore, the scheduler ensures that a seed&rsquo;s capacity for shoots is not exceeded by taking into account a maximum number of shoots that can be scheduled onto a seed.</p><p>This mechanism works as follows:</p><ul><li>The <code>gardenlet</code> is configured with certain <em>resources</em> and their total <em>capacity</em> (and, for certain resources, the amount <em>reserved</em> for Gardener), see <a href=https://github.com/gardener/gardener/blob/master/example/20-componentconfig-gardenlet.yaml>/example/20-componentconfig-gardenlet.yaml</a>. Currently, the only such resource is the maximum number of shoots that can be scheduled onto a seed.</li><li>The <code>gardenlet</code> seed controller updates the <code>capacity</code> and <code>allocatable</code> fields in Seed status with the capacity of each resource and how much of it is actually available to be consumed by shoots. The <code>allocatable</code> value of a resource is equal to <code>capacity</code> minus <code>reserved</code>.</li><li>When scheduling shoots, the scheduler filters out all candidate seeds whose allocatable capacity for shoots would be exceeded if the shoot is scheduled onto the seed.</li></ul><h2 id=failure-to-determine-a-suitable-seed>Failure to determine a suitable seed</h2><p>In case the scheduler fails to find a suitable seed, the operation is being retried with an exponential backoff - starting with the <code>retrySyncPeriod</code> (default of <code>15s</code>).</p><h2 id=current-limitation--future-plans>Current Limitation / Future Plans</h2><ul><li>Azure has unfortunately a geographically non-hierarchical naming pattern and does not start with the continent. This is the reason why we will exchange the implementation of the <code>MinimalRegion</code> strategy with a more suitable one in the future.</li></ul></div></div></div><div class=howto_tickets><a href=https://github.com/gardener/gardener/issues/new/choose target=_blank><span>Let us know how can we improve.</span>
<span>Open <img src=https://gardener.cloud/images/branding/github-mark-logo-green.svg> GitHub Issue <i class="fa fa-external-link" aria-hidden=true></i></span></a></div></section></div><style></style><footer class=footer><div class="container footer-wrapper"><ul class=nav><li><a href=/blog/>Blogs</a></li><li><a href=/community/>Community</a></li><li><a href=/adopter/>Adopters</a></li><li><a href=/documentation/home>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2020 Gardener project authors. Privacy Statement</span></div></footer><script src=/js/perfect-scrollbar.min.js?1613634430></script><script src=/js/perfect-scrollbar.jquery.min.js?1613634430></script><script src=/js/jquery.sticky.js?1613634430></script><script src=/js/featherlight.min.js?1613634430></script><script src=/js/html5shiv-printshiv.min.js?1613634430></script><script src=/js/modernizr.custom.71422.js?1613634430></script><link href=/mermaid/mermaid.css?1613634430 type=text/css rel=stylesheet><script src=/mermaid/mermaid.js?1613634430></script><script src=/js/code-snippets.js?1613634430></script><script>mermaid.initialize({startOnLoad:true,htmlLables:true});function createIssue(issueUrl,page,url){var uri=issueUrl+"?title=Documentation issue on page \""+page+"\"";uri=uri+"&body=\n\n<- DESCRIBE MISSING OR FAULTY DOCUMENTATION HERE->\n\n---\nPage: ["+page+"]("+
url+")\ndon't remove the link to the page. It's required for the processor"
var res=encodeURI(uri);res+="&labels=area/documentation"
window.open(res,"issue")
return false;}
$(document).ready(function(){inlineSVG.init();$("[data-publishdate]").each(function(){$(this).text(moment($(this,"YYYY-MM-DD","YYYY-MM-DD hh:mm:ss").attr("data-publishdate")).fromNow());});new ClipboardJS('.clipboard-copy');$("body").codeSnippets();});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2FGNSX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>