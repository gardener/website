<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta name=copyright content="Copyright 2019 Gardener project authors."><meta name=google-site-verification content="9EoGiMwk2aq0E_tVh16iJgJbp7fbyqkfWH9b5sGybl0"><title>Deploy into a Cluster :: Gardener</title><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W2FGNSX');</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-165447164-1');</script><link href=/css/nucleus.css?1612104669 rel=stylesheet><link href=/css/font-awesome.min.css?1612104669 rel=stylesheet><link href=/css/hybrid.css?1612104669 rel=stylesheet><link href=/css/featherlight.min.css?1612104669 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1612104669 rel=stylesheet><link href=/css/auto-complete.css?1612104669 rel=stylesheet><link href=/css/skeleton.css?1612104669 rel=stylesheet><link href=/css/sheetslider.css?1612104669 rel=stylesheet><link rel=stylesheet href=/css/gardener.e2ca9959244349715932e2bbb82ec914af6743c4148bb41946b0aea714f04a0d.css><script src=/js/moment.js?1612104669></script><script src=/js/vivus.js?1612104669></script><script src=/js/scrollreveal.js?1612104669></script><script src=/js/inlineSVG.js?1612104669></script><script src=/js/jquery.min.js?1612104669></script><script src=/js/fixed.js?1612104669></script><script src=/js/clipboard.min.js?1612104669></script><script src=https://platform.linkedin.com/in.js type=text/javascript>lang:en_US</script></head><body data-url=/documentation/contribute/10_code/27_deploy_into_cluster/ class=has-sticky-navigation><script>$(document).ready(function(){function initStickyNav(){var stickyPoint;var tln=document.querySelector(".tln");if(!tln){return;}
var stickyPointEl=document.querySelector(".sticky-nav-point");if(stickyPointEl==null){stickyPointEl=document.querySelector("body");stickyPoint=0;}else{stickyPoint=stickyPointEl.clientHeight+stickyPointEl.offsetTop;}
var bodySelector=document.getElementsByTagName("body")[0];var tlnHeight=tln.clientHeight;var stickyNavigation=function(){if(window.pageYOffset+tlnHeight>=stickyPoint){bodySelector.classList.add("has-sticky-navigation");tln.classList.add("sticky-top");}else{bodySelector.classList.remove("has-sticky-navigation");tln.classList.remove("sticky-top");}}
window.onscroll=function(){stickyNavigation();};}
initStickyNav();function closeAllSelect(){document.getElementById("docOptions").classList.remove("show");}
function show(e){e.stopPropagation();document.getElementById("docOptions").classList.add("show");}
document.addEventListener("click",closeAllSelect);document.getElementById("docSelector").addEventListener("click",show);});</script><div class="tln fixedsticky sticky-top"><header class=navigation><div class=container><div class=navigation-wrapper><a href=/ class=logo><img src=/images/logo.svg>
<span class=title>Gardener</span></a>
<a class="nav-button navbar-toggler" href=#><i class="fa fa-bars"></i></a><div class=navbar-collapse><ul class=links><li class=link><a href=/blog/>Blogs</a></li><li class=link><a href=/community/>Community</a></li><li class=link><a href=/adopter/>Adopters</a></li><li class="link has-child active"><a id=docSelector>Documentation v1.14.0</a><div id=docOptions class=doc-options><ul><li><a href=/documentation/home class=activeVersion>Documentation
v1.14.0</a></li><li><a href=/v1.13.2/contribute/10_code/27_deploy_into_cluster/>Documentation
v1.13.2</a></li><li><a href=/v1.12.8/contribute/10_code/27_deploy_into_cluster/>Documentation
v1.12.8</a></li></ul></div></li></ul></div></div></div></header></div><script>$(".navigation .navbar-toggler").click(function(evt){$(".navigation .navbar-collapse").toggle();$(".navigation").toggleClass("collapsed");$(".navigation .search-box").toggle();})</script><style>#docSelector{cursor:pointer}.doc-options{position:fixed;background-color:#0b8062;text-align:left;display:none}.doc-options ul li{margin-bottom:0}.doc-options ul li a:hover{background-color:#0c694f}.doc-options ul{list-style:none;padding:0;margin:0;text-align:left}.doc-options ul li a{padding:10px;margin:0}.doc-options .activeVersion{background-color:#ec682a}.show{display:block}</style><div class=sln><div class=overlay-band><ul class="nav-list container"><li title=Home><a class=navbar-link href=/documentation/home/>Home</a></li><li title=Concepts><a class=navbar-link href=/documentation/concepts/>Concepts</a></li><li title="How-To Guides"><a class=navbar-link href=/documentation/guides/>How-To Guides</a></li><li title=Tutorials><a class=navbar-link href=/documentation/tutorials/>Tutorials</a></li><li title="API Reference"><a class=navbar-link href=/documentation/references/>API Reference</a></li><li title=Contribute><a class="navbar-link is-active" href=/documentation/contribute/>Contribute</a></li></ul></div></div><div class="main container"><nav id=sidebar class="collapsed container menu"><div class=highlightable><ul class=topics><li data-nav-id=/documentation/contribute/ title=Contribute class="dd-item parent root collapsible" data-depth=0><a href=/documentation/contribute/><span class=menu-item-text>Contribute</span></a><ul><li data-nav-id=/contribute/code/ title=Code class="dd-item parent top-level collapsible" data-depth=1><a href=/contribute/code/><span class="toggle fa fa-angle-down"></span><span class=menu-item-text>Code</span></a><ul><li data-nav-id=/documentation/contribute/10_code/14_cicd/ title=CI/CD class=dd-item data-depth=2><a href=/documentation/contribute/10_code/14_cicd/><span class=toggle></span><span class=menu-item-text>CI/CD</span></a></li><li data-nav-id=/documentation/contribute/10_code/15_conf_secrets/ title="Configuration and Usage" class=dd-item data-depth=2><a href=/documentation/contribute/10_code/15_conf_secrets/><span class=toggle></span><span class=menu-item-text>Configuration and Usage</span></a></li><li data-nav-id=/documentation/contribute/10_code/10-contribution_guide/ title="Contribution Guide" class=dd-item data-depth=2><a href=/documentation/contribute/10_code/10-contribution_guide/><span class=toggle></span><span class=menu-item-text>Contribution Guide</span></a></li><li data-nav-id=/documentation/contribute/10_code/20_dependencies/ title=Dependencies class=dd-item data-depth=2><a href=/documentation/contribute/10_code/20_dependencies/><span class=toggle></span><span class=menu-item-text>Dependencies</span></a></li><li data-nav-id=/documentation/contribute/10_code/27_deploy_into_cluster/ title="Deploy into a Cluster" class="dd-item parent active" data-depth=2><a href=/documentation/contribute/10_code/27_deploy_into_cluster/><span class=toggle></span><span class=menu-item-text>Deploy into a Cluster</span></a></li><li data-nav-id=/documentation/contribute/10_code/30_deploy_seed_into_aks/ title="Deploy into AKS" class=dd-item data-depth=2><a href=/documentation/contribute/10_code/30_deploy_seed_into_aks/><span class=toggle></span><span class=menu-item-text>Deploy into AKS</span></a></li><li data-nav-id=/documentation/contribute/10_code/13_env/ title=Environment class=dd-item data-depth=2><a href=/documentation/contribute/10_code/13_env/><span class=toggle></span><span class=menu-item-text>Environment</span></a></li><li data-nav-id=/documentation/contribute/10_code/37_process/ title=Process class=dd-item data-depth=2><a href=/documentation/contribute/10_code/37_process/><span class=toggle></span><span class=menu-item-text>Process</span></a></li><li data-nav-id=/documentation/contribute/10_code/40_repositories/ title=Repositories class=dd-item data-depth=2><a href=/documentation/contribute/10_code/40_repositories/><span class=toggle></span><span class=menu-item-text>Repositories</span></a></li><li data-nav-id=/documentation/contribute/10_code/12-security_guide/ title="Security Release Process" class=dd-item data-depth=2><a href=/documentation/contribute/10_code/12-security_guide/><span class=toggle></span><span class=menu-item-text>Security Release Process</span></a></li></ul></li><li data-nav-id=/contribute/docs/ title=Documentation class="dd-item top-level collapsible collapsed" data-depth=1><a href=/contribute/docs/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Documentation</span></a><ul><li data-nav-id=/documentation/contribute/20_documentation/25_markup/ title=Markdown class=dd-item data-depth=2><a href=/documentation/contribute/20_documentation/25_markup/><span class=toggle></span><span class=menu-item-text>Markdown</span></a></li><li data-nav-id=/documentation/contribute/20_documentation/10_organisation/ title=Organization class=dd-item data-depth=2><a href=/documentation/contribute/20_documentation/10_organisation/><span class=toggle></span><span class=menu-item-text>Organization</span></a></li><li data-nav-id=/documentation/contribute/20_documentation/20_style/ title="Style Guide" class=dd-item data-depth=2><a href=/documentation/contribute/20_documentation/20_style/><span class=toggle></span><span class=menu-item-text>Style Guide</span></a></li></ul></li></ul></li></ul></div></nav><a href=# class=menu-toggler><i class="fa fa-angle-double-left"></i></a><script>$(document).ready(function(){$("#sidebar .dd-item:not(.top-level):not(.parent)").hide();$("#sidebar .dd-item.parent").siblings(".dd-item").show();$('.dd-item',"#sidebar .dd-item.parent").show();$(".menu-toggler").click(function(evt){$("#sidebar").toggleClass("collapsed");$(".menu-toggler span").toggleClass("fa-angle-double-left");$(".menu-toggler span").toggleClass("fa-angle-double-right");});})</script><section><div class="highlightable body-inner-wrapper"><div id=body-inner class=external><div class="docs page"><div class=git-wr><div class=page-contributors>Contributors to this page<div class=contributors-list></div></div><div class=page-edit><span class=last-update>Last update:
<span data-publishdate="2020-06-17 22:28:21"></span></span><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/gardener/gardener/blob/master/docs/deployment/kubernetes.md target=blank><i class="fa fa-edit"></i><span id=top-github-link-text title="Edit this page"></span></a></div></div></div><h1 id=deploying-the-gardener-into-a-kubernetes-cluster>Deploying the Gardener into a Kubernetes cluster</h1><p>Similar to Kubernetes, Gardener consists out of control plane components (Gardener API server, Gardener controller manager, Gardener scheduler), and an agent component (Gardenlet).
The control plane is deployed in the so-called garden cluster while the agent is installed into every seed cluster.
Please note that it is possible to use the garden cluster as seed cluster by simply deploying the Gardenlet into it.</p><p>We are providing <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../../charts/gardener>Helm charts</a> in order to manage the various resources of the components.
Please always make sure that you use the Helm chart version that matches the Gardener version you want to deploy.</p><h2 id=deploying-the-gardener-control-plane-api-server-controller-manager-scheduler>Deploying the Gardener control plane (API server, controller manager, scheduler)</h2><p>The <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../../charts/gardener/controlplane/values.yaml>configuration values</a> depict the various options to configure the different components.
Please consult <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../usage/configuration.md>this document</a> to get a detailed explanation of what can be configured for which component.
Also note that all resources and deployments need to be created in the <code>garden</code> namespace (not overrideable).</p><p>After preparing your values in a separate <code>controlplane-values.yaml</code> file, you can run the following command against your garden cluster:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>helm install charts/gardener/controlplane <span class=se>\
</span><span class=se></span>  --namespace garden <span class=se>\
</span><span class=se></span>  --name gardener-controlplane <span class=se>\
</span><span class=se></span>  -f gardener-values.yaml <span class=se>\
</span><span class=se></span>  --wait
</code></pre></div><h2 id=deploying-gardener-extensions>Deploying Gardener extensions</h2><p>Gardener is an extensible system that does not contain the logic for provider-specific things like DNS management, cloud infrastructures, network plugins, operating system configs, and many more.</p><p>You have to install extension controllers for these parts.
Please consult <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../extensions/overview.md>the documentation regarding extensions</a> to get more information.</p><h2 id=deploying-the-gardener-agent-gardenlet>Deploying the Gardener agent (Gardenlet)</h2><p>The Gardenlet requires a bootstrap token as well as a bootstrap kubeconfig in order to properly register itself with the Gardener control plane.</p><p>The <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../../charts/gardener/gardenlet/values.yaml>configuration values</a> depict the various options to configure it.
Please consult <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../concepts/gardenlet.md#component-configuration>this document</a> to get a detailed explanation of what can be configured.</p><p>Prepare your values in a separate <code>gardenlet-values.yaml</code> file:</p><ol><li>Create a bootstrap token secret in the <code>kube-system</code> namespace of the garden cluster (see <a href=https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/>this</a> and <a href=https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/#bootstrap-tokens>this</a>).</li><li>Create a bootstrap kubeconfig containing this token:</li></ol><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>v1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Config<span class=w>
</span><span class=w></span><span class=k>current-context</span><span class=p>:</span><span class=w> </span>gardenlet-bootstrap@default<span class=w>
</span><span class=w></span><span class=k>clusters</span><span class=p>:</span><span class=w>
</span><span class=w></span>- <span class=k>cluster</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>certificate-authority-data</span><span class=p>:</span><span class=w> </span>&lt;ca-of-garden-cluster<span class=sd>&gt;
</span><span class=sd>    server: https://&lt;endpoint-of-garden-cluster&gt;</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w></span><span class=k>contexts</span><span class=p>:</span><span class=w>
</span><span class=w></span>- <span class=k>context</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>cluster</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w>    </span><span class=k>user</span><span class=p>:</span><span class=w> </span>gardenlet-bootstrap<span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>gardenlet-bootstrap@default<span class=w>
</span><span class=w></span><span class=k>users</span><span class=p>:</span><span class=w>
</span><span class=w></span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>gardenlet-bootstrap<span class=w>
</span><span class=w>  </span><span class=k>user</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>token</span><span class=p>:</span><span class=w> </span>&lt;bootstrap-token&gt;<span class=w>
</span></code></pre></div><ol start=3><li>Provide this bootstrap kubeconfig together with a desired name and namespace to the Gardenlet Helm chart values <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../../charts/gardener/gardenlet/values.yaml#L31-L35>here</a>:</li></ol><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>gardenClientConnection</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>bootstrapKubeconfig</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>name</span><span class=p>:</span><span class=w> </span>gardenlet-kubeconfig-bootstrap<span class=w>
</span><span class=w>    </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>garden<span class=w>
</span><span class=w>    </span><span class=k>kubeconfig</span><span class=p>:</span><span class=w> </span><span class=sd>|
</span><span class=sd>      &lt;bootstrap-kubeconfig&gt;</span><span class=w>
</span></code></pre></div><ol start=4><li>Define a name and namespace where the Gardenlet shall store the real kubeconfig it creates during the bootstrap process <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../../charts/gardener/gardenlet/values.yaml#L31-L35>here</a>:</li></ol><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>gardenClientConnection</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>kubeconfigSecret</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>name</span><span class=p>:</span><span class=w> </span>gardenlet-kubeconfig<span class=w>
</span><span class=w>    </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>garden<span class=w>
</span></code></pre></div><ol start=5><li>Define either <code>seedSelector</code> or <code>seedConfig</code> (see <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../concepts/gardenlet.md#seed-config-vs-seed-selector>this document</a></li></ol><p>Now you are ready to deploy the Helm chart:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>helm install charts/gardener/gardenlet <span class=se>\
</span><span class=se></span>  --namespace garden <span class=se>\
</span><span class=se></span>  --name gardenlet <span class=se>\
</span><span class=se></span>  -f gardenlet-values.yaml <span class=se>\
</span><span class=se></span>  --wait
</code></pre></div><p>:warning: A current prerequisite of Kubernetes clusters that are used as seeds is to have a pre-deployed <code>nginx-ingress-controller</code> to make the Gardener work properly.
Moreover, there should exist a DNS record <code>*.ingress.&lt;SEED-CLUSTER-DOMAIN></code> where <code>&lt;SEED-CLUSTER-DOMAIN></code> is the value of the <code>.dns.ingressDomain</code> field of <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../../example/50-seed.yaml>a Seed cluster resource</a> (or the <a href=https://raw.githubusercontent.com/gardener/gardener/master/docs/deployment/../../example/20-componentconfig-gardenlet.yaml#L84-L85>respective Gardenlet configuration</a>).</p></div></div></div><div class=howto_tickets><a href=https://github.com/gardener/gardener/issues/new/choose target=_blank><span>Let us know how can we improve.</span>
<span>Open <img src=https://gardener.cloud/images/branding/github-mark-logo-green.svg> GitHub Issue <i class="fa fa-external-link" aria-hidden=true></i></span></a></div></section></div><style></style><footer class=footer><div class="container footer-wrapper"><ul class=nav><li><a href=/blog/>Blogs</a></li><li><a href=/community/>Community</a></li><li><a href=/adopter/>Adopters</a></li><li><a href=/documentation/home>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2020 Gardener project authors. Privacy Statement</span></div></footer><script src=/js/perfect-scrollbar.min.js?1612104669></script><script src=/js/perfect-scrollbar.jquery.min.js?1612104669></script><script src=/js/jquery.sticky.js?1612104669></script><script src=/js/featherlight.min.js?1612104669></script><script src=/js/html5shiv-printshiv.min.js?1612104669></script><script src=/js/modernizr.custom.71422.js?1612104669></script><link href=/mermaid/mermaid.css?1612104669 type=text/css rel=stylesheet><script src=/mermaid/mermaid.js?1612104669></script><script src=/js/code-snippets.js?1612104669></script><script>mermaid.initialize({startOnLoad:true,htmlLables:true});function createIssue(issueUrl,page,url){var uri=issueUrl+"?title=Documentation issue on page \""+page+"\"";uri=uri+"&body=\n\n<- DESCRIBE MISSING OR FAULTY DOCUMENTATION HERE->\n\n---\nPage: ["+page+"]("+
url+")\ndon't remove the link to the page. It's required for the processor"
var res=encodeURI(uri);res+="&labels=area/documentation"
window.open(res,"issue")
return false;}
$(document).ready(function(){inlineSVG.init();$("[data-publishdate]").each(function(){$(this).text(moment($(this,"YYYY-MM-DD","YYYY-MM-DD hh:mm:ss").attr("data-publishdate")).fromNow());});new ClipboardJS('.clipboard-copy');$("body").codeSnippets();});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2FGNSX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>