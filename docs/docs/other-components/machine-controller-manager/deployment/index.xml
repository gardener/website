<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gardener – Deployment</title><link>https://gardener.cloud/docs/other-components/machine-controller-manager/deployment/</link><description>Recent content in Deployment on Gardener</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><atom:link href="https://gardener.cloud/docs/other-components/machine-controller-manager/deployment/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Kubernetes</title><link>https://gardener.cloud/docs/other-components/machine-controller-manager/deployment/kubernetes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/other-components/machine-controller-manager/deployment/kubernetes/</guid><description>
&lt;h1 id="deploying-the-machine-controller-manager-into-a-kubernetes-cluster">Deploying the Machine Controller Manager into a Kubernetes cluster&lt;/h1>
&lt;!-- TOC -->
&lt;ul>
&lt;li>&lt;a href="#deploying-the-machine-controller-manager-into-a-kubernetes-cluster">Deploying the Machine Controller Manager into a Kubernetes cluster&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#prepare-the-cluster">Prepare the cluster&lt;/a>&lt;/li>
&lt;li>&lt;a href="#build-the-docker-image">Build the Docker image&lt;/a>&lt;/li>
&lt;li>&lt;a href="#configuring-optional-parameters-while-deploying">Configuring optional parameters while deploying&lt;/a>&lt;/li>
&lt;li>&lt;a href="#usage">Usage&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!-- /TOC -->
&lt;p>As already mentioned, the Machine Controller Manager is designed to run as controller in a Kubernetes cluster. The existing source code can be compiled and tested on a local machine as described in &lt;a href="https://gardener.cloud/docs/other-components/machine-controller-manager/development/local_setup/">Setting up a local development environment&lt;/a>. You can deploy the Machine Controller Manager using the steps described below.&lt;/p>
&lt;h2 id="prepare-the-cluster">Prepare the cluster&lt;/h2>
&lt;ul>
&lt;li>Connect to the remote kubernetes cluster where you plan to deploy the Machine Controller Manager using the kubectl. Set the environment variable KUBECONFIG to the path of the yaml file containing the cluster info.&lt;/li>
&lt;li>Now, create the required CRDs on the remote cluster using the following command,&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ kubectl apply -f kubernetes/crds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build-the-docker-image">Build the Docker image&lt;/h2>
&lt;blockquote>
&lt;p>⚠️ Modify the &lt;code>Makefile&lt;/code> to refer to your own registry.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>Run the build which generates the binary to &lt;code>bin/machine-controller-manager&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ make build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Build docker image from latest compiled binary&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ make docker-image
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Push the last created docker image onto the online docker registry.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ make push
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Now you can deploy this docker image to your cluster. A &lt;a href="https://github.com/gardener/machine-controller-manager/blob/master/kubernetes/deployment/out-of-tree/deployment.yaml">sample development file&lt;/a> is provided. By default, the deployment manages the cluster it is running in. Optionally, the kubeconfig could also be passed as a flag as described in &lt;code>/kubernetes/deployment/out-of-tree/deployment.yaml&lt;/code>. This is done when you want your controller running outside the cluster to be managed from.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ kubectl apply -f kubernetes/deployment/out-of-tree/deployment.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Also deploy the required clusterRole and clusterRoleBindings&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ kubectl apply -f kubernetes/deployment/out-of-tree/clusterrole.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ kubectl apply -f kubernetes/deployment/out-of-tree/clusterrolebinding.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configuring-optional-parameters-while-deploying">Configuring optional parameters while deploying&lt;/h2>
&lt;p>Machine-controller-manager supports several configurable parameters while deploying. Refer to &lt;a href="https://github.com/gardener/machine-controller-manager/blob/master/kubernetes/deployment/out-of-tree/deployment.yaml#L21-L30">the following lines&lt;/a>, to know how each parameter can be configured, and what it&amp;rsquo;s purpose is for.&lt;/p>
&lt;h2 id="usage">Usage&lt;/h2>
&lt;p>To start using Machine Controller Manager, follow the links given at &lt;a href="https://github.com/gardener/machine-controller-manager/blob/master/README.md">usage here&lt;/a>.&lt;/p></description></item></channel></rss>