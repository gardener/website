<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gardener – Compliance</title><link>https://gardener.cloud/docs/guides/compliance/</link><description>Recent content in Compliance on Gardener</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Wed, 22 Nov 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://gardener.cloud/docs/guides/compliance/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Regional Restrictions</title><link>https://gardener.cloud/docs/guides/compliance/regional-restrictions/</link><pubDate>Wed, 22 Nov 2023 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/guides/compliance/regional-restrictions/</guid><description>
&lt;h2 id="shared-responsibility-model">Shared Responsibility Model&lt;/h2>
&lt;p>Gardener, like most cloud providers&amp;rsquo; Kubernetes offerings, is dedicated for a global setup. And just like how most cloud providers offer means to fulfil regional restrictions, Gardener also has some means built in for this purpose. Similarly, Gardener also follows a shared responsibility model where users are obliged to use the provided Gardener means in a way which results in compliance with regional restrictions.&lt;/p>
&lt;h3 id="regions">Regions&lt;/h3>
&lt;p>Gardener users need to understand that Gardener is a generic tool and has no built-in knowledge about regions as geographical or political conglomerates. For Gardener, regions are only strings. To create regional restrictions is an obligation of all Gardener users who orchestrate existing Gardener functionality to reach evidence which can be audited later on.&lt;/p>
&lt;h3 id="support-for-regional-restrictions">Support for Regional Restrictions&lt;/h3>
&lt;p>Gardener offers functionality to support the most important kind of regional restrictions in its global setup:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>No Restriction:&lt;/strong> All Seeds in all regions can be allowed to host the control plane of all shoots.&lt;/li>
&lt;li>&lt;strong>Restriction by Dedication:&lt;/strong> Shoots running in a region can be configured so that only dedicated seeds in dedicated regions are allowed to host the shoot’s control plane. This can be achieved by adding labels to a seed and subsequently restricting shoot control plane placement to appropriately labeled seeds by using the field &lt;code>spec.seedSelector&lt;/code> (&lt;a href="https://github.com/gardener/gardener/blob/v1.84.1/example/90-shoot.yaml#L365-L368">example&lt;/a>).&lt;/li>
&lt;li>&lt;strong>Restriction by Tainting:&lt;/strong> Some seeds running in some dedicated regions are not allowed to host the control plane of any shoots unless explicitly allowed. This can be achieved by tainting seeds appropriately (&lt;a href="https://github.com/gardener/gardener/blob/v1.84.1/example/50-seed.yaml#L86-L88">example&lt;/a>) which in turn requires explicit tolerations if a shoot&amp;rsquo;s control plane should be placed on such tainted seeds (&lt;a href="https://github.com/gardener/gardener/blob/v1.84.1/example/90-shoot.yaml#L360-L361">example&lt;/a>).&lt;/li>
&lt;/ul></description></item><item><title>Docs: Kubernetes Cluster Hardening Procedure for Cluster Admins</title><link>https://gardener.cloud/docs/guides/compliance/kubernetes-hardening/</link><pubDate>Tue, 10 Oct 2023 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/guides/compliance/kubernetes-hardening/</guid><description>
&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>The Gardener team takes security seriously, which is why we mandate the Security Technical Implementation Guide (STIG) for Kubernetes as published by the Defense Information Systems Agency (DISA) &lt;a href="https://public.cyber.mil/stigs/downloads/">here&lt;/a>. We offer Gardener adopters the opportunity to show compliance with DISA Kubernetes STIG via the compliance checker tool &lt;a href="https://github.com/gardener/diki">diki&lt;/a>. The latest release in machine readable format can be found in the &lt;a href="https://public.cyber.mil/stigs/downloads/?_dl_facet_stigs=container-platform">STIGs Document Library&lt;/a> by searching for Kubernetes.&lt;/p>
&lt;h2 id="kubernetes-clusters-security-requirements">Kubernetes Clusters Security Requirements&lt;/h2>
&lt;p>&lt;a href="https://cyber.trackr.live/stig/Kubernetes/1/10">DISA Kubernetes STIG version 1 release 10&lt;/a> contains 93 rules overall. &lt;strong>Only the following 18 rules, however, apply to you as a Gardener Stakeholder/Cluster Admin&lt;/strong>. Some of them are secure-by-default, so your responsibility is to make sure that they are not changed. The requirements are grouped logically for your convenience:&lt;/p>
&lt;h3 id="control-plane-configuration">Control Plane Configuration&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ID&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Secure By Default&lt;/th>
&lt;th>Comments&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>242390&lt;/td>
&lt;td>Kubernetes API server must have anonymous authentication disabled&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Disabled unless you enable it via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#kubeapiserverconfig">enableAnnonymousAuthentication&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>245543&lt;/td>
&lt;td>Kubernetes API Server must disable token authentication to protect information in transit&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Disabled unless you enable it via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#kubernetes">enableStaticTokenKubeconfig&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242400&lt;/td>
&lt;td>Kubernetes API server must have Alpha APIs disabled&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Disabled unless you enable it via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#kubernetesconfig">featureGates&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242436&lt;/td>
&lt;td>Kubernetes API server must have the ValidatingAdmissionWebhook enabled&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Enabled unless you disable it explicitly via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#kubeapiserverconfig">admissionPlugins&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242398&lt;/td>
&lt;td>Kubernetes DynamicAuditing must not be enabled&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Disabled unless you enable it via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#kubernetesconfig">featureGates&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242399&lt;/td>
&lt;td>Kubernetes DynamicKubeletConfig must not be enabled&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Disabled unless you enable it via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#kubernetesconfig">featureGates&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242393&lt;/td>
&lt;td>Kubernetes Worker Nodes must not have sshd service running&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>Active to allow debugging of network issues, but it is possible to deactivate via the &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#core.gardener.cloud/v1beta1.SSHAccess">sshAccess&lt;/a> setting&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242394&lt;/td>
&lt;td>Kubernetes Worker Nodes must not have the sshd service enabled&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>Enabled to allow debugging of network issues, but it is possible to deactivate via the &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#core.gardener.cloud/v1beta1.SSHAccess">sshAccess&lt;/a> setting&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242434&lt;/td>
&lt;td>Kubernetes Kubelet must enable kernel protection&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Enabled for Kubernetes v1.26 or later unless disabled explicitly via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#kubeletconfig">protectKernalDefaults&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>245541&lt;/td>
&lt;td>Kubernetes Kubelet must not disable timeouts&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Enabled for Kubernetes v1.26 or later unless disabled explicitly via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#kubeletconfig">streamingConnectionIdleTimeout&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="end-user-workload">End User Workload&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ID&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Secure By Default&lt;/th>
&lt;th>Comments&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>242395&lt;/td>
&lt;td>Kubernetes dashboard must not be enabled&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Not installed unless you install it via &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#addon">kubernetesDashboard&lt;/a>.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242414&lt;/td>
&lt;td>Kubernetes cluster must use non-privileged host ports for user pods&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>Do not use any ports below 1024 for your own workload.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242415&lt;/td>
&lt;td>Secrets in Kubernetes must not be stored as environment variables&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>Always mount secrets as volumes and never as environment variables.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242383&lt;/td>
&lt;td>User-managed resources must be created in dedicated namespaces&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>Create and use your own/dedicated namespaces and never place anything into the default, kube-system, kube-public, or kube-node-lease namespace. The default namespace is never to be used while the other above listed namespaces are only to be used by the Kubernetes provider (here Gardener).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242417&lt;/td>
&lt;td>Kubernetes must separate user functionality&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>While 242383 is about all resources, this rule is specifically about pods. Create and use your own/dedicated namespaces and never place pods into the default, kube-system, kube-public, or kube-node-lease namespace. The default namespace is never to be used while the other above listed namespaces are only to be used by the Kubernetes provider (here Gardener).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242437&lt;/td>
&lt;td>Kubernetes must have a pod security policy set&lt;/td>
&lt;td>✅&lt;/td>
&lt;td>Set, but Gardener can only set default pod security policies (PSP) and does so only until v1.24 as with v1.25 PSPs were removed (deprecated since v1.21) and replaced with &lt;a href="https://kubernetes.io/docs/concepts/security/pod-security-standards">Pod Security Standards&lt;/a> (see &lt;a href="https://kubernetes.io/blog/2021/04/06/podsecuritypolicy-deprecation-past-present-and-future">this blog&lt;/a> for more information). Whatever the technology, you are responsible to configure custom-tailured appropriate PSPs respectively use them or PSSs, depending on your own workload and security needs (only you know what a pod should be allowed to do).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>242442&lt;/td>
&lt;td>Kubernetes must remove old components after updated versions have been installed&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>While Gardener manages all its components in its system namespaces (automated), you are naturally responsible for your own workload.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>254800&lt;/td>
&lt;td>Kubernetes must have a Pod Security Admission control file configured&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>Gardener ensures that the pod security configuration allows system components to be deployed in the kube-system namespace but does not set configurations that can affect user namespaces. It is recommended that users enforce a minimum of &lt;a href="https://kubernetes.io/docs/concepts/security/pod-security-admission/#pod-security-levels">baseline pod security level for their workload&lt;/a> via &lt;a href="https://gardener.cloud/docs/gardener/pod-security/#admission-configuration-for-the-podsecurity-admission-plugin">PodSecurity admission plugin&lt;/a>.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item></channel></rss>