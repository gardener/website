<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Provider GCP on Gardener</title><link>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/</link><description>Recent content in Provider GCP on Gardener</description><generator>Hugo</generator><language>en-US</language><atom:link href="https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/index.xml" rel="self" type="application/rss+xml"/><item><title>Data Disk Restore From Image</title><link>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/proposals/datadisk-image-restore/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/proposals/datadisk-image-restore/</guid><description>&lt;h1 id="data-disk-restore-from-image">Data Disk Restore From Image&lt;/h1>
&lt;h2 id="table-of-contents">Table of Contents&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/proposals/datadisk-image-restore/#summary">Summary&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/proposals/datadisk-image-restore/#motivation">Motivation&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/proposals/datadisk-image-restore/#goals">Goals&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/proposals/datadisk-image-restore/#non-goals">Non-Goals&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/proposals/datadisk-image-restore/#proposal">Proposal&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/proposals/datadisk-image-restore/#alternatives">Alternatives&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="summary">Summary&lt;/h2>
&lt;p>Currently, we have no support either in the shoot spec or in the &lt;a href="https://github.com/gardener/machine-controller-manager-provider-gcp">MCM GCP Provider&lt;/a> for restoring GCP Data Disks from images.&lt;/p>
&lt;h2 id="motivation">Motivation&lt;/h2>
&lt;p>The primary motivation is to support &lt;a href="https://github.com/gardener/gardener-extension-provider-azure/issues/788">Integration of vSMP MemeoryOne in Azure&lt;/a>.
We implemented support for this in AWS via &lt;a href="https://github.com/gardener/gardener-extension-provider-aws/pull/112">Support for data volume snapshot ID &lt;/a>.
In GCP we have the option to restore data disk from a custom image which is more convenient and flexible.&lt;/p></description></item><item><title>Deployment</title><link>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/deployment/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/deployment/</guid><description>&lt;h1 id="deployment-of-the-gcp-provider-extension">Deployment of the GCP provider extension&lt;/h1>
&lt;p>&lt;strong>Disclaimer:&lt;/strong> This document is NOT a step-by-step installation guide for the GCP provider extension and only contains some configuration specifics regarding the installation of different components via the helm charts residing in the GCP provider extension &lt;a href="https://github.com/gardener/gardener-extension-provider-gcp">repository&lt;/a>.&lt;/p>
&lt;h2 id="gardener-extension-admission-gcp">gardener-extension-admission-gcp&lt;/h2>
&lt;h3 id="authentication-against-the-garden-cluster">Authentication against the Garden cluster&lt;/h3>
&lt;p>There are several authentication possibilities depending on whether or not &lt;a href="https://github.com/gardener/garden-setup#concept-the-virtual-cluster">the concept of &lt;em>Virtual Garden&lt;/em>&lt;/a> is used.&lt;/p>
&lt;h4 id="virtual-garden-is-not-used-ie-the-runtime-garden-cluster-is-also-the-target-garden-cluster">&lt;em>Virtual Garden&lt;/em> is not used, i.e., the &lt;code>runtime&lt;/code> Garden cluster is also the &lt;code>target&lt;/code> Garden cluster.&lt;/h4>
&lt;p>&lt;strong>Automounted Service Account Token&lt;/strong>
The easiest way to deploy the &lt;code>gardener-extension-admission-gcp&lt;/code> component will be to not provide &lt;code>kubeconfig&lt;/code> at all. This way in-cluster configuration and an automounted service account token will be used. The drawback of this approach is that the automounted token will not be automatically rotated.&lt;/p></description></item><item><title>Local Setup</title><link>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/local-setup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/local-setup/</guid><description>&lt;h3 id="admission-gcp">admission-gcp&lt;/h3>
&lt;p>&lt;code>admission-gcp&lt;/code> is an admission webhook server which is responsible for the validation of the cloud provider (GCP in this case) specific fields and resources. The Gardener API server is cloud provider agnostic and it wouldn&amp;rsquo;t be able to perform similar validation.&lt;/p>
&lt;p>Follow the steps below to run the admission webhook server locally.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Start the Gardener API server.&lt;/p>
&lt;p>For details, check the Gardener &lt;a href="https://gardener.cloud/docs/gardener/local_setup/">local setup&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Start the webhook server&lt;/p>
&lt;p>Make sure that the &lt;code>KUBECONFIG&lt;/code> environment variable is pointing to the local garden cluster.&lt;/p></description></item><item><title>Operations</title><link>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/operations/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/operations/</guid><description>&lt;h1 id="using-the-gcp-provider-extension-with-gardener-as-operator">Using the GCP provider extension with Gardener as operator&lt;/h1>
&lt;p>The &lt;a href="https://github.com/gardener/gardener/blob/master/example/30-cloudprofile.yaml">&lt;code>core.gardener.cloud/v1beta1.CloudProfile&lt;/code> resource&lt;/a> declares a &lt;code>providerConfig&lt;/code> field that is meant to contain provider-specific configuration.
The &lt;a href="https://github.com/gardener/gardener/blob/master/example/50-seed.yaml">&lt;code>core.gardener.cloud/v1beta1.Seed&lt;/code> resource&lt;/a> is structured similarly.
Additionally, it allows configuring settings for the backups of the main etcds&amp;rsquo; data of shoot clusters control planes running in this seed cluster.&lt;/p>
&lt;p>This document explains the necessary configuration for this provider extension.&lt;/p>
&lt;h2 id="cloudprofile-resource">&lt;code>CloudProfile&lt;/code> resource&lt;/h2>
&lt;p>This section describes, how the configuration for &lt;code>CloudProfile&lt;/code>s looks like for GCP by providing an example &lt;code>CloudProfile&lt;/code> manifest with minimal configuration that can be used to allow the creation of GCP shoot clusters.&lt;/p></description></item><item><title>Usage</title><link>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/usage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/extensions/infrastructure-extensions/gardener-extension-provider-gcp/usage/</guid><description>&lt;h1 id="using-the-gcp-provider-extension-with-gardener-as-end-user">Using the GCP provider extension with Gardener as end-user&lt;/h1>
&lt;p>The &lt;a href="https://github.com/gardener/gardener/blob/master/example/90-shoot.yaml">&lt;code>core.gardener.cloud/v1beta1.Shoot&lt;/code> resource&lt;/a> declares a few fields that are meant to contain provider-specific configuration.&lt;/p>
&lt;p>This document describes the configurable options for GCP and provides an example &lt;code>Shoot&lt;/code> manifest with minimal configuration that can be used to create a GCP cluster (modulo the landscape-specific information like cloud profile names, secret binding names, etc.).&lt;/p>
&lt;h2 id="gcp-provider-credentials">GCP Provider Credentials&lt;/h2>
&lt;p>In order for Gardener to create a Kubernetes cluster using GCP infrastructure components, a Shoot has to provide credentials with sufficient permissions to the desired GCP project.
Every shoot cluster references a &lt;code>SecretBinding&lt;/code> or a &lt;code>CredentialsBinding&lt;/code> which itself references a &lt;code>Secret&lt;/code>, and this &lt;code>Secret&lt;/code> contains the provider credentials of the GCP project.
The &lt;code>SecretBinding&lt;/code>/&lt;code>CredentialsBinding&lt;/code> is configurable in the &lt;a href="https://github.com/gardener/gardener/blob/master/example/90-shoot.yaml">Shoot cluster&lt;/a> with the field &lt;code>secretBindingName&lt;/code>/&lt;code>credentialsBindingName&lt;/code>.&lt;/p></description></item></channel></rss>