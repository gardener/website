<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gardener â€“ DNS services</title><link>https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/</link><description>Recent content in DNS services on Gardener</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><atom:link href="https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Dns Names</title><link>https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/docs/usage/dns_names/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/docs/usage/dns_names/</guid><description>
&lt;h1 id="request-dns-names-in-shoot-clusters">Request DNS Names in Shoot Clusters&lt;/h1>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>Within a shoot cluster, it is possible to request DNS records via the following resource types:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Ingress&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/concepts/services-networking/service/">Service&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/gardener/external-dns-management/blob/master/examples/40-entry-dns.yaml">DNSEntry&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>It is necessary that the Gardener installation your shoot cluster runs in is equipped with a &lt;code>shoot-dns-service&lt;/code> extension. This extension uses the seed&amp;rsquo;s dns management infrastructure to maintain DNS names for shoot clusters. Please ask your Gardener operator if the extension is available in your environment.&lt;/p>
&lt;h2 id="shoot-feature-gate">Shoot Feature Gate&lt;/h2>
&lt;p>In some Gardener setups the &lt;code>shoot-dns-service&lt;/code> extension is not enabled globally and thus must be configured per shoot cluster. Please adapt the shoot specification by the configuration shown below to activate the extension individually.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>kind: Shoot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> extensions:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - type: shoot-dns-service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="dns-providers-domain-scope">DNS providers, domain scope&lt;/h2>
&lt;p>Gardener can only manage DNS records on your behalf if you have proper DNS providers in place. Please consult &lt;a href="https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/docs/usage/dns_providers/">this page&lt;/a> for more information.&lt;/p>
&lt;h2 id="request-dns-records-via-serviceingress-resources">Request DNS records via Service/Ingress resources&lt;/h2>
&lt;p>To request a DNS name for an Ingress or Service object in the shoot cluster
it must be annotated with the DNS class &lt;code>garden&lt;/code> and an annotation denoting
the desired DNS names.&lt;/p>
&lt;p>For a Service (it must have the type &lt;code>LoadBalancer&lt;/code>) this looks like this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>apiVersion: v1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kind: Service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>metadata:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> annotations:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns.gardener.cloud/class: garden
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns.gardener.cloud/dnsnames: my.subdomain.for.shootsomain.cloud
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: my-service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> namespace: default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ports:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - port: 80
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> protocol: TCP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> targetPort: 80
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> type: LoadBalancer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;em>dnsnames&lt;/em> annotation accepts a comma-separated list of DNS names, if
multiple names are required.&lt;/p>
&lt;p>For an Ingress, the dns names are already declared in the specification.
Nevertheless the &lt;em>dnsnames&lt;/em> annotation must be present. Here a subset of the
dns names of the ingress can be specified. If DNS names for all names are
desired, the value &lt;code>all&lt;/code> can be used.&lt;/p>
&lt;p>If one of the accepted dns names is a direct subname of the shoot&amp;rsquo;s ingress
domain, this is already handled by the standard wildcard entry for the ingress
domain. Therefore this name should be excluded from the &lt;em>dnsnames&lt;/em> list in the
annotation. If only this dns name is configured in the ingress, no explicit
dns entry is required, and the dns annotations should be omitted at all.&lt;/p>
&lt;h2 id="request-dns-records-via-dnsentry-resources">Request DNS records via DNSEntry resources&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>apiVersion: dns.gardener.cloud/v1alpha1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kind: DNSEntry
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>metadata:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> annotations:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns.gardener.cloud/class: garden
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: dns
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> namespace: default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnsName: &lt;span style="color:#a31515">&amp;#34;my.subdomain.for.shootsomain.cloud&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ttl: 600
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># txt records, either text or targets must be specified&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># text:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># - foo-bar&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> targets:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># target records (CNAME or A records)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - 8.8.8.8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="dns-record-events">DNS record events&lt;/h2>
&lt;p>The DNS controller publishes Kubernetes events for the resource which requested the DNS record (Ingress, Service, DNSEntry). These events reveal more information about the DNS requests being processed and are especially useful to check any kind of misconfiguration, e.g. requests for a domain you don&amp;rsquo;t own.&lt;/p>
&lt;p>Events for a successfully created DNS record:&lt;/p>
&lt;pre tabindex="0">&lt;code>$ kubectl -n default describe service my-service
Events:
Type Reason Age From Message
---- ------ ---- ---- -------
Normal dns-annotation 19s dns-controller-manager my.subdomain.for.shootsomain.cloud: dns entry is pending
Normal dns-annotation 19s (x3 over 19s) dns-controller-manager my.subdomain.for.shootsomain.cloud: dns entry pending: waiting for dns reconciliation
Normal dns-annotation 9s (x3 over 10s) dns-controller-manager my.subdomain.for.shootsomain.cloud: dns entry active
&lt;/code>&lt;/pre>&lt;p>Please note, events vanish after their retention period (usually &lt;code>1h&lt;/code>).&lt;/p>
&lt;h2 id="dnsentry-status">DNSEntry status&lt;/h2>
&lt;p>&lt;code>DNSEntry&lt;/code> resources offer a &lt;code>.status&lt;/code> sub-resource which can be used to check the current state of the object.&lt;/p>
&lt;p>Status of a erroneous &lt;code>DNSEntry&lt;/code>.&lt;/p>
&lt;pre tabindex="0">&lt;code> status:
message: No responsible provider found
observedGeneration: 3
provider: remote
state: Error
&lt;/code>&lt;/pre></description></item><item><title>Docs: Dns Providers</title><link>https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/docs/usage/dns_providers/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/docs/usage/dns_providers/</guid><description>
&lt;h1 id="dns-providers">DNS Providers&lt;/h1>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>Gardener can manage DNS records on your behalf, so that you can request them via different resource types (see &lt;a href="https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/docs/usage/dns_names/">here&lt;/a>) within the shoot cluster. The domains for which you are permitted to request records, are however restricted and depend on the DNS provider configuration.&lt;/p>
&lt;h2 id="shoot-provider">Shoot provider&lt;/h2>
&lt;p>By default, every shoot cluster is equipped with a default provider. It is the very same provider that manages the shoot cluster&amp;rsquo;s &lt;code>kube-apiserver&lt;/code> public DNS record (DNS address in your Kubeconfig).&lt;/p>
&lt;pre tabindex="0">&lt;code>kind: Shoot
...
dns:
domain: shoot.project.default-domain.gardener.cloud
&lt;/code>&lt;/pre>&lt;p>You are permitted to request any sub-domain of &lt;code>.dns.domain&lt;/code> that is not already taken (e.g. &lt;code>api.shoot.project.default-domain.gardener.cloud&lt;/code>, &lt;code>*.ingress.shoot.project.default-domain.gardener.cloud&lt;/code>) with this provider.&lt;/p>
&lt;h2 id="additional-providers">Additional providers&lt;/h2>
&lt;p>If you need to request DNS records for domains not managed by the &lt;a href="#Shoot-provider">default provider&lt;/a>, additional providers can
be configured in the shoot specification.
Alternatively, if it is enabled, it can be added as &lt;code>DNSProvider&lt;/code> resources to the shoot cluster.&lt;/p>
&lt;h3 id="additional-providers-in-the-shoot-specification">Additional providers in the shoot specification&lt;/h3>
&lt;p>To add a providers in the shoot spec, you need set them in the &lt;code>spec.dns.providers&lt;/code> list.&lt;/p>
&lt;p>For example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>kind: Shoot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> domain: shoot.project.default-domain.gardener.cloud
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> providers:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - secretName: my-aws-account
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> type: aws-route53
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - secretName: my-gcp-account
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> type: google-clouddns
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>Please consult the &lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/#core.gardener.cloud/v1beta1.DNSProvider">API-Reference&lt;/a> to get a complete list of supported fields and configuration options.&lt;/p>
&lt;/blockquote>
&lt;p>Referenced secrets should exist in the project namespace in the Garden cluster and must comply with the provider specific credentials format. The &lt;strong>External-DNS-Management&lt;/strong> project provides corresponding examples (&lt;a href="https://github.com/gardener/external-dns-management/tree/master/examples">20-secret-&amp;lt;provider-name&amp;gt;-credentials.yaml&lt;/a>) for known providers.&lt;/p>
&lt;h3 id="additional-providers-as-resources-in-the-shoot-cluster">Additional providers as resources in the shoot cluster&lt;/h3>
&lt;p>If it is not enabled globally, you have to enable the feature in the shoot manifest:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>Kind: Shoot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> extensions:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - type: shoot-dns-service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> providerConfig:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> apiVersion: service.dns.extensions.gardener.cloud/v1alpha1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> kind: DNSConfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnsProviderReplication:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enabled: &lt;span style="color:#00f">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>To add a provider directly in the shoot cluster, provide a &lt;code>DNSProvider&lt;/code> in any namespace together
with &lt;code>Secret&lt;/code> containing the credentials.&lt;/p>
&lt;p>For example if the domain is hosted with AWS Route 53 (provider type &lt;code>aws-route53&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>apiVersion: dns.gardener.cloud/v1alpha1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kind: DNSProvider
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>metadata:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> annotations:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns.gardener.cloud/class: garden
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: my-own-domain
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> namespace: my-namespace
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> type: aws-route53
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> secretRef:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: my-own-domain-credentials
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> domains:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> include:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - my.own.domain.com
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apiVersion: v1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kind: Secret
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>metadata:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: my-own-domain-credentials
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> namespace: my-namespace
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>type: Opaque
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>data:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># replace &amp;#39;...&amp;#39; with values encoded as base64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AWS_ACCESS_KEY_ID: ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AWS_SECRET_ACCESS_KEY: ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;strong>External-DNS-Management&lt;/strong> project provides examples with more details for &lt;code>DNSProviders&lt;/code> (30-provider-&amp;lt;provider-name&amp;gt;.yaml)
and credential &lt;code>Secrets&lt;/code> (20-secret-&amp;lt;provider-name&amp;gt;.yaml) at &lt;a href="https://github.com/gardener/external-dns-management/tree/master/examples">https://github.com/gardener/external-dns-management//examples&lt;/a>
for all supported provider types.&lt;/p></description></item><item><title>Docs: Setup</title><link>https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/docs/installation/setup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/extensions/others/gardener-extension-shoot-dns-service/docs/installation/setup/</guid><description>
&lt;h1 id="gardener-dns-management-for-shoots">Gardener DNS Management for Shoots&lt;/h1>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>Gardener allows Shoot clusters to request DNS names for Ingresses and Services out of the box.
To support this the gardener must be installed with the &lt;code>shoot-dns-service&lt;/code>
extension.
This extension uses the seed&amp;rsquo;s dns management infrastructure to maintain DNS
names for shoot clusters. So, far only the external DNS domain of a shoot
(already used for the kubernetes api server and ingress DNS names) can be used
for managed DNS names.&lt;/p>
&lt;h2 id="configuration">Configuration&lt;/h2>
&lt;p>A general description for configuring the DNS management of the
gardener can be found &lt;a href="https://gardener.cloud/docs/gardener/extensions/dns/">here&lt;/a>.&lt;/p>
&lt;p>To generally enable the DNS management for shoot objects the
&lt;code>shoot-dns-service&lt;/code> extension must be registered by providing an
appropriate &lt;a href="https://github.com/gardener/gardener-extension-shoot-dns-service/blob/master/example/controller-registration.yaml">extension registration&lt;/a> in the garden cluster.&lt;/p>
&lt;p>Here it is possible to decide whether the extension should be always available
for all shoots or whether the extension must be separately enabled per shoot.&lt;/p>
&lt;p>If the extension should be used for all shoots the registration must set the &lt;em>globallyEnabled&lt;/em> flag to &lt;code>true&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> resources:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - kind: Extension
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> type: shoot-dns-service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> globallyEnabled: &lt;span style="color:#00f">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="providing-base-domains-usable-for-a-shoot">Providing Base Domains usable for a Shoot&lt;/h3>
&lt;p>So, far only the external DNS domain of a shoot already used
for the kubernetes api server and ingress DNS names can be used for managed
DNS names. This is either the shoot domain as subdomain of the default domain
configured for the gardener installation, or a dedicated domain with dedicated
access credentials configured for a dedicated shoot via the shoot manifest.&lt;/p>
&lt;p>Alternatively, you can specify &lt;code>DNSProviders&lt;/code> and its credentials
&lt;code>Secret&lt;/code> directly in the shoot, if this feature is enabled.
By default, &lt;code>DNSProvider&lt;/code> replication is disabled, but it can be enabled globally in the &lt;code>ControllerDeployment&lt;/code>
or for a shoot cluster in the shoot manifest (details see further below).&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>apiVersion: core.gardener.cloud/v1beta1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kind: ControllerDeployment
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>metadata:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: extension-shoot-dns-service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>type: helm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>providerConfig:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chart: ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> values:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> image:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnsProviderReplication:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enabled: &lt;span style="color:#00f">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>See &lt;a href="https://github.com/gardener/external-dns-management/tree/master/examples">example files (20-* and 30-*)&lt;/a>
for details for the various provider types.&lt;/p>
&lt;h3 id="shoot-feature-gate">Shoot Feature Gate&lt;/h3>
&lt;p>If the shoot DNS feature is not globally enabled by default (depends on the
extension registration on the garden cluster), it must be enabled per shoot.&lt;/p>
&lt;p>To enable the feature for a shoot, the shoot manifest must explicitly add the
&lt;code>shoot-dns-service&lt;/code> extension.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> extensions:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - type: shoot-dns-service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="enabledisable-dns-provider-replication-for-a-shoot">Enable/disable DNS provider replication for a shoot&lt;/h4>
&lt;p>The DNSProvider` replication feature enablement can be overwritten in the
shoot manifest, e.g.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>Kind: Shoot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>spec:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> extensions:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - type: shoot-dns-service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> providerConfig:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> apiVersion: service.dns.extensions.gardener.cloud/v1alpha1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> kind: DNSConfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnsProviderReplication:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enabled: &lt;span style="color:#00f">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="dnsactivation-for-dnsowner">DNSActivation for DNSOwner&lt;/h3>
&lt;p>To support migration of the control plane of shoots, the &lt;code>DNSOwner&lt;/code> created and used for all &lt;code>DNSEntries&lt;/code> created by the
Shoot-DNS-Service can optionally be activated and deactivated by a DNS record.
If the DNSActivation feature is enabled, the &lt;code>DNSOwner&lt;/code> will be only be active if the value of the owner DNS record
managed by Gardener matches the cluster identity of the seed hosting the control plane.
This feature must only be enabled if the Gardener feature gate &lt;code>UseDNSRecords&lt;/code> is enabled for all seeds.&lt;/p>
&lt;p>By default this feature is enabled and can be disabled in the controller deployment:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>apiVersion: core.gardener.cloud/v1beta1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kind: ControllerDeployment
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>metadata:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: extension-shoot-dns-service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>type: helm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>providerConfig:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chart: ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> values:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> image:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ownerDnsActivation:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enabled: &lt;span style="color:#00f">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>