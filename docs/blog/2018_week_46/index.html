<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta name=copyright content="Copyright 2019 Gardener project authors."><title>Auditing Kubernetes for Secure Setup :: Gardener</title><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W2FGNSX');</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-165447164-1');</script><link href=/css/nucleus.css?1590595284 rel=stylesheet><link href=/css/font-awesome.min.css?1590595284 rel=stylesheet><link href=/css/hybrid.css?1590595284 rel=stylesheet><link href=/css/featherlight.min.css?1590595284 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1590595284 rel=stylesheet><link href=/css/auto-complete.css?1590595284 rel=stylesheet><link href=/css/skeleton.css?1590595284 rel=stylesheet><link href=/css/sheetslider.css?1590595284 rel=stylesheet><link rel=stylesheet href=/css/gardener.dbc3a9fd49eaf39719af5cf5f51800a8216e497577cda23dab7f82318d6d89ce.css><script src=/js/moment.js?1590595284></script><script src=/js/vivus.js?1590595284></script><script src=/js/scrollreveal.js?1590595284></script><script src=/js/inlineSVG.js?1590595284></script><script src=/js/jquery.min.js?1590595284></script><script src=/js/fixed.js?1590595284></script><script src=/js/clipboard.min.js?1590595284></script><script src=https://platform.linkedin.com/in.js type=text/javascript>lang:en_US</script></head><body data-url=/blog/2018_week_46/ class=has-sticky-navigation><style>.navigation .navbar-collapse .menu .links .link{display:none}.navigation .navbar-collapse .menu .links .link[data-depth="0"],.navigation .navbar-collapse .menu .links .link[data-depth="1"],.navigation .navbar-collapse .menu .links .link[data-depth="2"]{display:block}.navigation .navbar-collapse .menu .links .link a{color:#fff}.navigation .navbar-collapse .menu .links .link.active{color:inherit}.navigation .navbar-collapse .menu{display:block}</style><script>$(document).ready(function(){function initStickyNav(){var stickyPoint;var tln=document.querySelector(".tln");if(!tln){return;}
var stickyPointEl=document.querySelector(".sticky-nav-point");if(stickyPointEl==null){stickyPointEl=document.querySelector("body");stickyPoint=0;}else{stickyPoint=stickyPointEl.clientHeight+stickyPointEl.offsetTop;}
var bodySelector=document.getElementsByTagName("body")[0];var tlnHeight=tln.clientHeight;var stickyNavigation=function(){if(window.pageYOffset+tlnHeight>=stickyPoint){bodySelector.classList.add("has-sticky-navigation");tln.classList.add("sticky-top");}else{bodySelector.classList.remove("has-sticky-navigation");tln.classList.remove("sticky-top");}}
window.onscroll=function(){stickyNavigation();};}
initStickyNav();});</script><div class="tln fixedsticky sticky-top"><header class=navigation><div class=container><div class=navigation-wrapper><a href=/ class=logo><img src=/images/logo.svg>
<span class=title>Gardener</span></a>
<a class="nav-button navbar-toggler" href=#><i class="fa fa-bars"></i></a><div class=navbar-collapse><ul class=links><li class=link><a class="btn primary" href=/about/>Getting Started</a></li><li class="link active"><a href=/blog/>Blogs</a></li><li class=link><a href=/community/>Community</a></li><li class=link><a href=/adopter/>Adopters</a></li><li class="link has-child"><a href=/documentation/>Documentation</a><nav class="container menu"><ul class="topics links"></ul></nav></li></ul></div></div></div></header></div><script>$(".navigation .navbar-toggler").click(function(evt){$(".navigation .navbar-collapse").toggle();$(".navigation").toggleClass("collapsed");$(".navigation .search-box").toggle();})</script><div class="main container"><section><div id=overlay></div><div class="highlightable body-inner-wrapper"><div id=body-inner><script src=/js/moment.js></script><div class="page blogs"><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:georgi.pavlov@sap.com><img src="https://avatars0.githubusercontent.com/u/52317188?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Georgi Pavlov</span></a></li></ul><span class=publishdate data-publishdate=2020-05-11>2020-05-11</span></div><div class="ten columns"><h2>New Website, Same Green Flower<a href=/blog/2020_week_20/00/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="New Website, Same Green Flower" data-url=https://gardener.cloud/blog/2020_week_20/00/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>The <a href=https://gardener.cloud>Gardener project website</a> just received a serious facelift. Here are some of the highlights:</p><ul><li><strong>A completely new landing page</strong>, emphasizing both on Gardener&rsquo;s value proposition and the open community behind it.</li><li><strong>The Community page</strong> was reconstructed for quick access to the various community channels and will soon merge the Adopters page. It will provide a better insight into success stories from the communty.</li><li><strong>A completely new News section and content type</strong> available at <a href=https://github.com/gardener/documentation/tree/master/website/news>/documentation/news</a>. Use metadata such as <code>publishdate</code> and <code>archivedate</code> to schedule for news publish and archive automatically, regardless of when you contributed them. You can now track what&rsquo;s happening from the landing page or in the dedicated <a href=https://gardener.cloud/news>News</a> section on the website and share.</li><li><strong>Improved blogs</strong> layout. One-click sharing options are available starting with simple URL copy link and twitter button and others will closely follow up. While we are at it, give it a try. Spread the word.</li></ul><p><strong>Website builds</strong> also got to a new level with:</p><ul><li><strong>Containerization</strong>. The whole build environment is containerized now, eliminating differences between local and CI/CD setup and reducing content developers focus only to the <code>/documentation</code> repository. Running a local server for live preview of changes as you make them when developing content for the website, is now as easy as runing <code>make serve</code> in your local <code>/documentation</code> clone.</li><li><strong>Numerous improvements to the buld scripts</strong>. More <a href=https://github.com/gardener/website-generator#build-configuration>configuration options</a>, authenticated requests, fault tollerance and performance.</li><li><strong>Good news for Windows WSL users</strong> who will now nejoy a significantly support. See the updated <a href=https://github.com/gardener/website-generator#windows-10-users>README</a> for details on that.</li><li><strong>A number of improvements</strong> in layouts styles, site assets and hugo site-building techniques.</li></ul><p><strong>But hey, THAT&rsquo;S NOT ALL!</strong></p><p>Stay tuned for more improvements around the corner. The biggest ones are aligning the documentation with the new theme and restructuring it along, more emphasis on community success stories all around, more sharing options and more than a handful of shortcodes for content development and &mldr; let&rsquo;s cut the spoilers here.</p><p>I hope you will like it. Let us know what you think about it. Feel free to leave comments and discuss on <img src=../../../images/branding/twitter-logo-green.svg class="icon inline"><a href=https://twitter.com/GardenerProject>Twitter</a> and <img src=../../../images/branding/slack-logo-green.svg class="icon inline"><a href=https://kubernetes.slack.com/archives/CB57N0BFG>Slack</a>, or in case of issues - on <img src=../../../images/branding/github-mark-logo-green.svg class="icon inline"><a href=https://github.com/gardener/documentation/issues>GitHub</a>.</p><p><strong>Go ahead and help us spread the word: <a href=https://gardener.cloud>https://gardener.cloud</a></strong></p><picture>
<source srcset=../../../blog/2020_week_20/website-screen-L.png media="(min-width: 750px)"><img src=../../../blog/2020_week_20/website-screen.png></picture><br></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2019-06-11>2019-06-11</span></div><div class="ten columns"><h2>Cluster Overprovisioning<a href=/blog/2019_week_21/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Cluster Overprovisioning" data-url=https://gardener.cloud/blog/2019_week_21/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>This tutorial describes how to overprovisioning of cluster nodes for scaling and failover. This is desired
when you have work load that need to scale up quickly without waiting for the new cluster nodes to be created
and join the cluster.</p><img src=../blog/2019_week_21/teaser.png title=overview width=100% class="drop-shadow reveal-fast"><p>A similar problem occurs when crashing a node from the Hyperscaler. This must be replaced by Kubernetes as fast
as possible. The solution can be <strong>overprovisioning</strong> of nodes</p><p>..read some more on <a href=../readmore/overprovisioning>Cluster Overprovisioning</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2019-06-11>2019-06-11</span></div><div class="ten columns"><h2>Feature Flags in Kubernetes Applications<a href=/blog/2019_week_21_2/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Feature Flags in Kubernetes Applications" data-url=https://gardener.cloud/blog/2019_week_21_2/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>Feature flags are used to change the behavior of a program at runtime without forcing a restart.</p><p>Although they are essential in a native cloud environment, they cannot be implemented without significant
effort on some platforms. Kubernetes has made this trivial. Here we will implement them through labels and
annotations, but you can also implement them by connecting directly to the Kubernetes API Server.</p><img src=../blog/2019_week_21_2/teaser.gif title=overview width=100% class="drop-shadow reveal-fast"><p>Possible Use Cases</p><ul><li>turn on/off a specific instance</li><li>turn on/off profiling of a specific instance</li><li>change the logging level, to capture detailed logs during a specific event</li><li>change caching strategy at runtime</li><li>change timeouts in production</li><li>toggle on/off some special verification</li></ul><p>..read some more on <a href=../readmore/featureflag>Feature Flags for App</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2019-06-11>2019-06-11</span></div><div class="ten columns"><h2>Manually adding a node to an existing cluster<a href=/blog/2019_week_06/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Manually adding a node to an existing cluster" data-url=https://gardener.cloud/blog/2019_week_06/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>Gardener has an excellent ability to <a href=/components/mcm/>automatically scale machines</a> for the cluster. From the point of view
of scalability, there is <strong>no need for manual intervention</strong>.</p><object type=image/svg+xml data=../blog/2019_week_06/teaser.svg style="margin:3rem auto;display:block" class=drop-shadow></object><p>This tutorial is useful for those end-users who need specifically configured nodes, which are not yet supported
by Gardener. For example: an end-user who wants some workload that requires <code>runnc</code> instead of <code>runc</code> as container
runtime.</p><p>..read some more on <a href=../readmore/adding-nodes>Adding Nodes to a Cluster</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2019-06-11>2019-06-11</span></div><div class="ten columns"><h2>Organizing Access Using kubeconfig Files<a href=/blog/2019_week_02/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Organizing Access Using kubeconfig Files" data-url=https://gardener.cloud/blog/2019_week_02/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>The kubectl command-line tool uses <code>kubeconfig</code> files to find the information it needs to choose a cluster and
communicate with the API server of a cluster.</p><object type=image/svg+xml data=../blog/2019_week_02/teaser.svg style="margin:3rem auto;display:block" class=drop-shadow></object><blockquote><p>What happens if your kubeconfig file of your production cluster is leaked or published by accident?</p></blockquote><p>Since there is no possibility to rotate or revoke the initial kubeconfig, there is only one
way to protect your infrastructure or application if it is has leaked - <strong>delete the cluster</strong>.</p><p>..learn more on <a href=../readmore/working-with-kubeconfig>Work with kubeconfig files</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Frontend HTTPS<a href=/blog/2018_week_17/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Frontend HTTPS" data-url=https://gardener.cloud/blog/2018_week_17/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><img src=../blog/2018_week_17/blog-https.png title=logo width=100% class="drop-shadow reveal-fast"><p>For encrypted communication between the client to the load balancer, you need to specify a TLS private key and
certificate to be used by the ingress controller.</p><p>Create a secret in the namespace of the ingress containing the TLS private key and certificate. Then configure the
secret name in the TLS configuration section of the ingress specification.</p><p>..read on <a href=../readmore/https>HTTPS - Self Signed Certificates</a> how to configure it.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Auditing Kubernetes for Secure Setup<a href=/blog/2018_week_46/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Auditing Kubernetes for Secure Setup" data-url=https://gardener.cloud/blog/2018_week_46/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>In summer 2018, the <a href=https://github.com/gardener/gardener>Gardener project team</a> asked <a href=https://kinvolk.io/>Kinvolk</a> to execute several penetration tests in its role as third-party contractor. The goal of this ongoing work is to increase the security of
all Gardener stakeholders in the open source community. Following the Gardener architecture, the control plane of a
Gardener managed shoot cluster resides in the corresponding seed cluster. This is a
<a href=https://kubernetes.io/blog/2018/05/17/gardener/#kubernetes-control-plane>Control-Plane-as-a-Service</a> with
a <a href=https://kubernetes.io/blog/2018/05/17/gardener/#network-air-gap>network air gap</a>.</p><object type=image/svg+xml data=../blog/2018_week_46/teaser.svg style="margin:3rem auto;display:block" class=drop-shadow></object><p>Along the way we found various kinds of security issues, for example, due to misconfiguration or missing isolation,
as well as two special problems with upstream Kubernetes and its Control-Plane-as-a-Service
architecture.</p><p>..read some more on <a href=../readmore/insecure>Auditing Kubernetes for Secure Setup</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Big things come in small packages<a href=/blog/2018_week_07/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Big things come in small packages" data-url=https://gardener.cloud/blog/2018_week_07/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>Microservices tend to use smaller runtimes but you can <strong>use what you have</strong> today - and this can be
a <strong>problem in kubernetes</strong>.</p><p>Switching your architecture from a monolith to microservices has many advantages, both in the
way you write software and the way it is used throughout its lifecycle. In this post, my attempt is to
cover one problem which does not get as much attention and discussion - <strong>size of the technology stack</strong>.</p><h2 id=general-purpose-technology-stack>General purpose technology stack</h2><img src=../blog/2018_week_07/blog-service-common-stack.png title=logo width=100% class="drop-shadow reveal-fast"><p>There is a tendency to be more generalized in development and to apply this pattern to all services. One feels
that a homogeneous image of the technology stack is good if it is the same for all services.</p><p>One forgets, however, that a large percentage of the integrated infrastructure is not used by all services in
the same way, and is therefore only a burden. Thus, resources are wasted and the entire application becomes
expensive in operation and scales very badly.</p><h2 id=light-technology-stack>Light technology stack</h2><p>Due to the lightweight nature of your service, you can run more containers on a physical server and virtual
machines. The result is higher resource utilization.</p><img src=../blog/2018_week_07/blog-service-service-stack.png title=logo width=100% class="drop-shadow reveal-fast"><p>Additionally, microservices are developed and deployed as containers independently of each another. This means that a development
team can develop, optimize and deploy a microservice without impacting other subsystems.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Cookies are dangerous...<a href=/blog/2018_week_51/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Cookies are dangerous..." data-url=https://gardener.cloud/blog/2018_week_51/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p><strong>&mldr;they mess up the figure.</strong></p><img src=../blog/2018_week_51/cookie.jpg title=overview width=100% class="drop-shadow reveal-fast"><p>For a team event during the Christmas season we decided to completely reinterpret the
topic <code>cookies</code>&mldr; since the vegetables have gone on a well-deserved vacation. :-)</p><p>Get recipe on <a href=../readmore/cookies>Gardener Cookies</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Anti Patterns<a href=/blog/2018_week_22/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Anti Patterns" data-url=https://gardener.cloud/blog/2018_week_22/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><img src=../blog/2018_week_22/blog-antipattern.png title=logo width=100% class="drop-shadow reveal-fast"><h2 id=running-as-root-user>Running as root user</h2><p>Whenever possible, do not run containers as root users. One could be
tempted to say that Kubernetes Pods and Node are well separated. The host and the container
share the same kernel. If the container is compromised, a root user can damage the underlying
node. Use <code>RUN groupadd -r anygroup && useradd -r -g anygroup myuser</code> to create a group
and a user in it. Use the <code>USER</code> command to switch to this user.</p><h2 id=storing-data-or-logs-in-containers>Storing data or logs in containers</h2><p>Containers are ideal for stateless applications
and should be transient. This means that no data or logs should be stored in the
container, as they are lost when the container is closed. If absolutely necessary,
you can use persistence volumes instead to persist them outside the containers.
However, an ELK stack is preferred for storing and processing log files.</p><p>..read some more on <a href=../readmore/antipattern>Common Kubernetes Antipattern</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Hardening the Gardener Community Setup<a href=/blog/2018_week_50/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Hardening the Gardener Community Setup" data-url=https://gardener.cloud/blog/2018_week_50/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>The <a href=https://github.com/gardener/gardener>Gardener project team</a> has analyzed the impact of the
Gardener <a href=https://groups.google.com/forum/#!topic/gardener/Pom2Y70cDpw>CVE-2018-2475</a> and
the <a href=https://groups.google.com/forum/#!topic/kubernetes-announce/GVllWCg6L88>Kubernetes CVE-2018-1002105</a> on
the Gardener Community Setup. Following some recommendations it is possible to mitigate both vulnerabilities.</p><p>Read more on <a href=../readmore/hardening>Hardening the Gardener Community Setup</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Kubernetes is available in Docker for Mac 17.12 CE<a href=/blog/2018_week_06/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Kubernetes is available in Docker for Mac 17.12 CE" data-url=https://gardener.cloud/blog/2018_week_06/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><table style=border:0><tr><td><img src=../blog/2018_week_06/blog-kubernetes-enable.png title=logo width=100% class="drop-shadow reveal-fast"></td><td valign=top><div><b>Kubernetes is only available in Docker for Mac 17.12 CE and higher</b> on the Edge channel. Kubernetes
support is not included in Docker for Mac Stable releases. To find out more about Stable and Edge channels
and how to switch between them, see
<a href=https://docs.docker.com/docker-for-mac/#general>general configuration</a>.</div></td></tr></table>Docker for Mac 17.12 CE (and higher) Edge includes a standalone Kubernetes server that runs on Mac,
so that you can test deploying your Docker workloads on Kubernetes.<p>The Kubernetes client command, kubectl, is included and configured to connect to the local Kubernetes server.
If you have kubectl already installed and pointing to some other environment, such as minikube or a GKE cluster,
be sure to change context so that kubectl is pointing to docker-for-desktop:</p><p>&mldr;see more on <a href=https://docs.docker.com/docker-for-mac/#kubernetes>Docker.com</a></p><p>I recommend to <a href=/howto/kube-shell>setup your shell</a> to see which KUBECONFIG is active.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Namespace Isolation<a href=/blog/2018_week_09/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Namespace Isolation" data-url=https://gardener.cloud/blog/2018_week_09/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>&mldr;or <strong>DENY all traffic from other namespaces</strong></p><p>You can configure a <strong>NetworkPolicy</strong> to deny all traffic from other namespaces while allowing all traffic
coming from the same namespace the pod is deployed to. There are many reasons why you may chose to configure Kubernetes
network policies:</p><ul><li>Isolate multi-tenant deployments</li><li>Regulatory compliance</li><li>Ensure containers assigned to different environments (e.g. dev/staging/prod) cannot interfere with each another</li></ul><img src=../blog/2018_week_09/blog-namespaceisolation.png title=logo width=100% class="drop-shadow reveal-fast"><p>..read on <a href=/howto/networkisolation>Namespace Isolation</a> how to configure it.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Namespace Scope<a href=/blog/2018_week_08_2/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Namespace Scope" data-url=https://gardener.cloud/blog/2018_week_08_2/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p><strong>Should I use:</strong></p><ul style=list-style:none><li>‚ùå one namespace per user/developer?</li><li>‚ùå one namespace per team?</li><li>‚ùå one per service type?</li><li>‚ùå one namespace per application type?</li><li>üòÑ <b>one namespace per running instance of your application?</b></li></ul><p><strong>Apply the <a href=https://en.wikipedia.org/wiki/Principle_of_least_privilege>Principle of Least Privilege</a></strong></p><p>All user accounts should run at all times <strong>as few privileges as possible</strong>, and also
launch applications with as few privileges as possible. If you share a cluster for
different user separated by a <code>namespace</code>, <strong>all user has access to all <code>namespaces</code></strong> and
services per default. It can happen that a user <strong>accidentally uses and destroys</strong> the
<code>namespace</code> of a productive application or the <code>namespace</code> of another developer.</p><p><strong>Keep in mind: By default namespaces don&rsquo;t provide:</strong></p><ul><li>Network isolation</li><li>Access Control</li><li>Audit Logging on user level</li></ul></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>ReadWriteMany - Dynamically Provisioned Persistent Volumes Using Amazon EFS<a href=/blog/2018_week_27/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="ReadWriteMany - Dynamically Provisioned Persistent Volumes Using Amazon EFS" data-url=https://gardener.cloud/blog/2018_week_27/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>The efs-provisioner allows you to mount EFS storage as PersistentVolumes in kubernetes. It consists of a container
that has access to an AWS EFS resource. The container reads a configmap containing the EFS filesystem ID, the
AWS region and the name identifying the efs-provisioner. This name will be used later when you create a
storage class.</p><img src=../blog/2018_week_27/blog-aws-efs.png title=overview width=100% class="drop-shadow reveal-fast"><h2 id=why-efs>Why EFS</h2><ol><li>When you have application running on multiple nodes which require shared access to a file system</li><li>When you have an application that requires multiple virtual machines to access the same file system at the same time,
AWS EFS is a tool that you can use.</li><li>EFS supports encryption.</li><li>EFS is SSD based storage and its storage capacity and pricing will scale in or out as needed, so there is no need
for the system administrator to do additional operations. It can grow to a petabyte scale.</li><li>EFS now supports NFSv4 lock upgrading and downgrading, so yes, you can use sqlite with EFS‚Ä¶ even if it was possible
before.</li><li>Easy to setup</li></ol><h2 id=why-not-efs>Why Not EFS</h2><ol><li>Sometimes when you think about using a service like EFS, you may also think about <strong>vendor lock-in</strong> and its negative sides</li><li>Making an EFS backup may decrease your production FS performance; the throughput used by backup counts towards
your total file system throughput.</li><li>EFS is expensive compared to EBS (roughly twice the price of EBS storage)</li><li>EFS is not the magical solution for all your distributed FS problems, it can be slow in many cases. Test, benchmark
and measure to ensure your if EFS is a good solution for your use case.</li><li>EFS distributed architecture results in a latency overhead for each file read/write operation.</li><li>If you have the possibility to use a CDN, don‚Äôt use EFS, use it for the files which can&rsquo;t be stored in a CDN.</li><li>Don‚Äôt use EFS as a caching system, sometimes you could be doing this unintentionally.</li><li>Last but not least, even if EFS is a fully managed NFS, you will face performance problems in many cases,
resolving them takes time and needs effort.</li></ol><p>..read some more on <a href=../readmore/readwritemany>ReadWriteMany</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Shared storage with S3 backend<a href=/blog/2018_week_10/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Shared storage with S3 backend" data-url=https://gardener.cloud/blog/2018_week_10/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>The storage is definitely the most complex and important part of an application setup, once this part is completed,
one of the most problematic parts could be solved.</p><p>Mounting a S3 bucket into a pod using <a href=https://github.com/libfuse/libfuse>FUSE</a> allows to access data stored in S3 via
the filesystem. The mount is a pointer to an S3 location, so the data is never synced locally. Once mounted, any pod
can read or even write from that directory without the need for explicit keys.</p><img src=../blog/2018_week_10/blog-s3-shared-storage.png title=logo width=100% class="drop-shadow reveal-fast"><p>However, it can be used to import and parse large amounts of data into a database.</p><p>..read on <a href=/app/s3>Shared S3 Storage</a> how to configure it.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Watching logs of several pods<a href=/blog/2018_week_08/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Watching logs of several pods" data-url=https://gardener.cloud/blog/2018_week_08/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>One thing that always bothered me was that I couldn&rsquo;t get logs of several pods at once with <code>kubectl</code>. A simple
<code>tail -f &lt;path-to-logfile></code> isn&rsquo;t possible. Certainly you can use <code>kubectl logs -f &lt;pod-id></code>, but it doesn&rsquo;t
help if you want to monitor more than one pod at a time.</p><p>This is something you really need a lot, at least if you run several instances of a pod behind a <code>deployment</code>
and you don&rsquo;t have setup a log viewer service like Kibana.</p><img src=../blog/2018_week_08/blog-kubetail.png title=logo width=100% class="drop-shadow reveal-fast"><p>kubetail comes to the rescue, it is a small bash script that allows you to aggregate log files of several pods at
the same time in a simple way. The script is called <code>kubetail</code> and is available at
<a href=https://github.com/johanhaleby/kubetail>https://github.com/johanhaleby/kubetail</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:andreas.herz@sap.com><img src="https://avatars1.githubusercontent.com/u/1155039?v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Andreas Herz</span></a></li></ul></div><div class="ten columns"><h2>Hibernate a Cluster to save money<a href=/blog/2018_week_40/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Hibernate a Cluster to save money" data-url=https://gardener.cloud/blog/2018_week_40/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud></script></div><p><p>You want to experiment with Kubernetes or have set up a customer scenario, but you don&rsquo;t want to run the
cluster 24 / 7 for reasons of cost?</p><object type=image/svg+xml data=../blog/2018_week_40/teaser_patched.svg style="margin:3rem auto;display:block" class=drop-shadow></object><p>The Gardener gives you the possibility to scale your cluster down to <strong>zero nodes</strong>.</p><p>..read some more on <a href=../readmore/hibernate>Hibernate a Cluster</a>.</p></p></div></div></article></div></div></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div></div><style></style><footer class=footer><div class="container footer-wrapper"><ul class=nav><li><a href=/about/>Getting Started</a></li><li><a href=/blog/>Blogs</a></li><li><a href=/news/>News</a></li><li><a href=/documentation/>Documentation</a></li><li><a href=/community/>Community</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2020 Gardener project authors. Privacy Statement</span></div></footer><script src=/js/perfect-scrollbar.min.js?1590595284></script><script src=/js/perfect-scrollbar.jquery.min.js?1590595284></script><script src=/js/jquery.sticky.js?1590595284></script><script src=/js/featherlight.min.js?1590595284></script><script src=/js/html5shiv-printshiv.min.js?1590595284></script><script src=/js/highlight.pack.js?1590595284></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom.71422.js?1590595284></script><link href=/mermaid/mermaid.css?1590595284 type=text/css rel=stylesheet><script src=/mermaid/mermaid.js?1590595284></script><script>mermaid.initialize({startOnLoad:true,htmlLables:true});function createIssue(issueUrl,page,url){var uri=issueUrl+"?title=Documentation issue on page \""+page+"\"";uri=uri+"&body=\n\n<- DESCRIBE MISSING OR FAULTY DOCUMENTATION HERE->\n\n---\nPage: ["+page+"]("+
url+")\ndon't remove the link to the page. It's required for the processor"
var res=encodeURI(uri);res+="&labels=area/documentation"
window.open(res,"issue")
return false;}
$(document).ready(function(){inlineSVG.init();$("[data-publishdate]").each(function(){$(this).text(moment($(this,"YYYY-MM-DD","YYYY-MM-DD hh:mm:ss").attr("data-publishdate")).fromNow());});new ClipboardJS('.clipboard-copy');});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2FGNSX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script src=/js/modernizr.custom.min.js></script><script src=/js/jsrender.min.js></script><script src=/js/main.js></script><script>$(document).ready(function(){$('.blogs .clipboard-copy').click(function(e){e.preventDefault();});})</script></body></html>