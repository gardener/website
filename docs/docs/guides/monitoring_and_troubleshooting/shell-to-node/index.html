<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><link rel=alternate type=application/rss+xml href=https://gardener.cloud/docs/guides/monitoring_and_troubleshooting/shell-to-node/index.xml><link rel=alternate type=text/html href=https://gardener.cloud/docs/guides/monitoring_and_troubleshooting/shell-to-node/_print/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><title>Get a Shell to a Gardener Shoot Worker Node | Gardener</title><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta property="og:title" content="Get a Shell to a Gardener Shoot Worker Node"><meta property="og:description" content="Describes the methods for getting shell access to worker nodes."><meta property="og:type" content="website"><meta property="og:url" content="https://gardener.cloud/docs/guides/monitoring_and_troubleshooting/shell-to-node/"><meta itemprop=name content="Get a Shell to a Gardener Shoot Worker Node"><meta itemprop=description content="Describes the methods for getting shell access to worker nodes."><meta name=twitter:card content="summary"><meta name=twitter:title content="Get a Shell to a Gardener Shoot Worker Node"><meta name=twitter:description content="Describes the methods for getting shell access to worker nodes."><link rel=preload href=/scss/main.min.122f9effc36493edf1f25030c2ce7965b16b3b0eaeb02528b9a50e0fa9110c15.css as=style><link href=/scss/main.min.122f9effc36493edf1f25030c2ce7965b16b3b0eaeb02528b9a50e0fa9110c15.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg width="90" height="90" viewBox="0 0 90 90" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>logo</title><desc>Created with Sketch.</desc><defs><path d="M41.8864954.994901575c.996545099999999-.479910833 2.6164002-.477918931 3.6088091.0L76.8159138 16.0781121C77.8124589 16.5580229 78.8208647 17.8257185 79.0659694 18.8995926l7.7355517 33.8916663C87.0476474 53.8696088 86.6852538 55.4484075 85.9984855 56.3095876L64.3239514 83.4885938C63.6343208 84.3533632 62.1740175 85.0543973 61.0725268 85.0543973H26.3092731c-1.1060816.0-2.5646564-.704623400000003-3.2514246-1.5658035L1.38331434 56.3095876C.693683723 55.4448182.335174016 53.865133.580278769 52.7912589L8.31583044 18.8995926C8.56195675 17.8212428 9.57347722 16.556031 10.5658861 16.0781121L41.8864954.994901575z" id="path-1"/><linearGradient x1="12.7542673%" y1="-18.6617048%" x2="88.2666158%" y2="84.6075483%" id="linearGradient-3"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="50%" y1="4.93673768%" x2="148.756007%" y2="175.514523%" id="linearGradient-4"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="19.1574381%" y1="-9.04800713%" x2="82.2203149%" y2="77.9084293%" id="linearGradient-5"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient><linearGradient x1="57.4403751%" y1="26.3148481%" x2="137.966711%" y2="158.080556%" id="linearGradient-6"><stop stop-color="#fff" offset="0"/><stop stop-color="#439246" offset="100%"/></linearGradient></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="logo"><g id="Rectangle-2" transform="translate(1.000000, 0.000000)"><mask id="mask-2" fill="#fff"><use xlink:href="#path-1"/></mask><use id="Mask" fill="#009f76" xlink:href="#path-1"/><polygon fill="#000" opacity=".289628623" mask="url(#mask-2)" points="-17.6484375 54.5224609 30.8242188 25.0791016 63.4726562 58.5 24.7324219 92.6689453"/></g><path d="M56.8508631 39.260019C56.4193519 40.443987 55.6088085 41.581593 54.6736295 42.1938694l-8.0738997 5.2861089c-1.3854671.907087099999998-3.6247515.9116711-5.0172201.0L33.50861 42.1938694C32.123143 41.2867823 31 39.206345 31 37.545932V26.4150304c0-.725313.2131118-1.5301454.569268099999999-2.2825772L56.8508631 39.260019z" id="Combined-Shape" fill="url(#linearGradient-3)" transform="translate(43.925432, 36.147233) scale(-1, 1) translate(-43.925432, -36.147233)"/><path d="M56.0774672 25.1412464C56.4306829 25.8903325 56.6425556 26.6907345 56.6425556 27.4119019V38.5428034c0 1.6598979-1.1161415 3.73626640000001-2.50861 4.6479374l-8.0738997 5.286109c-1.3854671.907087000000004-3.6247516.911671000000005-5.0172201.0L32.9689261 43.1907408C32.2918101 42.7474223 31.6773514 42.0238435 31.2260376 41.206007L56.0774672 25.1412464z" id="Combined-Shape" fill="url(#linearGradient-4)" transform="translate(43.821278, 37.246598) scale(-1, 1) translate(-43.821278, -37.246598)"/><path d="M65.0702134 57.1846889C64.5985426 58.2007851 63.8367404 59.1236871 62.9788591 59.6189851L47.37497 68.6278947c-1.4306165.825966800000003-3.75236779999999.8246599-5.1807206.0L26.5903603 59.6189851C25.1597438 58.7930183 24 56.7816693 24 55.1323495V37.1145303C24 36.3487436 24.249712 35.5060005 24.6599102 34.7400631L65.0702134 57.1846889z" id="Combined-Shape" fill="url(#linearGradient-5)"/><path d="M65.0189476 34.954538C65.3636909 35.6617313 65.5692194 36.42021 65.5692194 37.1145303V55.1323495C65.5692194 56.7842831 64.4072119 58.7943252 62.9788591 59.6189851L47.37497 68.6278947c-1.4306165.825966800000003-3.75236779999999.8246599-5.1807206.0L26.5903603 59.6189851C25.9237304 59.2341061 25.3159155 58.5918431 24.8568495 57.8487596L65.0189476 34.954538z" id="Combined-Shape" fill="url(#linearGradient-6)"/></g></g></svg></span><span class=text-capitalize>Gardener</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/adopter><span>Adopters</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog><span>Blogs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs><span>Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this siteâ€¦" aria-label="Search this siteâ€¦" autocomplete=off data-offline-search-index-json-src=/offline-search-index.749103e03957cc9a10fbba139bb381b2.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this siteâ€¦" aria-label="Search this siteâ€¦" autocomplete=off data-offline-search-index-json-src=/offline-search-index.749103e03957cc9a10fbba139bb381b2.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class="pr-md-3 ul-1"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconcepts-li><a href=/docs/concepts/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsconcepts><span>Concepts</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconceptsarchitecture-li><a href=/docs/concepts/architecture/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsconceptsarchitecture><span>Architecture</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-componentsdashboard-li><a href=/components/dashboard/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-componentsdashboard><span>Dashboard</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-componentsgardenctl-li><a href=/components/gardenctl/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-componentsgardenctl><span>gardenctl</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-componentsgardener-li><a href=/components/gardener/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-componentsgardener><span>Gardener</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-componentskubify-li><a href=/components/kubify/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-componentskubify><span>kubify</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconceptscore-components-li><a href=/docs/concepts/core-components/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsconceptscore-components><span>Core Components</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsconceptscore-componentsapi-server-li><a href=/docs/concepts/core-components/api-server/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsconceptscore-componentsapi-server><span>Gardener API Server</span></a><ul class="pr-md-3 ul-4"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptscore-componentsapi-serverapiserver_admission_plugins-li><a href=/docs/concepts/core-components/api-server/apiserver_admission_plugins/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptscore-componentsapi-serverapiserver_admission_plugins><span>In-Tree Admission Plugins</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptscore-componentsscheduler-li><a href=/docs/concepts/core-components/scheduler/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptscore-componentsscheduler><span>Gardener Scheduler</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptscore-componentsseed-admission-controller-li><a href=/docs/concepts/core-components/seed-admission-controller/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptscore-componentsseed-admission-controller><span>Gardener Seed Admission Controller</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptscore-componentsgardenlet-li><a href=/docs/concepts/core-components/gardenlet/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptscore-componentsgardenlet><span>gardenlet</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsbackup-restorebackup-restore-li><a href=/docs/concepts/backup-restore/backup-restore/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsbackup-restorebackup-restore><span>Backup and Restore</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconceptsextensions-li><a href=/docs/concepts/extensions/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsconceptsextensions><span>Extensions</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsbackupbucket-li><a href=/docs/concepts/extensions/backupbucket/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsbackupbucket><span>BackupBucket resource</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsbackupentry-li><a href=/docs/concepts/extensions/backupentry/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsbackupentry><span>BackupEntry resource</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionscluster-li><a href=/docs/concepts/extensions/cluster/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionscluster><span>Cluster resource</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsshoot-health-status-conditions-li><a href=/docs/concepts/extensions/shoot-health-status-conditions/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsshoot-health-status-conditions><span>Contributing to shoot health status conditions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionscontrolplane-webhooks-li><a href=/docs/concepts/extensions/controlplane-webhooks/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionscontrolplane-webhooks><span>Controlplane customization webhooks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionscontrolplane-li><a href=/docs/concepts/extensions/controlplane/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionscontrolplane><span>ControlPlane resource</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionscontrolplane-exposure-li><a href=/docs/concepts/extensions/controlplane-exposure/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionscontrolplane-exposure><span>ControlPlane resource with purpose exposure</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsdns-li><a href=/docs/concepts/extensions/dns/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsdns><span>DNSProvider and DNSEntry resources</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsproject-roles-li><a href=/docs/concepts/extensions/project-roles/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsproject-roles><span>Extending project roles</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsoverview-li><a href=/docs/concepts/extensions/overview/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsoverview><span>Extensibility overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsextension-li><a href=/docs/concepts/extensions/extension/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsextension><span>Extension resource</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionscontainerruntime-li><a href=/docs/concepts/extensions/containerruntime/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionscontainerruntime><span>Gardener Container Runtime Extension</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsnetwork-li><a href=/docs/concepts/extensions/network/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsnetwork><span>Gardener Network Extension</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsconventions-li><a href=/docs/concepts/extensions/conventions/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsconventions><span>General conventions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionshealthcheck-library-li><a href=/docs/concepts/extensions/healthcheck-library/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionshealthcheck-library><span>Health Check Library</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsinfrastructure-li><a href=/docs/concepts/extensions/infrastructure/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsinfrastructure><span>Infrastructure resource</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionslogging-and-monitoring-li><a href=/docs/concepts/extensions/logging-and-monitoring/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionslogging-and-monitoring><span>Logging and Monitoring for Extensions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsoperatingsystemconfig-li><a href=/docs/concepts/extensions/operatingsystemconfig/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsoperatingsystemconfig><span>OperatingSystemConfig resource</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsreferenced-resources-li><a href=/docs/concepts/extensions/referenced-resources/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsreferenced-resources><span>Referenced Resources</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionscontrollerregistration-li><a href=/docs/concepts/extensions/controllerregistration/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionscontrollerregistration><span>Registering Extension Controllers</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsshoot-maintenance-li><a href=/docs/concepts/extensions/shoot-maintenance/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsshoot-maintenance><span>Shoot maintenance</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsshoot-webhooks-li><a href=/docs/concepts/extensions/shoot-webhooks/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsshoot-webhooks><span>Shoot resource customization webhooks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsextensionsworker-li><a href=/docs/concepts/extensions/worker/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsextensionsworker><span>Worker resource</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconceptsnetworking-li><a href=/docs/concepts/networking/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsconceptsnetworking><span>Networking</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsnetworkingdns-managment-li><a href=/docs/concepts/networking/dns-managment/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsnetworkingdns-managment><span>DNS Management</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsnetworkingcert-managment-li><a href=/docs/concepts/networking/cert-managment/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsnetworkingcert-managment><span>Certificates Management</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsnetworkingnetwork_policies-li><a href=/docs/concepts/networking/network_policies/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsnetworkingnetwork_policies><span>Network Policies</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconceptsmonitoring-li><a href=/docs/concepts/monitoring/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsconceptsmonitoring><span>Monitoring</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsmonitoringalerting-li><a href=/docs/concepts/monitoring/alerting/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsmonitoringalerting><span>Alerting</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsmonitoringextending-li><a href=/docs/concepts/monitoring/extending/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsmonitoringextending><span>Extending the Monitoring Stack</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsmonitoringoperator_alerts-li><a href=/docs/concepts/monitoring/operator_alerts/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsmonitoringoperator_alerts><span>Operator Alerts</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsconceptsmonitoringuser_alerts-li><a href=/docs/concepts/monitoring/user_alerts/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsmonitoringuser_alerts><span>User Alerts</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsdeploymentdeploy_gardenlet_automatically-li><a href=/docs/concepts/deployment/deploy_gardenlet_automatically/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsdeploymentdeploy_gardenlet_automatically><span>Automatic Deployment of Gardenlets</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsdeploymentdeploy_gardenlet_manually-li><a href=/docs/concepts/deployment/deploy_gardenlet_manually/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsdeploymentdeploy_gardenlet_manually><span>Deploy a Gardenlet Manually</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsdeploymentdeploy_gardenlet-li><a href=/docs/concepts/deployment/deploy_gardenlet/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsdeploymentdeploy_gardenlet><span>Deploying Gardenlets</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsdeploymentsetup_gardener-li><a href=/docs/concepts/deployment/setup_gardener/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsdeploymentsetup_gardener><span>Deploying the Gardener into a Kubernetes cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsdeploymentfeature_gates-li><a href=/docs/concepts/deployment/feature_gates/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsdeploymentfeature_gates><span>Feature Gates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsdeploymentimage_vector-li><a href=/docs/concepts/deployment/image_vector/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsdeploymentimage_vector><span>Image Vector</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsmcm-li><a href=/docs/concepts/mcm/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsmcm><span>Machine Controller Manager</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsguides-li><a href=/docs/guides/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguides><span>How-To Guides</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsguidesclient_tools-li><a href=/docs/guides/client_tools/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesclient_tools><span>Set Up Client Tools</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesclient_toolskubectl-apiserver-li><a href=/docs/guides/client_tools/kubectl-apiserver/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesclient_toolskubectl-apiserver><span>Automated deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesclient_toolsbash_kubeconfig-li><a href=/docs/guides/client_tools/bash_kubeconfig/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesclient_toolsbash_kubeconfig><span>Kubeconfig context as bash prompt</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesclient_toolsworking-with-kubeconfig-li><a href=/docs/guides/client_tools/working-with-kubeconfig/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesclient_toolsworking-with-kubeconfig><span>Organizing Access Using kubeconfig Files</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesclient_toolshelm-li><a href=/docs/guides/client_tools/helm/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesclient_toolshelm><span>Use a Helm chart to deploy some application or service</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsguidesinstall_gardener-li><a href=/docs/guides/install_gardener/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesinstall_gardener><span>Install Gardener</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesinstall_gardenercertificate_management-li><a href=/docs/guides/install_gardener/certificate_management/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsguidesinstall_gardenercertificate_management><span>Gardener Certificate Management</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesinstall_gardenerdns_management-li><a href=/docs/guides/install_gardener/dns_management/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsguidesinstall_gardenerdns_management><span>Gardener DNS Management for Shoots</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesinstall_gardenersecure-setup-li><a href=/docs/guides/install_gardener/secure-setup/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesinstall_gardenersecure-setup><span>Hardening the Gardener Community Setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesinstall_gardeneradd-node-to-cluster-li><a href=/docs/guides/install_gardener/add-node-to-cluster/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesinstall_gardeneradd-node-to-cluster><span>Manually adding a node to an existing cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesinstall_gardenersetup-seed-li><a href=/docs/guides/install_gardener/setup-seed/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesinstall_gardenersetup-seed><span>Setting up a Seed Cluster</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsguidesadminister_shoots-li><a href=/docs/guides/administer_shoots/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shoots><span>Administer Client (Shoot) Clusters</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootshibernate-cluster-li><a href=/docs/guides/administer_shoots/hibernate-cluster/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shootshibernate-cluster><span>Hibernate a Cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootscreate-delete-shoot-li><a href=/docs/guides/administer_shoots/create-delete-shoot/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shootscreate-delete-shoot><span>Create / Delete a Shoot cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootsgardener_aws-li><a href=/docs/guides/administer_shoots/gardener_aws/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shootsgardener_aws><span>Create a kubernetes cluster in AWS with Gardener</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootsgardener_gcp-li><a href=/docs/guides/administer_shoots/gardener_gcp/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shootsgardener_gcp><span>Create a kubernetes cluster on GCP with Gardener</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootscreate-shoot-into-existing-aws-vpc-li><a href=/docs/guides/administer_shoots/create-shoot-into-existing-aws-vpc/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shootscreate-shoot-into-existing-aws-vpc><span>Create a Shoot cluster into existing AWS VPC</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootsgardener-alibaba-li><a href=/docs/guides/administer_shoots/gardener-alibaba/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shootsgardener-alibaba><span>Create Shoot Clusters in Alibaba Cloud</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootsgardener_azure-li><a href=/docs/guides/administer_shoots/gardener_azure/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shootsgardener_azure><span>Create shoot clusters in Azure</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootsdns_providers-li><a href=/docs/guides/administer_shoots/dns_providers/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsguidesadminister_shootsdns_providers><span>Manage DNS Providers</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootsdns_names-li><a href=/docs/guides/administer_shoots/dns_names/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsguidesadminister_shootsdns_names><span>Request DNS Names</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootsrequest_cert-li><a href=/docs/guides/administer_shoots/request_cert/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsguidesadminister_shootsrequest_cert><span>Request X.509 Certificates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootsmaintain-shoot-li><a href=/docs/guides/administer_shoots/maintain-shoot/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesadminister_shootsmaintain-shoot><span>Shoot Cluster Maintenance</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesadminister_shootstrigger-shoot-operations-li><a href=/docs/guides/administer_shoots/trigger-shoot-operations/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsguidesadminister_shootstrigger-shoot-operations><span>Trigger Shoot operations</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsguidesmonitoring_and_troubleshooting-li><a href=/docs/guides/monitoring_and_troubleshooting/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesmonitoring_and_troubleshooting><span>Monitor and Troubleshoot</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsguidesmonitoring_and_troubleshootingshell-to-node-li><a href=/docs/guides/monitoring_and_troubleshooting/shell-to-node/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section" id=m-docsguidesmonitoring_and_troubleshootingshell-to-node><span class=td-sidebar-nav-active-item>Get a Shell to a Gardener Shoot Worker Node</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsguidesmonitoring_and_troubleshootingdebug-a-pod-li><a href=/docs/guides/monitoring_and_troubleshooting/debug-a-pod/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesmonitoring_and_troubleshootingdebug-a-pod><span>How to debug a pod</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsguidesmonitoring_and_troubleshootingtail-logfile-li><a href=/docs/guides/monitoring_and_troubleshooting/tail-logfile/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesmonitoring_and_troubleshootingtail-logfile><span>tail -f /var/log/my-application.log</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsguidesapplications-li><a href=/docs/guides/applications/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplications><span>Applications</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsaccess_pod_from_local-li><a href=/docs/guides/applications/access_pod_from_local/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsaccess_pod_from_local><span>Access a port of a pod locally</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsservice-access-li><a href=/docs/guides/applications/service-access/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsservice-access><span>Access service from outside Kubernetes cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsinsecure-configuration-li><a href=/docs/guides/applications/insecure-configuration/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsinsecure-configuration><span>Auditing Kubernetes for Secure Setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsmissing-registry-permission-li><a href=/docs/guides/applications/missing-registry-permission/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsmissing-registry-permission><span>Container image not pulled</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsimage-pull-policy-li><a href=/docs/guides/applications/image-pull-policy/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsimage-pull-policy><span>Container image not updating</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationssecure-seccomp-li><a href=/docs/guides/applications/secure-seccomp/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationssecure-seccomp><span>Custom Seccomp profile</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsdockerfile_pitfall-li><a href=/docs/guides/applications/dockerfile_pitfall/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsdockerfile_pitfall><span>Dockerfile pitfalls</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationshttps-li><a href=/docs/guides/applications/https/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsguidesapplicationshttps><span>HTTPS with self Signed Certificate</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationscontent_trust-li><a href=/docs/guides/applications/content_trust/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationscontent_trust><span>Integrity and Immutability</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsantipattern-li><a href=/docs/guides/applications/antipattern/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsantipattern><span>Kubernetes Antipatterns</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsnetwork-isolation-li><a href=/docs/guides/applications/network-isolation/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsnetwork-isolation><span>Namespace Isolation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationscontainer-startup-li><a href=/docs/guides/applications/container-startup/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationscontainer-startup><span>Orchestration of container startup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsservice-cache-control-li><a href=/docs/guides/applications/service-cache-control/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsservice-cache-control><span>Out-Dated HTML and JS files delivered</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationscommit_secret_fail-li><a href=/docs/guides/applications/commit_secret_fail/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationscommit_secret_fail><span>Storing secrets in git ðŸ’€</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsguidesapplicationsprometheus-li><a href=/docs/guides/applications/prometheus/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsguidesapplicationsprometheus><span>Using Prometheus and Grafana to monitor K8s</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsguideslandscape-setup-li><a href=/docs/guides/landscape-setup/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docsguideslandscape-setup><span>Landscape Setup</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstutorials-li><a href=/docs/tutorials/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docstutorials><span>Tutorials</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsoidc-login-li><a href=/docs/tutorials/oidc-login/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docstutorialsoidc-login><span>Authenticating with an Identity Provider</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsdynamic-pvc-li><a href=/docs/tutorials/dynamic-pvc/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docstutorialsdynamic-pvc><span>Dynamic Volume Provisioning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsshoot_istio_dns_certs-li><a href=/docs/tutorials/shoot_istio_dns_certs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docstutorialsshoot_istio_dns_certs><span>Gardener yourself a Shoot with Istio, custom Domains, and Certificates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsgpu-li><a href=/docs/tutorials/gpu/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docstutorialsgpu><span>GPU Enabled Cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsknative-install-li><a href=/docs/tutorials/knative-install/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docstutorialsknative-install><span>Install Knative in Gardener clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialss3-li><a href=/docs/tutorials/s3/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-docstutorialss3><span>Shared storage with S3 backend</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsreferences-li><a href=/docs/references/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsreferences><span>API Reference</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsreferencescore-li><a href=/docs/references/core/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsreferencescore><span>Core</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsreferencesextensions-li><a href=/docs/references/extensions/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsreferencesextensions><span>Extensions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsreferencessettings-li><a href=/docs/references/settings/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docsreferencessettings><span>Settings</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscontribute-li><a href=/docs/contribute/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute><span>Contribute</span></a><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-contributecode-li><a href=/contribute/code/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-contributecode><span>Code</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code14_cicd-li><a href=/docs/contribute/10_code/14_cicd/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code14_cicd><span>CI/CD</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code15_conf_secrets-li><a href=/docs/contribute/10_code/15_conf_secrets/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code15_conf_secrets><span>Configuration and Usage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code10-contribution_guide-li><a href=/docs/contribute/10_code/10-contribution_guide/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code10-contribution_guide><span>Contribution Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code20_dependencies-li><a href=/docs/contribute/10_code/20_dependencies/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code20_dependencies><span>Dependencies</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code27_deploy_into_cluster-li><a href=/docs/contribute/10_code/27_deploy_into_cluster/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code27_deploy_into_cluster><span>Deploy into a Cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code30_deploy_seed_into_aks-li><a href=/docs/contribute/10_code/30_deploy_seed_into_aks/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code30_deploy_seed_into_aks><span>Deploy into AKS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code13_env-li><a href=/docs/contribute/10_code/13_env/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code13_env><span>Environment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code37_process-li><a href=/docs/contribute/10_code/37_process/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code37_process><span>Process</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code40_repositories-li><a href=/docs/contribute/10_code/40_repositories/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code40_repositories><span>Repositories</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute10_code12-security_guide-li><a href=/docs/contribute/10_code/12-security_guide/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute10_code12-security_guide><span>Security Release Process</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-contributedocs-li><a href=/contribute/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-contributedocs><span>Documentation</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute20_documentation25_markup-li><a href=/docs/contribute/20_documentation/25_markup/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute20_documentation25_markup><span>Markdown</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute20_documentation10_organisation-li><a href=/docs/contribute/20_documentation/10_organisation/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute20_documentation10_organisation><span>Organization</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute20_documentation30_shortcodes-li><a href=/docs/contribute/20_documentation/30_shortcodes/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute20_documentation30_shortcodes><span>Shortcodes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscontribute20_documentation20_style-li><a href=/docs/contribute/20_documentation/20_style/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-docscontribute20_documentation20_style><span>Style Guide</span></a></li></ul></li></ul></li></ul></li></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><div class=git-wr><div class=page-contributors>Contributors to this page<div class=contributors-list><a href=mailto:georgi.pavlov@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/52317188?v=4" title="Georgi Pavlov"><a href=mailto:k.zhelyazkov@sap.com><img class=user-icon src="https://avatars.githubusercontent.com/u/58623197?v=4" title=Zhelyazkov></div></div></div><a href=https://github.com/gardener/documentation/edit/master/website/documentation/guides/monitoring_and_troubleshooting/shell-to-node/_index.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/gardener/documentation/issues/new?title=Get%20a%20Shell%20to%20a%20Gardener%20Shoot%20Worker%20Node" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/gardener/website-generator/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
<a id=print href=https://gardener.cloud/docs/guides/monitoring_and_troubleshooting/shell-to-node/_print/><i class="fa fa-print fa-fw"></i> Print entire section</a></div><p>Page Content</p><nav id=TableOfContents><ul><li><a href=#gardener-dashboard>Gardener Dashboard</a></li><li><a href=#gardenctl-shell>gardenctl shell</a></li><li><a href=#gardener-ops-toolbelt>Gardener Ops Toolbelt</a></li><li><a href=#custom-root-pod>Custom root pod</a></li></ul><ul><li><a href=#identifying-the-problematic-instance>Identifying the problematic instance</a></li><li><a href=#gardenctl-ssh>gardenctl ssh</a></li><li><a href=#ssh-with-manually-created-bastion-on-aws>SSH with manually created Bastion on AWS</a><ul><li><a href=#create-the-bastion-security-group>Create the Bastion Security Group</a></li><li><a href=#create-the-bastion-instance>Create the bastion instance</a></li></ul></li><li><a href=#connecting-to-the-target-instance>Connecting to the target instance</a></li><li><a href=#cleanup>Cleanup</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://gardener.cloud/docs/>Docs</a></li><li class=breadcrumb-item><a href=https://gardener.cloud/docs/guides/>How-To Guides</a></li><li class=breadcrumb-item><a href=https://gardener.cloud/docs/guides/monitoring_and_troubleshooting/>Monitor and Troubleshoot</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://gardener.cloud/docs/guides/monitoring_and_troubleshooting/shell-to-node/>Get a Shell to a Gardener Shoot Worker Node</a></li></ol></nav><div class=td-content><div class=lead>Describes the methods for getting shell access to worker nodes.</div><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i> 11 minute read</p><h1 id=get-a-shell-to-a-kubernetes-node>Get a Shell to a Kubernetes Node</h1><p>To troubleshoot certain problems in a Kubernetes cluster, operators need access to the host of the Kubernetes node to troubleshoot
problems. This can be required if a node misbehaves or fails to join the cluster in the first place.</p><p>With access to the host, it is for instance possible to check the <code>kubelet</code> logs and interact with common tools such as <code>systemctl</code>and <code>journalctl</code>.</p><p>The first section of this guide explores options to get a shell to the node of a Gardener Kubernetes cluster.
The options described in the second section do not rely on Kubernetes capabilities to get shell access to a node and thus can also be used if an instance failed to join the cluster.</p><p>This guide only covers how to get access to the host, but does not cover troubleshooting methods.</p><ul><li><a href=#get-a-shell-to-a-kubernetes-node>Get a Shell to a Kubernetes Node</a></li><li><a href=#get-a-shell-to-an-operational-cluster-node>Get a Shell to an operational cluster node</a><ul><li><a href=#gardener-dashboard>Gardener Dashboard</a></li><li><a href=#gardenctl-shell>gardenctl shell</a></li><li><a href=#gardener-ops-toolbelt>Gardener Ops Toolbelt</a></li><li><a href=#custom-root-pod>Custom root pod</a></li></ul></li><li><a href=#ssh-access-to-a-node-that-failed-to-join-the-cluster>SSH access to a node that failed to join the cluster</a><ul><li><a href=#identifying-the-problematic-instance>Identifying the problematic instance</a></li><li><a href=#gardenctl-ssh>gardenctl ssh</a></li><li><a href=#ssh-with-manually-created-bastion-on-aws>SSH with manually created Bastion on AWS</a><ul><li><a href=#create-the-bastion-security-group>Create the Bastion Security Group</a></li><li><a href=#create-the-bastion-instance>Create the bastion instance</a></li></ul></li><li><a href=#connecting-to-the-target-instance>Connecting to the target instance</a></li><li><a href=#cleanup>Cleanup</a></li></ul></li></ul><h1 id=get-a-shell-to-an-operational-cluster-node>Get a Shell to an operational cluster node</h1><p>The following describes four different approaches to get a shell to an operational Shoot worker node.
As a prerequisite to troubleshooting a Kubernetes node, the node must have joined the cluster successfully and be able to run a pod.
All of the described approaches involve scheduling a pod with root permissions and mounting the root filesystem.</p><h2 id=gardener-dashboard>Gardener Dashboard</h2><p><strong>Prerequisite</strong>: the terminal feature is configured for the Gardener dashboard.</p><p>Navigate to the cluster overview page and find the <code>Terminal</code> in the <code>Access</code> tile.</p><img style=margin-left:0;width:80%;height:auto alt="Access Tile" src=/__resources/9fb6ca4ff9b7480f93debba833f48590_9d3149.png><br><p>Select the target Cluster (Garden, Seed / Control Plane, Shoot cluster) depending on the requirements and
access rights (only certain users have access to the Seed Control Plane).</p><p>To open the terminal configuration, click on the top right-hand corner of the screen.</p><img style=margin-left:0 alt="Terminal configuration" src=/__resources/db573582bfc544d294cbde8906a74e07_671e84.png><br><p>Set the Terminal Runtime to &ldquo;Privileged.
Also specify the target node from the drop-down menu.</p><img style=margin-left:0;width:50%;height:auto alt="Dashboard terminal pod configuration" src=/__resources/f7b10d48edf44c17ba838ff5c429e39d_595683.png><br><p>The dashboard then schedules a pod and opens a shell session to the node.</p><p>To get access to common binaries installed on the host, prefix the command with <code>chroot /hostroot</code>.
Note that the path depends on where the root path is mounted in the container.
In the default image used by the Dashboard, it is under <code>/hostroot</code>.</p><img style=margin-left:0 alt="Dashboard terminal pod configuration" src=/__resources/3da659e9cc4744a2ad3e1c6a50d39c04_1a182a.png><br><h2 id=gardenctl-shell>gardenctl shell</h2><p><strong>Prerequisite</strong>: <code>kubectl</code> and <a href=https://github.com/gardener/gardenctl>gardenctl are available and configured</a>.</p><p>First, target a Garden cluster containing all the Shoot definitions.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ gardenctl target garden &lt;target-garden&gt;
</code></pre></div><p>Target an available Shoot by name.
This sets up the context and configures the <code>kubeconfig</code> file of the Shoot cluster.
Subsequent commands will execute in this context.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ gardenctl target shoot &lt;target-shoot&gt;
</code></pre></div><p>Get the nodes of the Shoot cluster.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ gardenctl kubectl get nodes 
</code></pre></div><p>Pick a node name from the list above and get a root shell access to it.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ gardenctl shell &lt;target-node&gt;
</code></pre></div><h2 id=gardener-ops-toolbelt>Gardener Ops Toolbelt</h2><p><strong>Prerequisite</strong>: <code>kubectl</code> is available.</p><p>The <a href=https://github.com/gardener/ops-toolbelt>Gardener ops-toolbelt</a> can be used as a convenient way to deploy a root pod to a node.
The pod uses an image that is bundled with a bunch of useful <a href=https://github.com/gardener/ops-toolbelt/tree/master/dockerfile-configs>troubleshooting tools</a>.
This is also the same image that is used by default when using the Gardener Dashboard terminal feature as described in the <a href=#gardener-dashboard>previous section</a>.</p><p>The easiest way to use the <a href=https://github.com/gardener/ops-toolbelt>Gardener ops-toolbelt</a> is to execute
the <a href=https://github.com/gardener/ops-toolbelt/blob/master/hacks/ops-pod><code>ops-pod</code> script</a> in the <code>hacks</code> folder.
To get root shell access to a node, execute the aforementioned script by supplying the target node name as an argument:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ &lt;path-to-ops-toolbelt-repo&gt;/hacks/ops-pod &lt;target-node&gt;
</code></pre></div><h2 id=custom-root-pod>Custom root pod</h2><p>Alternatively, a pod can be <a href=https://kubernetes.io/docs/concepts/configuration/assign-pod-node/>assigned</a> to a target node and a shell can
be opened via <a href=https://kubernetes.io/docs/tasks/debug-application-cluster/get-shell-running-container/>standard Kubernetes means</a>.
To enable root access to the node, the pod specification requires proper <code>securityContext</code> and <code>volume</code> properties.</p><p>For instance you can use the following pod manifest, after changing <target-node-name>with the name of the node you want this pod attached to:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>privileged-pod</span><span class=w>
</span><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>nodeSelector</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>kubernetes.io/hostname</span><span class=p>:</span><span class=w> </span><span class=l>&lt;target-node-name&gt;</span><span class=w>
</span><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>busybox</span><span class=w>
</span><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>busybox</span><span class=w>
</span><span class=w>    </span><span class=nt>stdin</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>    </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>    </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>host-root-volume</span><span class=w>
</span><span class=w>      </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/host</span><span class=w>
</span><span class=w>      </span><span class=nt>readOnly</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>host-root-volume</span><span class=w>
</span><span class=w>    </span><span class=nt>hostPath</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/</span><span class=w>
</span><span class=w>  </span><span class=nt>hostNetwork</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>  </span><span class=nt>hostPID</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>  </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Never</span><span class=w>
</span></code></pre></div><h1 id=ssh-access-to-a-node-that-failed-to-join-the-cluster>SSH access to a node that failed to join the cluster</h1><p>This section explores two options that can be used to get SSH access to a node that failed to join the cluster.
As it is not possible to schedule a pod on the node, the Kubernetes-based methods explored so far cannot be used in this scenario.</p><p>Additionally, Gardener typically provisions worker instances in a private subnet of the VPC, hence - there is no public IP address that could be used for direct SSH access.</p><p>For this scenario, cloud providers typically have extensive documentation (e.g <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html>AWS</a> & <a href=https://cloud.google.com/compute/docs/instances/connecting-to-instance>GCP</a>
and in <a href=https://cloud.google.com/compute/docs/instances/connecting-advanced#vpn>some cases tooling support</a>).
However, these approaches are mostly cloud provider specific, require interaction via their CLI and API or sometimes
the installation of a <a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-install-ssm-agent.html>cloud provider specific agent</a> one the node.</p><p>Alternatively, <code>gardenctl</code> can be used providing a cloud provider agnostic and out-of-the-box support to get ssh access to an instance in a private subnet.
Currently <code>gardenctl</code> supports AWS, GCP, Openstack, Azure and Alibaba Cloud.</p><h2 id=identifying-the-problematic-instance>Identifying the problematic instance</h2><p>First, the problematic instance has to be identified.
In Gardener, worker pools can be created in different cloud provider regions, zones and accounts.</p><p>The instance would typically show up as successfully started / running in the cloud provider dashboard or API and it is not immediately obvious which one has a problem.
Instead, we can use the Gardener API / CRDs to obtain the faulty instance identifier in a cloud-agnostic way.</p><p>Gardener uses the <a href=https://github.com/gardener/machine-controller-manager>Machine Controller Manager</a> to create the Shoot worker nodes.
For each worker node, the Machine Controller Manager creates a <code>Machine</code> CRD in the Shoot namespace in the respective <code>Seed</code> cluster.
Usually the problematic instance can be identified as the respective <code>Machine</code> CRD has status <code>pending</code>.</p><p>The instance / node name can be obtained from the <code>Machine</code> <code>.status</code> field:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ kubectl get machine &lt;machine-name&gt; -o json | jq -r .status.node
</code></pre></div><p>This is all the information needed to go ahead and use <code>gardenctl ssh</code> to get a shell to the node.
In addition, the used cloud provider, the specific identifier of the instance and the instance region can be identified from the <code>Machine</code> CRD.</p><p>Get the identifier of the instance via:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ kubectl get machine &lt;machine-name&gt; -o json | jq -r .spec.providerID // e.g aws:///eu-north-1/i-069733c435bdb4640
</code></pre></div><p>The identifier shows that the instance belongs to the cloud provider <code>aws</code> with the ec2 instance-id <code>i-069733c435bdb4640</code> in region <code>eu-north-1</code>.</p><p>To get more information about the instance, check out the <code>MachineClass</code> (e.g <code>AWSMachineClass</code>) that is associated with each <code>Machine</code> CRD in the <code>Shoot</code> namespace of the <code>Seed</code> cluster.
The <code>AWSMachineClass</code> contains the machine image (<a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html>ami</a>), machine-type, iam information, network-interfaces, subnets, security groups and attached volumes.</p><p>Of course, the information can also be used to get the instance with the cloud provider CLI / API.</p><h2 id=gardenctl-ssh>gardenctl ssh</h2><p>Using the node name of the problematic instance, we can use the <code>gardenctl ssh</code> command to get SSH access to the cloud provider
instance via an automatically set up <a href=https://en.wikipedia.org/wiki/Bastion_host>bastion host</a>.
<code>gardenctl</code> takes care of spinning up the <code>bastion</code> instance, setting up the SSH keys, ports and security groups and opens a root shell on the target instance.
After the SSH session has ended, <code>gardenctl</code> deletes the created cloud provider resources.</p><p>Use the following commands:</p><p>First, target a Garden cluster containing all the Shoot definitions.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ gardenctl target garden &lt;target-garden&gt;
</code></pre></div><p>Target an available Shoot by name.
This sets up the context, configures the <code>kubeconfig</code> file of the Shoot cluster and downloads the cloud provider credentials.
Subsequent commands will execute in this context.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ gardenctl target shoot &lt;target-shoot&gt;
</code></pre></div><p>This uses the cloud provider credentials to spin up the bastion and to open a shell on the target instance.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ gardenctl ssh &lt;target-node&gt;
</code></pre></div><h2 id=ssh-with-manually-created-bastion-on-aws>SSH with manually created Bastion on AWS</h2><p>In case you are not using <code>gardenctl</code> or want to control the bastion instance yourself, you can also manually set it up.
The steps described here are generally the same as <a href=https://github.com/gardener/gardenctl/blob/10a537942b94234914758c0f6d053dc1cf218ecd/pkg/cmd/ssh_aws.go#L53-L52>those used by <code>gardenctl</code> internally</a>.
Despite some cloud provider specifics they can be generalized to the following list:</p><ul><li>Open port 22 on the target instance.</li><li>Create an instance / VM in a public subnet (bastion instance needs to have public ip address).</li><li>Set-up security groups, roles and open port 22 for the bastion instance.</li></ul><p>The following diagram shows an overview how the SSH access to the target instance works:</p><img style=margin-left:0 alt="SSH Bastion diagram" src=/__resources/913441003e5641bc90249bdc07d55656_a35abd.png><br><p>This guide demonstrates the setup of a bastion on AWS.</p><p><strong>Prerequisites:</strong></p><ul><li>The <code>AWS CLI</code> is set up.</li><li>Obtain target instance-id (see <a href=#identifying-the-problematic-instance>here</a>).</li><li>Obtain the VPC ID the Shoot resources are created in. This can be found in the <code>Infrastructure</code> CRD in the <code>Shoot</code> namespace in the <code>Seed</code>.</li><li>Make sure that port 22 on the target instance is open (default for Gardener deployed instances).<ul><li>Extract security group via</li></ul><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws ec2 describe-instances --instance-ids &lt;instance-id&gt;
</code></pre></div><ul><li>Check for rule that allows inbound connections on port 22:</li></ul><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws ec2 describe-security-groups --group-ids=&lt;security-group-id&gt;
</code></pre></div><ul><li>If not available, create the rule with the following comamnd:</li></ul><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws ec2 authorize-security-group-ingress --group-id &lt;security-group-id&gt;  --protocol tcp --port 22 --cidr 0.0.0.0/0
</code></pre></div></li></ul><h3 id=create-the-bastion-security-group>Create the Bastion Security Group</h3><ul><li><p>The common name of the security group is <code>&lt;shoot-name>-bsg</code>. Create the security group:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws ec2 create-security-group --group-name &lt;bastion-security-group-name&gt;  --description ssh-access --vpc-id &lt;VPC-ID&gt;
</code></pre></div></li><li><p>Optionally, create identifying tags for the security group:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws ec2 create-tags --resources &lt;bastion-security-group-id&gt; --tags Key=component,Value=&lt;tag&gt;
</code></pre></div></li><li><p>Create permission in the bastion security group that allows ssh access on port 22.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws ec2 authorize-security-group-ingress --group-id &lt;bastion-security-group-id&gt;  --protocol tcp --port 22 --cidr 0.0.0.0/0
</code></pre></div></li><li><p>Create an IAM role for the bastion instance with the name <code>&lt;shoot-name>-bastions</code>:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws iam create-role --role-name &lt;shoot-name&gt;-bastions
</code></pre></div><p>The content should be:</p></li></ul><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
<span class=nt>&#34;Version&#34;</span><span class=p>:</span> <span class=s2>&#34;2012-10-17&#34;</span><span class=p>,</span>
<span class=nt>&#34;Statement&#34;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>{</span>
        <span class=nt>&#34;Effect&#34;</span><span class=p>:</span> <span class=s2>&#34;Allow&#34;</span><span class=p>,</span>
        <span class=nt>&#34;Action&#34;</span><span class=p>:</span> <span class=p>[</span>
            <span class=s2>&#34;ec2:DescribeRegions&#34;</span>
        <span class=p>],</span>
        <span class=nt>&#34;Resource&#34;</span><span class=p>:</span> <span class=p>[</span>
            <span class=s2>&#34;*&#34;</span>
        <span class=p>]</span>
    <span class=p>}</span>
<span class=p>]</span>
<span class=p>}</span>
</code></pre></div><ul><li><p>Create the instance profile with name <code>&lt;shoot-name>-bastions</code>:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws iam create-instance-profile --instance-profile-name &lt;name&gt;
</code></pre></div></li><li><p>Add the created role to the instance profile:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ aws iam add-role-to-instance-profile --instance-profile-name &lt;instance-profile-name&gt; --role-name &lt;role-name&gt;
</code></pre></div></li></ul><h3 id=create-the-bastion-instance>Create the bastion instance</h3><p>Next, in order to be able to <code>ssh</code> into the bastion instance, the instance has to be set up with a user with a public ssh key.
Create a user <code>gardener</code> that has the same Gardener-generated public ssh key as the target instance.</p><ul><li><p>First, we need to get the public part of the <code>Shoot</code> ssh-key.
The ssh-key is stored in a secret in the the project namespace in the Garden cluster.
The name is: <code>&lt;shoot-name>-ssh-publickey</code>.
Get the key via:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ kubectl get secret aws-gvisor.ssh-keypair -o json | jq -r .data.\&#34;id_rsa.pub\&#34;
</code></pre></div></li><li><p>A script handed over as <code>user-data</code> to the bastion <code>ec2</code> instance, can be used to create the <code>gardener</code> user and add the ssh-key.
For your convenience, you can use the following script to generate the <code>user-data</code>.</p></li></ul><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=cp>#!/bin/bash -eu
</span><span class=cp></span>saveUserDataFile <span class=o>()</span> <span class=o>{</span>
  <span class=nv>ssh_key</span><span class=o>=</span><span class=nv>$1</span>

cat &gt; gardener-bastion-userdata.sh <span class=s>&lt;&lt;EOF
</span><span class=s>#!/bin/bash -eu
</span><span class=s>id gardener || useradd gardener -mU
</span><span class=s>mkdir -p /home/gardener/.ssh
</span><span class=s>echo &#34;$ssh_key&#34; &gt; /home/gardener/.ssh/authorized_keys
</span><span class=s>chown gardener:gardener /home/gardener/.ssh/authorized_keys
</span><span class=s>echo &#34;gardener ALL=(ALL) NOPASSWD:ALL&#34; &gt;/etc/sudoers.d/99-gardener-user
</span><span class=s>EOF</span>
<span class=o>}</span>


<span class=k>if</span> <span class=o>[</span> -p /dev/stdin <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
    <span class=nb>read</span> -r input
    cat <span class=p>|</span> saveUserDataFile <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span>
<span class=k>else</span>
    pbpaste <span class=p>|</span> saveUserDataFile <span class=s2>&#34;</span><span class=nv>$input</span><span class=s2>&#34;</span>
<span class=k>fi</span>
</code></pre></div><ul><li><p>Use the script by handing-over the public ssh-key of the <code>Shoot</code> cluster:</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ kubectl get secret aws-gvisor.ssh-keypair -o json | jq -r .data.\&#34;id_rsa.pub\&#34; | ./generate-userdata.sh
</code></pre></div><p>This generates a file called <code>gardener-bastion-userdata.sh</code> in the same directory containing the <code>user-data</code>.</p></li><li><p>The following information is needed to create the bastion instance:</p><p><code>bastion-IAM-instance-profile-name</code></p><ul><li>Use the created instance profile with name <code>&lt;shoot-name>-bastions</code></li></ul><p><code>image-id</code></p><ul><li>Possible use the same image-id as for the target instance (or any other image). Has cloud provider specific format (AWS: <code>ami</code>).</li></ul><p><code>ssh-public-key-name</code></p><ul><li>This is the ssh key pair already created in the Shoot&rsquo;s cloud provider account by Gardener during the <code>Infrastructure</code> CRD reconciliation.</li><li>The name is usually: <code>&lt;shoot-name>-ssh-publickey</code></li></ul><p><code>subnet-id</code></p><ul><li>Choose a subnet that is attached to an <code>Internet Gateway</code> and <code>NAT Gateway</code> (bastion instance must have a public IP).</li><li>The Gardener created public subnet with the name <code>&lt;shoot-name>-public-utility-&lt;xy></code> can be used.
Please check the created subnets with the cloud provider.</li></ul><p><code>bastion-security-group-id</code></p><ul><li>Use the id of the created bastion security group.</li></ul><p><code>file-path-to-userdata</code></p><ul><li><p>Use the filepath to <code>user-data</code> file generated in the previous step.</p></li><li><p><code>bastion-instance-name</code></p><ul><li>Optional to tag the instance.</li><li>Usually <code>&lt;shoot-name>-bastions</code></li></ul></li></ul></li><li><p>Create the bastion instance via:</p></li></ul><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ ec2 run-instances --iam-instance-profile Name=&lt;bastion-IAM-instance-profile-name&gt; --image-id &lt;image-id&gt;  --count 1 --instance-type t3.nano --key-name &lt;ssh-public-key-name&gt;  --security-group-ids &lt;bastion-security-group-id&gt; --subnet-id &lt;subnet-id&gt; --associate-public-ip-address --user-data &lt;file-path-to-userdata&gt; --tag-specifications ResourceType=instance,Tags=[{Key=Name,Value=&lt;bastion-instance-name&gt;},{Key=component,Value=&lt;mytag&gt;}] ResourceType=volume,Tags=[{Key=component,Value=&lt;mytag&gt;}]&#34;
</code></pre></div><p>Capture the <code>instance-id</code> from the reponse and wait until the <code>ec2</code> instance is running and has a public ip address.</p><h2 id=connecting-to-the-target-instance>Connecting to the target instance</h2><p>Save the private key of the ssh-key-pair in a temporary local file for later use.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ umask 077

$ kubectl get secret &lt;shoot-name&gt;.ssh-keypair -o json | jq -r .data.\&#34;id_rsa\&#34; | base64 -d &gt; id_rsa.key
</code></pre></div><p>Use the private ssh key to ssh into the bastion instance.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ sshÂ -i &lt;path-to-private-key&gt; gardener@&lt;public-bastion-instance-ip&gt;Â 
</code></pre></div><p>If that works, connect from your local terminal to the target instance via the bastion.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>$ sshÂ  -i &lt;path-to-private-key&gt;Â -o ProxyCommand=&#34;ssh -W %h:%p -i &lt;private-key&gt; -o IdentitiesOnly=yes -o StrictHostKeyChecking=no gardener@&lt;public-ip-bastion&gt;&#34; gardener@&lt;private-ip-target-instance&gt; -o IdentitiesOnly=yes -o StrictHostKeyChecking=no
</code></pre></div><h2 id=cleanup>Cleanup</h2><p>Do not forget to cleanup the created resources. Otherwise Gardener will eventually fail to delete the Shoot.</p><div class=section-index><hr class=panel-line></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}.display-none{display:none}</style><div class="d-print-none display-none"><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"></p><p class="feedback--response feedback--response-no"></p></div><script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top"></div></div></main></div></div><footer class="footer row d-print-none"><div class="container-fluid footer-wrapper"><ul class=nav><li><a href=/blog/>Blogs</a></li><li><a href=/community/>Community</a></li><li><a href=/adopter/>Adopters</a></li><li><a href=/docs/>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2019-2021 Gardener project authors. <a href=https://www.sap.com/corporate/en/legal/privacy.html>Privacy policy
<i class="fa fa-external-link" aria-hidden=true></i></a></span></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js integrity="sha256-OxcsE7YsK+qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin=anonymous></script></body></html>