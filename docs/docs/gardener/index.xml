<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gardener â€“ Gardener</title><link>https://gardener.cloud/docs/gardener/</link><description>Recent content on Gardener</description><generator>Hugo -- gohugo.io</generator><language>en-US</language><lastBuildDate>Thu, 19 Nov 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://gardener.cloud/docs/gardener/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: API Reference</title><link>https://gardener.cloud/docs/gardener/api-reference/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/gardener/api-reference/</guid><description>
&lt;h1 id="gardener-api-reference">Gardener API Reference&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="https://gardener.cloud/docs/gardener/api-reference/authentication/">&lt;code>authentication.gardener.cloud&lt;/code> API Group&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/gardener/api-reference/core/">&lt;code>core.gardener.cloud&lt;/code> API Group&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/gardener/api-reference/extensions/">&lt;code>extensions.gardener.cloud&lt;/code> API Group&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/gardener/api-reference/operations/">&lt;code>operations.gardener.cloud&lt;/code> API Group&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/gardener/api-reference/resources/">&lt;code>resources.gardener.cloud&lt;/code> API Group&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/gardener/api-reference/seedmanagement/">&lt;code>seedmanagement.gardener.cloud&lt;/code> API Group&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gardener.cloud/docs/gardener/api-reference/settings/">&lt;code>settings.gardener.cloud&lt;/code> API Group&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Docs: Concepts</title><link>https://gardener.cloud/docs/gardener/concepts/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/gardener/concepts/</guid><description/></item><item><title>Docs: Deployment</title><link>https://gardener.cloud/docs/gardener/deployment/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/gardener/deployment/</guid><description/></item><item><title>Docs: Development</title><link>https://gardener.cloud/docs/gardener/development/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/gardener/development/</guid><description/></item><item><title>Docs: Extensions</title><link>https://gardener.cloud/docs/gardener/extensions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/gardener/extensions/</guid><description/></item><item><title>Docs: Monitoring</title><link>https://gardener.cloud/docs/gardener/monitoring/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/gardener/monitoring/</guid><description>
&lt;h1 id="monitoring">Monitoring&lt;/h1>
&lt;h2 id="roles-of-the-different-prometheus-instances">Roles of the different Prometheus instances&lt;/h2>
&lt;p>&lt;img src="https://gardener.cloud/__resources/monitoring_06c124.png" alt="monitoring">&lt;/p>
&lt;h3 id="prometheus">Prometheus&lt;/h3>
&lt;p>Deployed in the &lt;code>garden&lt;/code> namespace. Important scrape targets:&lt;/p>
&lt;ul>
&lt;li>cadvisor&lt;/li>
&lt;li>node-exporter&lt;/li>
&lt;li>kube-state-metrics&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Purpose&lt;/strong>: Acts as a cache for other Prometheus instances. The metrics are kept for a short amount of time (~2 hours) due to the high cardinality. For example if another Prometheus needs access to cadvisor metrics it will query this Prometheus instead of the cadvisor. This also reduces load on the kubelets and API Server.&lt;/p>
&lt;p>Some of the high cardinality metrics are aggregated with recording rules. These &lt;em>pre-aggregated&lt;/em> metrics are scraped by the &lt;a href="#aggregate-prometheus">Aggregate Prometheus&lt;/a>.&lt;/p>
&lt;p>This Prometheus is not used for alerting.&lt;/p>
&lt;h3 id="aggregate-prometheus">Aggregate Prometheus&lt;/h3>
&lt;p>Deployed in the &lt;code>garden&lt;/code> namespace. Important scrape targets:&lt;/p>
&lt;ul>
&lt;li>other prometheus instances&lt;/li>
&lt;li>logging components&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Purpose&lt;/strong>: Store pre-aggregated data from &lt;a href="#prometheus">prometheus&lt;/a> and &lt;a href="#shoot-prometheus">shoot prometheus&lt;/a>. An ingress exposes this Prometheus allowing it to be scraped from another cluster.&lt;/p>
&lt;h3 id="seed-prometheus">Seed Prometheus&lt;/h3>
&lt;p>Deployed in the &lt;code>garden&lt;/code> namespace. Important scrape targets:&lt;/p>
&lt;ul>
&lt;li>pods in extension namespaces annotated with:&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>prometheus.io/scrape=true
prometheus.io/port=&amp;lt;port&amp;gt;
prometheus.io/name=&amp;lt;name&amp;gt;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>cadvisor metrics from pods in the garden and extension namespaces&lt;/li>
&lt;/ul>
&lt;p>The job name label will be applied to all metrics from that service.
&lt;strong>Purpose&lt;/strong>: Entrypoint for operators when debugging issues with extensions or other garden components.&lt;/p>
&lt;h3 id="shoot-prometheus">Shoot Prometheus&lt;/h3>
&lt;p>Deployed in the shoot control plane namespace. Important scrape targets:&lt;/p>
&lt;ul>
&lt;li>control plane components&lt;/li>
&lt;li>shoot nodes (node-exporter)&lt;/li>
&lt;li>blackbox-exporter used to measure &lt;a href="https://gardener.cloud/docs/gardener/monitoring/connectivity/">connectivity&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Purpose&lt;/strong>: Monitor all relevant components belonging to a shoot cluster managed by Gardener. Shoot owners can view the metrics in Plutono dashboards and receive &lt;a href="https://gardener.cloud/docs/gardener/monitoring/user_alerts/">alerts&lt;/a> based on these metrics. Gardener operators will receive a different set of &lt;a href="https://gardener.cloud/docs/gardener/monitoring/operator_alerts/">alerts&lt;/a>. For alerting internals refer to &lt;a href="https://gardener.cloud/docs/gardener/monitoring/alerting/">this&lt;/a> document.&lt;/p>
&lt;h2 id="collect-all-shoot-prometheus-with-remote-write">Collect all Shoot Prometheus with remote write&lt;/h2>
&lt;p>An optional collection of all Shoot Prometheus metrics to a central prometheus (or cortex) instance is possible with the &lt;code>monitoring.shoot&lt;/code> setting in &lt;code>GardenletConfiguration&lt;/code>:&lt;/p>
&lt;pre tabindex="0">&lt;code>monitoring:
shoot:
remoteWrite:
url: https://remoteWriteUrl # remote write URL
keep:# metrics that should be forwarded to the external write endpoint. If empty all metrics get forwarded
- kube_pod_container_info
queueConfig: | # queue_config of prometheus remote write as multiline string
max_shards: 100
batch_send_deadline: 20s
min_backoff: 500ms
max_backoff: 60s
externalLabels: # add additional labels to metrics to identify it on the central instance
additional: label
&lt;/code>&lt;/pre>&lt;p>If basic auth is needed it can be set via secret in garden namespace (Gardener API Server). &lt;a href="https://github.com/gardener/gardener/blob/master/example/10-secret-remote-write.yaml">Example secret&lt;/a>&lt;/p>
&lt;h2 id="disable-gardener-monitoring">Disable Gardener Monitoring&lt;/h2>
&lt;p>If you wish to disable metric collection for every shoot and roll your own then you can simply set.&lt;/p>
&lt;pre tabindex="0">&lt;code>monitoring:
shoot:
enabled: false
&lt;/code>&lt;/pre></description></item><item><title>Docs: Operations</title><link>https://gardener.cloud/docs/gardener/operations/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/gardener/operations/</guid><description/></item><item><title>Docs: Usage</title><link>https://gardener.cloud/docs/gardener/usage/</link><pubDate>Thu, 19 Nov 2020 00:00:00 +0000</pubDate><guid>https://gardener.cloud/docs/gardener/usage/</guid><description/></item></channel></rss>