<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta name=copyright content="Copyright 2019 Gardener project authors."><meta name=google-site-verification content="9EoGiMwk2aq0E_tVh16iJgJbp7fbyqkfWH9b5sGybl0"><title>Gardener v1.8.0 Released :: Gardener</title><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W2FGNSX');</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-165447164-1');</script><link href=/css/nucleus.css?1606478711 rel=stylesheet><link href=/css/font-awesome.min.css?1606478711 rel=stylesheet><link href=/css/hybrid.css?1606478711 rel=stylesheet><link href=/css/featherlight.min.css?1606478711 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1606478711 rel=stylesheet><link href=/css/auto-complete.css?1606478711 rel=stylesheet><link href=/css/skeleton.css?1606478711 rel=stylesheet><link href=/css/sheetslider.css?1606478711 rel=stylesheet><link rel=stylesheet href=/css/gardener.e2ca9959244349715932e2bbb82ec914af6743c4148bb41946b0aea714f04a0d.css><script src=/js/moment.js?1606478711></script><script src=/js/vivus.js?1606478711></script><script src=/js/scrollreveal.js?1606478711></script><script src=/js/inlineSVG.js?1606478711></script><script src=/js/jquery.min.js?1606478711></script><script src=/js/fixed.js?1606478711></script><script src=/js/clipboard.min.js?1606478711></script><script src=https://platform.linkedin.com/in.js type=text/javascript>lang:en_US</script></head><body data-url=/blog/2020-08/00/ class=has-sticky-navigation><script>$(document).ready(function(){function initStickyNav(){var stickyPoint;var tln=document.querySelector(".tln");if(!tln){return;}
var stickyPointEl=document.querySelector(".sticky-nav-point");if(stickyPointEl==null){stickyPointEl=document.querySelector("body");stickyPoint=0;}else{stickyPoint=stickyPointEl.clientHeight+stickyPointEl.offsetTop;}
var bodySelector=document.getElementsByTagName("body")[0];var tlnHeight=tln.clientHeight;var stickyNavigation=function(){if(window.pageYOffset+tlnHeight>=stickyPoint){bodySelector.classList.add("has-sticky-navigation");tln.classList.add("sticky-top");}else{bodySelector.classList.remove("has-sticky-navigation");tln.classList.remove("sticky-top");}}
window.onscroll=function(){stickyNavigation();};}
initStickyNav();function closeAllSelect(){document.getElementById("docOptions").classList.remove("show");}
function show(e){e.stopPropagation();document.getElementById("docOptions").classList.add("show");}
document.addEventListener("click",closeAllSelect);document.getElementById("docSelector").addEventListener("click",show);});</script><div class="tln fixedsticky sticky-top"><header class=navigation><div class=container><div class=navigation-wrapper><a href=/ class=logo><img src=/images/logo.svg>
<span class=title>Gardener</span></a>
<a class="nav-button navbar-toggler" href=#><i class="fa fa-bars"></i></a><div class=navbar-collapse><ul class=links><li class="link active"><a href=/blog/>Blogs</a></li><li class=link><a href=/community/>Community</a></li><li class=link><a href=/adopter/>Adopters</a></li><li class="link has-child"><a href=/documentation/home>Documentation</a></li></ul></div></div></div></header></div><script>$(".navigation .navbar-toggler").click(function(evt){$(".navigation .navbar-collapse").toggle();$(".navigation").toggleClass("collapsed");$(".navigation .search-box").toggle();})</script><style>#docSelector{cursor:pointer}.doc-options{position:fixed;background-color:#0b8062;text-align:left;display:none}.doc-options ul li{margin-bottom:0}.doc-options ul li a:hover{background-color:#0c694f}.doc-options ul{list-style:none;padding:0;margin:0;text-align:left}.doc-options ul li a{padding:10px;margin:0}.doc-options .activeVersion{background-color:#ec682a}.show{display:block}</style><div class="main container"><section><div class="highlightable body-inner-wrapper"><div id=body-inner><script src=/js/moment.js></script><div class="blogs page"><a href=/blog class="nav-link back">Back to Blogs</a><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><li class=author><a href=mailto:rafael.franzke@sap.com><img src="https://avatars2.githubusercontent.com/u/19169361?s=460&v=4" class="user-icon icons" alt="blog author avatar">
<span class=name>Rafael Franzke</span></a></li></ul><span class=publishdate data-publishdate=2020-08-06>2020-08-06</span></div><div class="ten columns"><h2>Gardener v1.8.0 Released<a href=/blog/2020-08/00/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Gardener v1.8.0 Released" data-url=https://gardener.cloud/blog/2020-08/00/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2020-08/00/></script></div><p><p>Even if we are in the midst of the summer holidays, a new Gardener release came out yesterday: v1.8.0! It&rsquo;s main themes are the large change of our logging stack to Loki (which was already explained in detail on a <a href=https://grafana.com/blog/2020/07/15/gardener-saps-kubernetes-as-a-service-open-source-project-is-moving-its-logging-stack-to-loki/>blog post on grafana.com</a>), more configuration options to optimize the utilization of a shoot, node-local DNS, new project roles, and significant improvements for the Kubernetes client that Gardener uses to interact with the many different clusters.</p><h2 id=notable-changes>Notable Changes</h2><h3 id=logging-20-efk-stack-replaced-by-loki-gardenergardener2515httpsgithubcomgardenergardenerpull2515>Logging 2.0: EFK stack replaced by Loki (<a href=https://github.com/gardener/gardener/pull/2515>gardener/gardener#2515</a>)</h3><p>Since two years or so Gardener could optionally provision a dedicated logging stack per seed and per shoot which was based on fluent-bit, fluentd, ElasticSearch and Kibana. This feature was still hidden behind an alpha-level feature gate and never got promoted to beta so far. Due to various limitations of this solution we decided to replace the EFK stack with Loki. As we already have Prometheus and Grafana deployments for both users and operators by default for all clusters the choice was just natural.
Please find out more on this topic at <a href=https://grafana.com/blog/2020/07/15/gardener-saps-kubernetes-as-a-service-open-source-project-is-moving-its-logging-stack-to-loki/>this dedicated blog post</a>.</p><h3 id=cluster-identities-and-dnsowner-objects-gardenergardener2471httpsgithubcomgardenergardenerpull2471-gardenergardener2576httpsgithubcomgardenergardenerpull2576>Cluster identities and <code>DNSOwner</code> objects (<a href=https://github.com/gardener/gardener/pull/2471>gardener/gardener#2471</a>, <a href=https://github.com/gardener/gardener/pull/2576>gardener/gardener#2576</a>)</h3><p>The shoot control plane migration topic is ongoing since a few months already, and we are very much progressing with it. A first alpha version will probably make it out soon. As part of these endeavors, we introduced cluster identities and the usage of <code>DNSOwner</code> objects in this release. Both are needed to gracefully migrate the <code>DNSEntry</code> extension objects from the old seed to the new seed as part of the control plane migration process.
Please find out more on this topic at <a href=https://kubernetes.io/blog/2019/12/02/gardener-project-update/#control-plane-migration-between-seed-clusters>this blog post</a>.</p><h3 id=new-uam-role-for-project-members-to-limit-user-access-management-privileges-gardenergardener2611httpsgithubcomgardenergardenerpull2611>New <code>uam</code> role for <code>Project</code> members to limit user access management privileges (<a href=https://github.com/gardener/gardener/pull/2611>gardener/gardener#2611</a>)</h3><p>In order to allow external user access management system to integrate with Gardener and to fulfil certain compliance aspects, we have introduced a new role called <code>uam</code> for <code>Project</code> members (next to <code>admin</code> and <code>viewer</code>). Only if a user has this role then he/she is allowed to add/remove other human users to the respective <code>Project</code>. By default, all newly created <code>Project</code>s assign this role only to the owner while, for backwards-compatibility reasons, it will be assigned for all members for existing projects. Project owners can steadily revoke this access as desired.
Interestingly, the <code>uam</code> role is backed by a custom RBAC verb called <code>manage-members</code>, i.e., the Gardener API server is only admitting changes to the human <code>Project</code> members if the respective user is bound to this RBAC verb.</p><h3 id=new-node-local-dns-feature-for-shoots-gardenergardener2528httpsgithubcomgardenergardenerpull2528>New node-local DNS feature for shoots (<a href=https://github.com/gardener/gardener/pull/2528>gardener/gardener#2528</a>)</h3><p>By default, we are using CoreDNS as DNS plugin in shoot clusters which we auto-scale horizontally using HPA. However, in some situations we are discovering certain bottlenecks with it, e.g., unreliable UDP connections, unnecessary node hopping, inefficient load balancing, etc.
To further optimize the DNS performance for shoot clusters, it is now possible to enable a new alpha-level feature gate in the gardenlet&rsquo;s componentconfig: <code>NodeLocalDNS</code>. If enabled, all shoots will get a new <code>DaemonSet</code> to run a DNS server on each node.</p><h3 id=more-kubelet-and-api-server-configurability-gardenergardener2574httpsgithubcomgardenergardenerpull2574-gardenergardener2668httpsgithubcomgardenergardenerpull2668>More kubelet and API server configurability (<a href=https://github.com/gardener/gardener/pull/2574>gardener/gardener#2574</a>, <a href=https://github.com/gardener/gardener/pull/2668>gardener/gardener#2668</a>)</h3><p>One large benefit of Gardener is that it allows you to optimize the usage of your control plane as well as worker nodes by exposing relevant configuration parameters in the <code>Shoot</code> API.
In this version, we are adding support to configure kubelet&rsquo;s values for <code>systemReserved</code> and <code>kubeReserved</code> resources as well as the kube-apiserver&rsquo;s watch cache sizes.
This allows end-users to get to better node utilization and/or performance for their shoot clusters.</p><h3 id=configurable-timeout-settings-for-machine-controller-manager-gardenergardener2563httpsgithubcomgardenergardenerpull2563>Configurable timeout settings for machine-controller-manager (<a href=https://github.com/gardener/gardener/pull/2563>gardener/gardener#2563</a>)</h3><p>One very central component in Project Gardener is the <a href=https://github.com/gardener/machine-controller-manager>machine-controller-manager</a> for managing the worker nodes of shoot clusters. It has extensive qualities with respect to node lifecycle management and rolling updates. As such, it uses certain timeout values, e.g. when creating or draining nodes, or when checking their health.
Earlier, those were not customizable by end-users, but we are adding this possibility now. You can fine-grain these settings per worker pool in the <code>Shoot</code> API such that you can optimize the lifecycle management of your worker nodes even more!</p><h3 id=improved-usage-of-cached-client-to-reduce-network-io-gardenergardener2635httpsgithubcomgardenergardenerpull2635-gardenergardener2637httpsgithubcomgardenergardenerpull2637>Improved usage of cached client to reduce network I/O (<a href=https://github.com/gardener/gardener/pull/2635>gardener/gardener#2635</a>, <a href=https://github.com/gardener/gardener/pull/2637>gardener/gardener#2637</a>)</h3><p>In the last Gardener release v1.7 we have introduced a huge refactoring the clients that we use to interact with the many different Kubernetes clusters. This is to further optimize the network I/O performed by leveraging watches and caches as good as possible. It&rsquo;s still an alpha-level feature that must be explicitly enabled in the Gardenlet&rsquo;s component configuration, though, with this release we have improved certain things in order to pave the way for beta promotion. For example, we were initially also using a cached client when interacting with shoots. However, as the gardenlet runs in the seed as well (and thus can communicate cluster-internally with the kube-apiservers of the respective shoots) this cache is not necessary and just memory overhead. We have removed it again and saw the memory usage getting lower again. More to come!</p><h3 id=aws-ebs-volume-encryption-by-default-gardenergardener-extension-provider-aws147httpsgithubcomgardenergardener-extension-provider-awspull147>AWS EBS volume encryption by default (<a href=https://github.com/gardener/gardener-extension-provider-aws/pull/147>gardener/gardener-extension-provider-aws#147</a>)</h3><p>The <code>Shoot</code> API already exposed the possibility to encrypt the root disks of worker nodes since quite a while, but it was disabled by default (for backwards-compatibility reasons). With this release we have change this default, so new shoot worker nodes will be provisioned with encrypted root disks out-of-the-box. However, the <code>g4dn</code> instance types of AWS don&rsquo;t support this encryption, so when you use them you have to explicitly disable the encryption in the worker pool configuration.</p><h3 id=liveness-probe-for-gardener-api-server-deployment-gardenergardener2647httpsgithubcomgardenergardenerpull2647>Liveness probe for Gardener API server deployment (<a href=https://github.com/gardener/gardener/pull/2647>gardener/gardener#2647</a>)</h3><p>A small, but very valuable improvement is the introduction of a liveness probe for our Gardener API server. As it&rsquo;s built with the same library like the Kubernetes API server, it exposes two endpoints at <code>/livez</code> and <code>/readyz</code> which were created exactly for the purpose of live- and readiness probes.
With Gardener v1.8 the Helm chart contains a liveness probe configuration by default, and we are awaiting an upstream fix (<a href=https://github.com/kubernetes/kubernetes/issues/93599>kubernetes/kubernetes#93599</a>) to also enable the readiness probe. This will help in a smoother rolling update of the Gardener API server pods, i.e., preventing clients from talking to a not yet initialized or already terminating API server instance.</p><h3 id=webhook-ports-changed-to-enable-openshift-gardenergardener2660httpsgithubcomgardenergardenerpull2660>Webhook ports changed to enable OpenShift (<a href=https://github.com/gardener/gardener/pull/2660>gardener/gardener#2660</a>)</h3><p>In order to make it possible to run Gardener on OpenShift clusters as well, we had to make a change in the port configuration for the webhooks we are using in both Gardener and the extension controllers. Earlier, all the webhook servers directly exposed port <code>443</code>, i.e., a system port which is a security concern and disallowed in OpenShift. We have changed this port now across all places and also adapted our network policies accordingly. This is most likely not the last necessary change to enable this scenario, however, it&rsquo;s a great improvement to push the project forward.</p><p>If you&rsquo;re interested in more details and even more improvements you can find all release notes for Gardener v1.8.0 here: <a href=https://github.com/gardener/gardener/releases/tag/v1.8.0>https://github.com/gardener/gardener/releases/tag/v1.8.0</a></p></p></div></div></article><a href=/blog class="nav-link back">Back to Blogs</a></div></div></div></section></div><style></style><footer class=footer><div class="container footer-wrapper"><ul class=nav><li><a href=/blog/>Blogs</a></li><li><a href=/community/>Community</a></li><li><a href=/adopter/>Adopters</a></li><li><a href=/documentation/home>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2020 Gardener project authors. Privacy Statement</span></div></footer><script src=/js/perfect-scrollbar.min.js?1606478711></script><script src=/js/perfect-scrollbar.jquery.min.js?1606478711></script><script src=/js/jquery.sticky.js?1606478711></script><script src=/js/featherlight.min.js?1606478711></script><script src=/js/html5shiv-printshiv.min.js?1606478711></script><script src=/js/modernizr.custom.71422.js?1606478711></script><link href=/mermaid/mermaid.css?1606478711 type=text/css rel=stylesheet><script src=/mermaid/mermaid.js?1606478711></script><script src=/js/code-snippets.js?1606478711></script><script>mermaid.initialize({startOnLoad:true,htmlLables:true});function createIssue(issueUrl,page,url){var uri=issueUrl+"?title=Documentation issue on page \""+page+"\"";uri=uri+"&body=\n\n<- DESCRIBE MISSING OR FAULTY DOCUMENTATION HERE->\n\n---\nPage: ["+page+"]("+
url+")\ndon't remove the link to the page. It's required for the processor"
var res=encodeURI(uri);res+="&labels=area/documentation"
window.open(res,"issue")
return false;}
$(document).ready(function(){inlineSVG.init();$("[data-publishdate]").each(function(){$(this).text(moment($(this,"YYYY-MM-DD","YYYY-MM-DD hh:mm:ss").attr("data-publishdate")).fromNow());});new ClipboardJS('.clipboard-copy');$("body").codeSnippets();});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2FGNSX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script src=/js/modernizr.custom.min.js></script><script src=/js/jsrender.min.js></script><script src=/js/main.js></script><script>$(document).ready(function(){$('.blogs .clipboard-copy').click(function(e){e.preventDefault();});})</script></body></html>